
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,r as s,x as a,F as l,o,c as t,N as d,G as r,b as n,n as u,O as c,a as p,t as i,J as m,l as w,g as f,j as g,u as h,h as v,e as b,f as y,P as _,E as V,q as k}from"../main-1d1da8fb.js";import{_ as x}from"../index/index.55992ed4.js";const E=e({name:"FixedActionBar"}),P=u(e({...E,setup(e){const u=s(!1);function c(){const e=document.documentElement.scrollTop||document.body.scrollTop,s=document.documentElement.clientHeight||document.body.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight;u.value=Math.ceil(e+s)>=a}return a((()=>{c(),window.addEventListener("scroll",c)})),l((()=>{window.removeEventListener("scroll",c)})),(e,s)=>(o(),t("div",{class:r(["actionbar",{shadow:!n(u)}]),"data-fixed-calc-width":""},[d(e.$slots,"default",{},void 0,!0)],2))}}),[["__scopeId","data-v-63511cc5"]]),q={class:"header"},H={class:"main"},j={class:"title"},U={class:"content"},$={key:0,class:"sub"},F=e({name:"PageHeader"}),I=u(e({...F,props:{title:{type:String,required:!0},content:{type:String,default:""}},setup(e){const s=c();return(a,l)=>(o(),t("div",q,[p("div",H,[p("div",j,i(e.title),1),p("div",U,[d(a.$slots,"content",{},(()=>[w(i(e.content),1)]),!0)])]),n(s).default?(o(),t("div",$,[d(a.$slots,"default",{},void 0,!0)])):m("",!0)]))}}),[["__scopeId","data-v-24ce26ee"]]),L=e({name:"PersonalEditPassword"}),S=e({...L,setup(e){const a=f(),l=g(),d=h(),r=s(),u=s({password:"",newpassword:"",checkpassword:""}),c=s({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(e,s,a)=>{s!==u.value.newpassword?a(new Error("两次密码不一致！")):a()}}]});function p(){r.value&&r.value.validate((e=>{if(e){const{password:e,newpassword:s}=u.value;_.updatePassword({oldPassword:e,password:s}).then((()=>{V({type:"success",message:"修改密码成功，请重新登录"}),d.logout().then((()=>{l.push({name:"login",query:{redirect:a.fullPath}})}))}))}}))}return(e,s)=>{const a=I,l=v("el-input"),d=v("el-form-item"),i=v("el-form"),m=v("el-col"),f=v("el-row"),g=x,h=v("el-button"),_=P;return o(),t("div",null,[b(a,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),b(g,null,{default:y((()=>[b(f,null,{default:y((()=>[b(m,{md:24,lg:12},{default:y((()=>[b(i,{ref_key:"formRef",ref:r,model:n(u),rules:n(c),"label-width":"120px"},{default:y((()=>[b(d,{label:"原密码",prop:"password"},{default:y((()=>[b(l,{modelValue:n(u).password,"onUpdate:modelValue":s[0]||(s[0]=e=>n(u).password=e),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])])),_:1}),b(d,{label:"新密码",prop:"newpassword"},{default:y((()=>[b(l,{modelValue:n(u).newpassword,"onUpdate:modelValue":s[1]||(s[1]=e=>n(u).newpassword=e),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])])),_:1}),b(d,{label:"确认新密码",prop:"checkpassword"},{default:y((()=>[b(l,{modelValue:n(u).checkpassword,"onUpdate:modelValue":s[2]||(s[2]=e=>n(u).checkpassword=e),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1}),b(_,null,{default:y((()=>[b(h,{type:"primary",size:"large",onClick:p},{default:y((()=>[w(" 提交 ")])),_:1})])),_:1})])}}});"function"==typeof k&&k(S);export{S as default};
