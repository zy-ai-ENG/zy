
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e}from"../index/index.0db9df33.js";import{a}from"../config/config.b5d22985.js";import{d as l,Q as t,r as p,x as d,h as r,o as u,c as o,e as y,f as i,a as s,l as c,E as n,q as h}from"../main-0579ff80.js";const m={class:"flex justify-between"},f=s("b",null,"官方微信支付参数设置",-1),W=l({__name:"wechat",setup(l){const h=t({payWechatStatus:"",payWeChatMchId:"",payWeChatAppId:"",payWeMiniAppId:"",payWeChatSecret:"",payWeChatNotifyUrl:"",payWeChatH5Url:"",payWeChatPublicKey:"",payWeChatPrivateKey:""}),W=p({payWechatStatus:[{required:!0,trigger:"change",message:"请选择当前支付开启状态"}],payWeChatSecret:[{required:!0,trigger:"blur",message:"请填写支付Secret秘钥"}],payWeChatMchId:[{required:!0,trigger:"blur",message:"请填写商户号"}],payWeChatNotifyUrl:[{required:!0,trigger:"blur",message:"请填写支付通知地址"}],payWeChatH5Url:[{required:!0,trigger:"blur",message:"请填写H5支付通知地址"}],payWeChatPublicKey:[{required:!0,trigger:"blur",message:"请填写支付公钥信息（cert.pem文件）"}],payWeChatPrivateKey:[{required:!0,trigger:"blur",message:"请填写支付私钥地址（key.pem文件）"}]}),C=p();async function g(){const e=await a.queryConfig({keys:["payWeChatSecret","payWeChatNotifyUrl","payWeChatH5Url","payWeChatAppId","payWeMiniAppId","payWechatStatus","payWeChatMchId","payWeChatPublicKey","payWeChatPrivateKey"]});Object.assign(h,e.data)}function b(){var e;null==(e=C.value)||e.validate((async e=>{if(!h.payWeChatAppId&&!h.payWeMiniAppId)return n.error("微信公众号AppId 和 微信小程序AppId 必填一个");if(e){try{await a.setConfig({settings:(l=h,Object.keys(l).map((e=>({configKey:e,configVal:l[e]}))))}),n.success("变更配置信息成功")}catch(t){}g()}else n.error("请填写完整信息");var l}))}return d((()=>{g()})),(a,l)=>{const t=r("el-alert"),p=e,d=r("el-button"),n=r("el-switch"),g=r("el-form-item"),_=r("el-col"),x=r("el-row"),V=r("el-input"),I=r("el-form"),U=r("el-card");return u(),o("div",null,[y(p,{bottomPadding:"20px"},{default:i((()=>[y(t,{closable:!1,"show-icon":"",title:"官方微信支付参数说明",description:"官方微信支付设置、同时开启多个支付、我们以微信支付优先级为最高、在pc端我们会调用native支付、在微信环境内、我们将调用Jsapi支付、请确认您的微信支付已经申请了支付权限、所有的支付通知地址统一为 https://域名/api/pay/notify 将域名修改为您的域名即可！",type:"warning"})])),_:1}),y(U,{style:{margin:"20px 20px 0 20px"}},{header:i((()=>[s("div",m,[f,y(d,{class:"button",onClick:b},{default:i((()=>[c(" 保存设置 ")])),_:1})])])),default:i((()=>[y(I,{ref_key:"formRef",ref:C,rules:W.value,model:h,"label-width":"140px"},{default:i((()=>[y(x,null,{default:i((()=>[y(_,{xs:24,md:20,lg:15,xl:12},{default:i((()=>[y(g,{label:"启用当前支付",prop:"payWechatStatus"},{default:i((()=>[y(n,{modelValue:h.payWechatStatus,"onUpdate:modelValue":l[0]||(l[0]=e=>h.payWechatStatus=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(x,null,{default:i((()=>[y(_,{xs:24,md:20,lg:15,xl:12},{default:i((()=>[y(g,{label:"商户ID",prop:"payWeChatMchId"},{default:i((()=>[y(V,{modelValue:h.payWeChatMchId,"onUpdate:modelValue":l[1]||(l[1]=e=>h.payWeChatMchId=e),placeholder:"请填写商户ID",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(x,null,{default:i((()=>[y(_,{xs:24,md:20,lg:15,xl:12},{default:i((()=>[y(g,{label:"微信公众号AppId",prop:"payWeChatAppId"},{default:i((()=>[y(V,{modelValue:h.payWeChatAppId,"onUpdate:modelValue":l[2]||(l[2]=e=>h.payWeChatAppId=e),placeholder:"请填写微信公众号AppId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(x,null,{default:i((()=>[y(_,{xs:24,md:20,lg:15,xl:12},{default:i((()=>[y(g,{label:"微信小程序AppId",prop:"payWeMiniAppId"},{default:i((()=>[y(V,{modelValue:h.payWeMiniAppId,"onUpdate:modelValue":l[3]||(l[3]=e=>h.payWeMiniAppId=e),placeholder:"请填写微信小程序AppId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(x,null,{default:i((()=>[y(_,{xs:24,md:20,lg:15,xl:12},{default:i((()=>[y(g,{label:"商户秘钥",prop:"payWeChatSecret"},{default:i((()=>[y(V,{modelValue:h.payWeChatSecret,"onUpdate:modelValue":l[4]||(l[4]=e=>h.payWeChatSecret=e),placeholder:"请填写Secret秘钥",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(x,null,{default:i((()=>[y(_,{xs:24,md:20,lg:15,xl:12},{default:i((()=>[y(g,{label:"支付通知地址",prop:"payWeChatNotifyUrl"},{default:i((()=>[y(V,{modelValue:h.payWeChatNotifyUrl,"onUpdate:modelValue":l[5]||(l[5]=e=>h.payWeChatNotifyUrl=e),placeholder:"请填写支付通知地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(x,null,{default:i((()=>[y(_,{xs:24,md:20,lg:15,xl:12},{default:i((()=>[y(g,{label:"H5支付通知地址",prop:"payWeChatH5Url"},{default:i((()=>[y(V,{modelValue:h.payWeChatH5Url,"onUpdate:modelValue":l[6]||(l[6]=e=>h.payWeChatH5Url=e),placeholder:"请填写H5支付通知地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(x,null,{default:i((()=>[y(_,{xs:24,md:20,lg:15,xl:12},{default:i((()=>[y(g,{label:"公钥地址",prop:"payWeChatPublicKey"},{default:i((()=>[y(V,{modelValue:h.payWeChatPublicKey,"onUpdate:modelValue":l[7]||(l[7]=e=>h.payWeChatPublicKey=e),type:"textarea",rows:6,placeholder:"请填写支付公钥信息（cert.pem文件）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(x,null,{default:i((()=>[y(_,{xs:24,md:20,lg:15,xl:12},{default:i((()=>[y(g,{label:"私钥地址",prop:"payWeChatPrivateKey"},{default:i((()=>[y(V,{modelValue:h.payWeChatPrivateKey,"onUpdate:modelValue":l[8]||(l[8]=e=>h.payWeChatPrivateKey=e),type:"textarea",rows:6,placeholder:"请填写支付私钥地址（key.pem文件）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["rules","model"])])),_:1})])}}});"function"==typeof h&&h(W);export{W as default};
