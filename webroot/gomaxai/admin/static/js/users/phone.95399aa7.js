
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e}from"../index/index.129bbe0b.js";import{a as l}from"../config/config.bd9b8a25.js";import{d as a,Q as t,r as s,x as o,h as n,o as c,c as i,e as r,f as d,a as u,l as m,E as p,q as f}from"../main-dd192319.js";const g={class:"flex justify-between"},h=u("b",null,"阿里云手机验证码配置",-1),y=a({__name:"phone",setup(a){const f=t({phoneRegisterStatus:"",aliPhoneAccessKeyId:"",aliPhoneAccessKeySecret:"",aliPhoneSignName:"",aliPhoneTemplateCode:""}),y=s({phoneRegisterStatus:[{required:!1,trigger:"blur",message:"请选择是否开启手机号注册"}],aliPhoneAccessKeyId:[{required:!1,trigger:"blur",message:"请填写阿里云短信服务accessKeyId"}],aliPhoneAccessKeySecret:[{required:!1,trigger:"blur",message:"请填写阿里云短信服务accessKeySecret"}],aliPhoneSignName:[{required:!1,trigger:"blur",message:"请填写阿里云短信服务的模板签名"}],aliPhoneTemplateCode:[{required:!1,trigger:"blur",message:"请填写阿里云短信服务的模板ID"}]}),P=s();async function b(){const e=await l.queryConfig({keys:["phoneRegisterStatus","aliPhoneAccessKeyId","aliPhoneAccessKeySecret","aliPhoneSignName","aliPhoneTemplateCode"]});Object.assign(f,e.data)}function _(){var e;null==(e=P.value)||e.validate((async e=>{if(e){try{await l.setConfig({settings:(a=f,Object.keys(a).map((e=>({configKey:e,configVal:a[e]}))))}),p.success("变更配置信息成功")}catch(t){}b()}else p.error("请填写完整信息");var a}))}return o((()=>{b()})),(l,a)=>{const t=n("el-alert"),s=e,o=n("el-button"),p=n("el-switch"),b=n("el-tooltip"),x=n("el-form-item"),S=n("el-col"),K=n("el-row"),A=n("el-input"),V=n("el-form"),v=n("el-card");return c(),i("div",null,[r(s,{bottomPadding:"20px"},{default:d((()=>[r(t,{closable:!1,"show-icon":"",title:"验证码说明",description:"此处采用阿里云短信服务、请先申请好个人的签名模板以及获取到您的秘钥信息、详细申请地址为：https://dysms.console.aliyun.com/overview 当您配置并开启后则表示开启用户端手机号注册的行为！",type:"warning"})])),_:1}),r(v,{style:{margin:"20px 20px 0 20px"}},{header:d((()=>[u("div",g,[h,r(o,{class:"button",onClick:_},{default:d((()=>[m(" 保存设置 ")])),_:1})])])),default:d((()=>[r(V,{ref_key:"formRef",ref:P,rules:y.value,model:f,"label-width":"170px"},{default:d((()=>[r(K,null,{default:d((()=>[r(S,{xs:24,md:20,lg:15,xl:12},{default:d((()=>[r(x,{label:"是否开启手机号注册",prop:"phoneRegisterStatus"},{default:d((()=>[r(b,{class:"box-item",effect:"dark",content:"如您启用短信验证、则用户端则可以通过手机验证码方式注册或登录！",placement:"right"},{default:d((()=>[r(p,{modelValue:f.phoneRegisterStatus,"onUpdate:modelValue":a[0]||(a[0]=e=>f.phoneRegisterStatus=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),r(K,null,{default:d((()=>[r(S,{xs:24,md:20,lg:15,xl:12},{default:d((()=>[r(x,{label:"AccessKeyId",prop:"aliPhoneAccessKeyId"},{default:d((()=>[r(A,{modelValue:f.aliPhoneAccessKeyId,"onUpdate:modelValue":a[1]||(a[1]=e=>f.aliPhoneAccessKeyId=e),placeholder:"请填写AccessKeyId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(K,null,{default:d((()=>[r(S,{xs:24,md:20,lg:15,xl:12},{default:d((()=>[r(x,{label:"AccessKeySecret",prop:"aliPhoneAccessKeySecret"},{default:d((()=>[r(A,{modelValue:f.aliPhoneAccessKeySecret,"onUpdate:modelValue":a[2]||(a[2]=e=>f.aliPhoneAccessKeySecret=e),placeholder:"请填写AccessKeySecret",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(K,null,{default:d((()=>[r(S,{xs:24,md:20,lg:15,xl:12},{default:d((()=>[r(x,{label:"短信签名",prop:"aliPhoneSignName"},{default:d((()=>[r(A,{modelValue:f.aliPhoneSignName,"onUpdate:modelValue":a[3]||(a[3]=e=>f.aliPhoneSignName=e),placeholder:"请填写您申请的短信签名",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(K,null,{default:d((()=>[r(S,{xs:24,md:20,lg:15,xl:12},{default:d((()=>[r(x,{label:"短信模板ID",prop:"aliPhoneTemplateCode"},{default:d((()=>[r(A,{modelValue:f.aliPhoneTemplateCode,"onUpdate:modelValue":a[4]||(a[4]=e=>f.aliPhoneTemplateCode=e),placeholder:"请填写短信模板ID",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["rules","model"])])),_:1})])}}});"function"==typeof f&&f(y);export{y as default};
