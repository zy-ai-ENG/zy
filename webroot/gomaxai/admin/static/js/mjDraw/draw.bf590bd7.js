
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e}from"../index/index.c9f6880f.js";import{A as l}from"../mj/mj.482967bc.js";import{A as a}from"../chat/chat.97153b6c.js";import{u as t}from"../utcformatTime/utcformatTime.f6db2c52.js";import{i as r,W as o,j as i}from"../index/index.5ad1a92e.js";import{d as n,r as s,G as u,y as d,j as c,U as p,o as f,c as m,f as g,g as w,V as h,W as v,e as _,h as b,b as y,w as I,J as x,t as j,P as z,s as C}from"../main-646ffc07.js";const k={style:{float:"right"}},P={class:"answer"},U={class:"answer_container"},V=["src"],A=n({__name:"draw",setup(n){const C=s(),A=s(0),D=s(!1),M=u({rec:null,status:null,page:1,size:10}),Y=s([]);async function J(){try{D.value=!0;const e=await l.queryAdminDrawList(M);D.value=!1;const{rows:a,count:t}=e.data;A.value=t,Y.value=a}catch(e){D.value=!1}}return d((()=>{J()})),(l,n)=>{const s=c("el-option"),u=c("el-select"),d=c("el-form-item"),L=c("el-button"),$=c("el-form"),G=e,S=c("el-alert"),T=c("el-table-column"),W=c("el-image"),q=c("el-tag"),F=c("el-popover"),R=c("el-popconfirm"),B=c("el-table"),E=c("el-pagination"),H=c("el-row"),K=p("loading");return f(),m("div",null,[g(G,null,{default:w((()=>[g($,{ref_key:"formRef",ref:C,inline:!0,model:M},{default:w((()=>[g(d,{label:"推荐状态",prop:"rec"},{default:w((()=>[g(u,{modelValue:M.rec,"onUpdate:modelValue":n[0]||(n[0]=e=>M.rec=e),placeholder:"请选择推荐状态",clearable:"",style:{width:"192px"}},{default:w((()=>[(f(!0),m(h,null,v(_(r),(e=>(f(),x(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),g(d,{label:"绘制状态",prop:"status"},{default:w((()=>[g(u,{modelValue:M.status,"onUpdate:modelValue":n[1]||(n[1]=e=>M.status=e),placeholder:"请选择绘制状态",clearable:"",style:{width:"192px"}},{default:w((()=>[(f(!0),m(h,null,v(_(o),(e=>(f(),x(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),g(d,null,{default:w((()=>[g(L,{type:"primary",onClick:J},{default:w((()=>[b(" 查询 ")])),_:1}),g(L,{onClick:n[2]||(n[2]=e=>{return null==(l=_(C))||l.resetFields(),void J();var l})},{default:w((()=>[b(" 重置 ")])),_:1})])),_:1}),y("span",k,[g(L,{type:"success",onClick:J},{default:w((()=>[b(" 刷新列表 ")])),_:1})])])),_:1},8,["model"])])),_:1}),g(G,{bottomPadding:"20px"},{default:w((()=>[g(S,{"show-icon":"",title:"MJ绘图历史说明",description:"点击推荐的图片将会出现在画廊当中！",type:"success"})])),_:1}),g(G,{bottomPadding:"20px",bottomMargin:"0px"},{default:w((()=>[I((f(),x(B,{border:"",data:_(Y),height:"54vh",style:{width:"100%"},size:"large"},{default:w((()=>[g(T,{prop:"id",align:"center",label:"ID",width:"70"}),g(T,{prop:"fileInfo.thumbImg",align:"center",label:"绘图结果"},{default:w((e=>{var l,a;return[g(W,{style:{height:"120px"},"preview-teleported":"",fit:"contain","preview-src-list":[null==(l=e.row)?void 0:l.imageUrl],src:null==(a=e.row)?void 0:a.imageUrl,lazy:"","hide-on-click-modal":""},null,8,["preview-src-list","src"])]})),_:1}),g(T,{prop:"userInfo.username",align:"center",label:"用户名",width:"120"}),g(T,{prop:"fileInfo.thumbImg",align:"center",label:"推荐状态",width:"90"},{default:w((e=>[g(q,{type:1===e.row.rec?"success":""},{default:w((()=>[b(j(1===e.row.rec?"已推荐":"未推荐"),1)])),_:2},1032,["type"])])),_:1}),g(T,{prop:"userInfo.email",label:"邮箱",width:"180",align:"center"}),g(T,{prop:"status",align:"center",label:"绘图状态",width:"105"},{default:w((e=>[g(q,{type:100===e.row.status?"success":""},{default:w((()=>[b(j(_(i)[e.row.status]),1)])),_:2},1032,["type"])])),_:1}),g(T,{prop:"fullPrompt",label:"绘图指令",align:"center",width:"200"},{default:w((e=>[g(F,{placement:"top",width:400,trigger:"click"},{reference:w((()=>[y("div",P,j(e.row.fullPrompt),1)])),default:w((()=>[y("div",U,j(e.row.fullPrompt),1)])),_:2},1024)])),_:1}),g(T,{prop:"progress",align:"center",label:"绘图进度",width:"90"}),g(T,{prop:"fileInfo.thumbImg",align:"center",label:"绘图尺寸",width:"120"},{default:w((e=>{var l,a,t,r,o;return[b(j((null==(l=e.row)?void 0:l.fileInfo)?`${null==(t=null==(a=e.row)?void 0:a.fileInfo)?void 0:t.width}*${null==(o=null==(r=e.row)?void 0:r.fileInfo)?void 0:o.height}`:"---"),1)]})),_:1}),g(T,{prop:"userInfo.avatar",label:"用户头像",width:"90"},{default:w((e=>{var l,a;return[y("img",{src:null==(a=null==(l=e.row)?void 0:l.userInfo)?void 0:a.avatar,style:{height:"50px"}},null,8,V)]})),_:1}),g(T,{prop:"createdAt",label:"提问时间",align:"center",width:"200"},{default:w((e=>[b(j(_(t)(e.row.createdAt,"YYYY-MM-DD hh:mm:ss")),1)])),_:1}),g(T,{fixed:"right",label:"操作",width:"200",align:"center"},{default:w((e=>[g(R,{title:`确认${1===e.row.rec?"取消推荐":"推荐"}图片吗！`,width:"260","icon-color":"red",onConfirm:l=>async function(e){const l=await a.recMjDrawImg({id:e});z.success(l.data),J()}(e.row.id)},{reference:w((()=>[g(L,{link:"",type:1===e.row.rec?"success":"",size:"small"},{default:w((()=>[b(" 推荐图片 ")])),_:2},1032,["type"])])),_:2},1032,["title","onConfirm"]),g(R,{title:"`确认删除此条记录么！",width:"260","icon-color":"red",onConfirm:l=>async function(e){const l=await a.delChatLog({id:e});z.success(l.data),J()}(e.row.id)},{reference:w((()=>[g(L,{type:"warning",size:"small"},{default:w((()=>[b(" 删除记录 ")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[K,_(D)]]),g(H,{class:"flex justify-end mt-5"},{default:w((()=>[g(E,{"current-page":M.page,"onUpdate:currentPage":n[3]||(n[3]=e=>M.page=e),"page-size":M.size,"onUpdate:pageSize":n[4]||(n[4]=e=>M.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:_(A),onSizeChange:J,onCurrentChange:J},null,8,["current-page","page-size","total"])])),_:1})])),_:1})])}}});"function"==typeof C&&C(A);export{A as default};
