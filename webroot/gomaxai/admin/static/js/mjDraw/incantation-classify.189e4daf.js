
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e}from"../index/index.3ad5ed39.js";import a from"../components/mjIncantationClassify.12439433.js";import l from"../components/mjDetail.2a6a36d7.js";import{A as t}from"../mj/mj.322c6af7.js";import{u as o}from"../utcformatTime/utcformatTime.f6db2c52.js";import{d as n,r as s,Q as r,x as i,h as p,R as u,o as d,c as f,e as m,f as c,l as y,a as _,w as g,I as w,t as b,b as v,E as j,n as h,q as x}from"../main-01383ffb.js";const k={style:{float:"right"}},z=n({__name:"incantation-classify",setup(n){const h=s(),x=s(),z=s(!1),C=s([]),A=s(0),V=r({level:0,page:1,size:20,type:"",keyword:""}),I=s(),M=async()=>{try{z.value=!0;const e=await t.queryMjIncantClassify(V),{rows:a,count:l}=e.data;z.value=!1,A.value=l,C.value=a}catch(e){z.value=!1}},R=async()=>{x.value.open()};return i((()=>{M()})),(n,s)=>{const r=p("el-input"),i=p("el-form-item"),U=p("el-option"),P=p("el-select"),q=p("el-button"),D=p("Plus"),S=p("el-icon"),T=p("el-form"),E=e,F=p("el-table-column"),H=p("el-popconfirm"),L=p("el-table"),N=p("el-pagination"),O=p("el-row"),Q=u("loading");return d(),f("div",null,[m(a,{ref_key:"mjManagerRef",ref:x,onFresh:M},null,512),m(l,{ref_key:"mjDetailRef",ref:h},null,512),m(E,null,{default:c((()=>[m(T,{ref_key:"formRef",ref:I,inline:!0,model:V},{default:c((()=>[m(i,{label:"关键字",prop:"keyword"},{default:c((()=>[m(r,{modelValue:V.keyword,"onUpdate:modelValue":s[0]||(s[0]=e=>V.keyword=e),style:{width:"192px"},placeholder:"分类关键字[模糊搜索]",clearable:""},null,8,["modelValue"])])),_:1}),m(i,{label:"所属类型",prop:"type"},{default:c((()=>[m(P,{modelValue:V.type,"onUpdate:modelValue":s[1]||(s[1]=e=>V.type=e),style:{width:"192px"}},{default:c((()=>[m(U,{value:"text",label:"普通"}),m(U,{value:"style",label:"风格"})])),_:1},8,["modelValue"])])),_:1}),m(i,null,{default:c((()=>[m(q,{type:"primary",onClick:M},{default:c((()=>[y(" 查询 ")])),_:1}),m(q,{onClick:s[2]||(s[2]=e=>(I.value,Object.assign(V,{level:2,page:1,size:20,type:"",keyword:""}),void M()))},{default:c((()=>[y(" 重置 ")])),_:1})])),_:1}),_("span",k,[m(q,{type:"success",class:"ml-3",onClick:R},{default:c((()=>[y(" 添加咒语分类 "),m(S,{class:"ml-3"},{default:c((()=>[m(D)])),_:1})])),_:1})])])),_:1},8,["model"])])),_:1}),m(E,{bottomPadding:"20px",bottomMargin:"0px"},{default:c((()=>[g((d(),w(L,{border:"",data:C.value,height:"64vh",width:"100%",size:"large"},{default:c((()=>[m(F,{prop:"classifyName",label:"分类名称"}),m(F,{prop:"level",label:"级别"},{default:c((e=>[_("p",null,b(1===e.row.level?"一级":2===e.row.level?"二级":"未知"),1)])),_:1}),m(F,{prop:"type",label:"类型"},{default:c((e=>[_("p",null,b("text"===e.row.type?"普通":"style"===e.row.type?"风格":"未知"),1)])),_:1}),m(F,{prop:"createdAt",label:"创建时间"},{default:c((e=>[_("p",null,b(v(o)(e.row.createdAt)),1)])),_:1}),m(F,{prop:"updatedAt",label:"更新时间"},{default:c((e=>[_("p",null,b(v(o)(e.row.updatedAt)),1)])),_:1}),m(F,{fixed:"right",label:"操作",width:"280",align:"center"},{default:c((e=>[m(q,{link:"",type:"primary",size:"small",onClick:a=>(async e=>{x.value.open(e.id)})(e.row)},{default:c((()=>[y(" 编辑 ")])),_:2},1032,["onClick"]),m(H,{width:"300px",title:"删除后不可找回，确定删除?","confirm-button-text":"确认",onConfirm:a=>(async e=>{await t.removeMjIncantClassify({id:e.id}),j.success("删除咒语分类成功！"),await M()})(e.row)},{reference:c((()=>[m(q,{link:"",type:"danger",disabled:1===e.row.inner,size:"small"},{default:c((()=>[y(" 删除 ")])),_:2},1032,["disabled"])])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[Q,z.value]]),m(O,{class:"flex justify-end mt-5 pb-5"},{default:c((()=>[m(N,{"current-page":V.page,"onUpdate:currentPage":s[3]||(s[3]=e=>V.page=e),"page-size":V.size,"onUpdate:pageSize":s[4]||(s[4]=e=>V.size=e),class:"mr-5","page-sizes":[15,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:A.value,onSizeChange:M,onCurrentChange:M},null,8,["current-page","page-size","total"])])),_:1})])),_:1})])}}});"function"==typeof x&&x(z);const C=h(z,[["__scopeId","data-v-66b72ea2"]]);export{C as default};
