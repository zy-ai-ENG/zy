
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e}from"../index/index.227bd596.js";import{A as l}from"../mj/mj.5e91af9b.js";import{A as a}from"../chat/chat.5c44f540.js";import{u as t}from"../utcformatTime/utcformatTime.f6db2c52.js";import{n as r,W as o,o as n}from"../index/index.4485e23d.js";import{d as i,r as s,Q as u,x as d,h as c,R as p,o as f,c as m,e as w,f as g,S as h,U as v,b as _,l as b,a as y,w as x,I,t as z,E as j,q as C}from"../main-32165e1b.js";const k={style:{float:"right"}},U={class:"answer"},A={class:"answer_container"},P=["src"],V=i({__name:"draw",setup(i){const C=s(),V=s(0),D=s(!1),M=u({rec:null,status:null,page:1,size:10}),Y=s([]);async function L(){try{D.value=!0;const e=await l.queryAdminDrawList(M);D.value=!1;const{rows:a,count:t}=e.data;V.value=t,Y.value=a}catch(e){D.value=!1}}return d((()=>{L()})),(l,i)=>{const s=c("el-option"),u=c("el-select"),d=c("el-form-item"),S=c("el-button"),$=c("el-form"),q=e,J=c("el-alert"),R=c("el-table-column"),T=c("el-image"),E=c("el-tag"),F=c("el-popover"),H=c("el-popconfirm"),N=c("el-table"),Q=c("el-pagination"),W=c("el-row"),B=p("loading");return f(),m("div",null,[w(q,null,{default:g((()=>[w($,{ref_key:"formRef",ref:C,inline:!0,model:M},{default:g((()=>[w(d,{label:"推荐状态",prop:"rec"},{default:g((()=>[w(u,{modelValue:M.rec,"onUpdate:modelValue":i[0]||(i[0]=e=>M.rec=e),placeholder:"请选择推荐状态",clearable:"",style:{width:"192px"}},{default:g((()=>[(f(!0),m(h,null,v(_(r),(e=>(f(),I(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),w(d,{label:"绘制状态",prop:"status"},{default:g((()=>[w(u,{modelValue:M.status,"onUpdate:modelValue":i[1]||(i[1]=e=>M.status=e),placeholder:"请选择绘制状态",clearable:"",style:{width:"192px"}},{default:g((()=>[(f(!0),m(h,null,v(_(o),(e=>(f(),I(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),w(d,null,{default:g((()=>[w(S,{type:"primary",onClick:L},{default:g((()=>[b(" 查询 ")])),_:1}),w(S,{onClick:i[2]||(i[2]=e=>{return null==(l=_(C))||l.resetFields(),void L();var l})},{default:g((()=>[b(" 重置 ")])),_:1})])),_:1}),y("span",k,[w(S,{type:"success",onClick:L},{default:g((()=>[b(" 刷新列表 ")])),_:1})])])),_:1},8,["model"])])),_:1}),w(q,{bottomPadding:"20px"},{default:g((()=>[w(J,{"show-icon":"",title:"MJ绘图历史说明",description:"点击推荐的图片将会出现在画廊当中！",type:"success"})])),_:1}),w(q,{bottomPadding:"20px",bottomMargin:"0px"},{default:g((()=>[x((f(),I(N,{border:"",data:_(Y),height:"54vh",style:{width:"100%"},size:"large"},{default:g((()=>[w(R,{prop:"id",align:"center",label:"ID",width:"70"}),w(R,{prop:"fileInfo.thumbImg",align:"center",label:"绘图结果"},{default:g((e=>{var l,a;return[w(T,{style:{height:"120px"},"preview-teleported":"",fit:"contain","preview-src-list":[null==(l=e.row)?void 0:l.imageUrl],src:null==(a=e.row)?void 0:a.imageUrl,lazy:"","hide-on-click-modal":""},null,8,["preview-src-list","src"])]})),_:1}),w(R,{prop:"userInfo.username",align:"center",label:"用户名",width:"120"}),w(R,{prop:"fileInfo.thumbImg",align:"center",label:"推荐状态",width:"90"},{default:g((e=>[w(E,{type:1===e.row.rec?"success":""},{default:g((()=>[b(z(1===e.row.rec?"已推荐":"未推荐"),1)])),_:2},1032,["type"])])),_:1}),w(R,{prop:"userInfo.email",label:"邮箱",width:"180",align:"center"}),w(R,{prop:"status",align:"center",label:"绘图状态",width:"105"},{default:g((e=>[w(E,{type:100===e.row.status?"success":""},{default:g((()=>[b(z(_(n)[e.row.status]),1)])),_:2},1032,["type"])])),_:1}),w(R,{prop:"fullPrompt",label:"绘图指令",align:"center",width:"200"},{default:g((e=>[w(F,{placement:"top",width:400,trigger:"click"},{reference:g((()=>[y("div",U,z(e.row.fullPrompt),1)])),default:g((()=>[y("div",A,z(e.row.fullPrompt),1)])),_:2},1024)])),_:1}),w(R,{prop:"progress",align:"center",label:"绘图进度",width:"90"}),w(R,{prop:"fileInfo.thumbImg",align:"center",label:"绘图尺寸",width:"120"},{default:g((e=>{var l,a,t,r,o;return[b(z((null==(l=e.row)?void 0:l.fileInfo)?`${null==(t=null==(a=e.row)?void 0:a.fileInfo)?void 0:t.width}*${null==(o=null==(r=e.row)?void 0:r.fileInfo)?void 0:o.height}`:"---"),1)]})),_:1}),w(R,{prop:"userInfo.avatar",label:"用户头像",width:"90"},{default:g((e=>{var l,a;return[y("img",{src:null==(a=null==(l=e.row)?void 0:l.userInfo)?void 0:a.avatar,style:{height:"50px"}},null,8,P)]})),_:1}),w(R,{prop:"createdAt",label:"提问时间",align:"center",width:"200"},{default:g((e=>[b(z(_(t)(e.row.createdAt,"YYYY-MM-DD hh:mm:ss")),1)])),_:1}),w(R,{fixed:"right",label:"操作",width:"200",align:"center"},{default:g((e=>[w(H,{title:`确认${1===e.row.rec?"取消推荐":"推荐"}图片吗！`,width:"260","icon-color":"red",onConfirm:l=>async function(e){const l=await a.recMjDrawImg({id:e});j.success(l.data),L()}(e.row.id)},{reference:g((()=>[w(S,{link:"",type:1===e.row.rec?"success":"",size:"small"},{default:g((()=>[b(" 推荐图片 ")])),_:2},1032,["type"])])),_:2},1032,["title","onConfirm"]),w(H,{title:"`确认删除此条记录么！",width:"260","icon-color":"red",onConfirm:l=>async function(e){const l=await a.delChatLog({id:e});j.success(l.data),L()}(e.row.id)},{reference:g((()=>[w(S,{type:"warning",size:"small"},{default:g((()=>[b(" 删除记录 ")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[B,_(D)]]),w(W,{class:"flex justify-end mt-5"},{default:g((()=>[w(Q,{"current-page":M.page,"onUpdate:currentPage":i[3]||(i[3]=e=>M.page=e),"page-size":M.size,"onUpdate:pageSize":i[4]||(i[4]=e=>M.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:_(V),onSizeChange:L,onCurrentChange:L},null,8,["current-page","page-size","total"])])),_:1})])),_:1})])}}});"function"==typeof C&&C(V);export{V as default};
