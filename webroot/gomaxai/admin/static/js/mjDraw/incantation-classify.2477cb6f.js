
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e}from"../index/index.c9f6880f.js";import a from"../components/mjIncantationClassify.4007a3fe.js";import l from"../components/mjDetail.ee67cc67.js";import{A as t}from"../mj/mj.482967bc.js";import{u as o}from"../utcformatTime/utcformatTime.f6db2c52.js";import{d as s,r as n,G as r,y as i,j as p,U as u,o as d,c as f,f as m,g as c,h as y,b as _,w as g,J as w,t as b,e as v,P as j,q as h,s as k}from"../main-646ffc07.js";const x={style:{float:"right"}},z=s({__name:"incantation-classify",setup(s){const h=n(),k=n(),z=n(!1),C=n([]),V=n(0),A=r({level:0,page:1,size:20,type:"",keyword:""}),U=n(),I=async()=>{try{z.value=!0;const e=await t.queryMjIncantClassify(A),{rows:a,count:l}=e.data;z.value=!1,V.value=l,C.value=a}catch(e){z.value=!1}},M=async()=>{k.value.open()};return i((()=>{I()})),(s,n)=>{const r=p("el-input"),i=p("el-form-item"),P=p("el-option"),R=p("el-select"),q=p("el-button"),D=p("Plus"),G=p("el-icon"),J=p("el-form"),S=e,T=p("el-table-column"),F=p("el-popconfirm"),N=p("el-table"),O=p("el-pagination"),B=p("el-row"),E=u("loading");return d(),f("div",null,[m(a,{ref_key:"mjManagerRef",ref:k,onFresh:I},null,512),m(l,{ref_key:"mjDetailRef",ref:h},null,512),m(S,null,{default:c((()=>[m(J,{ref_key:"formRef",ref:U,inline:!0,model:A},{default:c((()=>[m(i,{label:"关键字",prop:"keyword"},{default:c((()=>[m(r,{modelValue:A.keyword,"onUpdate:modelValue":n[0]||(n[0]=e=>A.keyword=e),style:{width:"192px"},placeholder:"分类关键字[模糊搜索]",clearable:""},null,8,["modelValue"])])),_:1}),m(i,{label:"所属类型",prop:"type"},{default:c((()=>[m(R,{modelValue:A.type,"onUpdate:modelValue":n[1]||(n[1]=e=>A.type=e),style:{width:"192px"}},{default:c((()=>[m(P,{value:"text",label:"普通"}),m(P,{value:"style",label:"风格"})])),_:1},8,["modelValue"])])),_:1}),m(i,null,{default:c((()=>[m(q,{type:"primary",onClick:I},{default:c((()=>[y(" 查询 ")])),_:1}),m(q,{onClick:n[2]||(n[2]=e=>(U.value,Object.assign(A,{level:2,page:1,size:20,type:"",keyword:""}),void I()))},{default:c((()=>[y(" 重置 ")])),_:1})])),_:1}),_("span",x,[m(q,{type:"success",class:"ml-3",onClick:M},{default:c((()=>[y(" 添加咒语分类 "),m(G,{class:"ml-3"},{default:c((()=>[m(D)])),_:1})])),_:1})])])),_:1},8,["model"])])),_:1}),m(S,{bottomPadding:"20px",bottomMargin:"0px"},{default:c((()=>[g((d(),w(N,{border:"",data:C.value,height:"64vh",width:"100%",size:"large"},{default:c((()=>[m(T,{prop:"classifyName",label:"分类名称"}),m(T,{prop:"level",label:"级别"},{default:c((e=>[_("p",null,b(1===e.row.level?"一级":2===e.row.level?"二级":"未知"),1)])),_:1}),m(T,{prop:"type",label:"类型"},{default:c((e=>[_("p",null,b("text"===e.row.type?"普通":"style"===e.row.type?"风格":"未知"),1)])),_:1}),m(T,{prop:"createdAt",label:"创建时间"},{default:c((e=>[_("p",null,b(v(o)(e.row.createdAt)),1)])),_:1}),m(T,{prop:"updatedAt",label:"更新时间"},{default:c((e=>[_("p",null,b(v(o)(e.row.updatedAt)),1)])),_:1}),m(T,{fixed:"right",label:"操作",width:"280",align:"center"},{default:c((e=>[m(q,{link:"",type:"primary",size:"small",onClick:a=>(async e=>{k.value.open(e.id)})(e.row)},{default:c((()=>[y(" 编辑 ")])),_:2},1032,["onClick"]),m(F,{width:"300px",title:"删除后不可找回，确定删除?","confirm-button-text":"确认",onConfirm:a=>(async e=>{await t.removeMjIncantClassify({id:e.id}),j.success("删除咒语分类成功！"),await I()})(e.row)},{reference:c((()=>[m(q,{link:"",type:"danger",disabled:1===e.row.inner,size:"small"},{default:c((()=>[y(" 删除 ")])),_:2},1032,["disabled"])])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[E,z.value]]),m(B,{class:"flex justify-end mt-5 pb-5"},{default:c((()=>[m(O,{"current-page":A.page,"onUpdate:currentPage":n[3]||(n[3]=e=>A.page=e),"page-size":A.size,"onUpdate:pageSize":n[4]||(n[4]=e=>A.size=e),class:"mr-5","page-sizes":[15,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:V.value,onSizeChange:I,onCurrentChange:I},null,8,["current-page","page-size","total"])])),_:1})])),_:1})])}}});"function"==typeof k&&k(z);const C=h(z,[["__scopeId","data-v-66b72ea2"]]);export{C as default};
