
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e}from"../index/index.0db9df33.js";import a from"../components/mjIncantationClassify.417ce526.js";import t from"../components/mjDetail.af6ce73a.js";import{A as l}from"../mj/mj.34922543.js";import{u as s}from"../utcformatTime/utcformatTime.f6db2c52.js";import{d as n,r as o,Q as i,x as r,h as u,R as c,o as p,c as d,e as m,f,l as g,w as y,I as v,a as _,t as w,b,E as j,n as h,q as z}from"../main-0579ff80.js";const x=n({__name:"incantation-classify",setup(n){const h=o(),z=o(),x=o(!1),C=o([]),k=o(0),A=i({level:0,page:1,size:20});o();const I=async()=>{try{x.value=!0;const e=await l.queryMjIncantClassify(A),{rows:a,count:t}=e.data;x.value=!1,k.value=t,C.value=a}catch(e){x.value=!1}},M=async()=>{z.value.open()};return r((()=>{I()})),(n,o)=>{const i=u("el-alert"),r=u("Plus"),P=u("el-icon"),R=u("el-button"),q=e,D=u("el-table-column"),E=u("el-popconfirm"),S=u("el-table"),T=u("el-pagination"),U=u("el-row"),F=c("loading");return p(),d("div",null,[m(a,{ref_key:"mjManagerRef",ref:z,list:C.value,onFresh:I},null,8,["list"]),m(t,{ref_key:"mjDetailRef",ref:h},null,512),m(q,{bottomPadding:"20px",class:"header"},{default:f((()=>[m(i,{"show-icon":"",title:"咒语分类说明",closable:!1,description:"咒语分类分一级和二级，内置一级分类不可删除但可修改，可删除二级分类！",type:"success"}),m(R,{type:"success",class:"ml-3",size:"large",onClick:M},{default:f((()=>[g(" 添加咒语分类 "),m(P,{class:"ml-3"},{default:f((()=>[m(r)])),_:1})])),_:1})])),_:1}),m(q,{bottomPadding:"20px",bottomMargin:"0px"},{default:f((()=>[y((p(),v(S,{border:"",data:C.value,height:"64vh",width:"100%",size:"large"},{default:f((()=>[m(D,{prop:"classifyName",label:"分类名称"}),m(D,{prop:"level",label:"级别"},{default:f((e=>[_("p",null,w(1===e.row.level?"一级":2===e.row.level?"二级":"未知"),1)])),_:1}),m(D,{prop:"createdAt",label:"创建时间"},{default:f((e=>[_("p",null,w(b(s)(e.row.createdAt)),1)])),_:1}),m(D,{prop:"updatedAt",label:"更新时间"},{default:f((e=>[_("p",null,w(b(s)(e.row.updatedAt)),1)])),_:1}),m(D,{fixed:"right",label:"操作",width:"280",align:"center"},{default:f((e=>[m(R,{link:"",type:"primary",size:"small",onClick:a=>(async e=>{z.value.open(e.id)})(e.row)},{default:f((()=>[g(" 编辑 ")])),_:2},1032,["onClick"]),m(E,{width:"300px",title:"删除后不可找回，确定删除?","confirm-button-text":"确认",onConfirm:a=>(async e=>{await l.removeMjIncantClassify({id:e.id}),j.success("删除咒语分类成功！"),await I()})(e.row)},{reference:f((()=>[m(R,{link:"",type:"danger",disabled:1===e.row.inner,size:"small"},{default:f((()=>[g(" 删除 ")])),_:2},1032,["disabled"])])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[F,x.value]]),m(U,{class:"flex justify-end mt-5 pb-5"},{default:f((()=>[m(T,{"current-page":A.page,"onUpdate:currentPage":o[0]||(o[0]=e=>A.page=e),"page-size":A.size,"onUpdate:pageSize":o[1]||(o[1]=e=>A.size=e),class:"mr-5","page-sizes":[15,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:k.value,onSizeChange:I,onCurrentChange:I},null,8,["current-page","page-size","total"])])),_:1})])),_:1})])}}});"function"==typeof z&&z(x);const C=h(x,[["__scopeId","data-v-ac5e6776"]]);export{C as default};
