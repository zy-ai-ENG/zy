
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{p as e}from"../@lezer_javascript@1.4.3/@lezer_javascript@1.4.3.50886484.js";import{s as t,L as n,d as r,e as o,f as a,h as i,j as l,k as s,n as c,c as m,o as f}from"../@codemirror_language@6.6.0/@codemirror_language@6.6.0.b1412095.js";import{E as p}from"../@codemirror_state@6.2.0/@codemirror_state@6.2.0.50a19798.js";import{E as d}from"../@codemirror_view@6.10.1/@codemirror_view@6.10.1.3e2a74d9.js";import{s as u,i as y,c as g}from"../@codemirror_autocomplete@6.6.0_@codemirror_language@6.6.0_@codemirror_state@6.2.0_@codemirror_paybmlmgsxoxfhwyti4vm2xwei/@codemirror_autocomplete@6.6.0_@codemirror_language@6.6.0_@codemirror_state@6.2.0_@codemirror_paybmlmgsxoxfhwyti4vm2xwei.ad350a41.js";import{I as h,a as b}from"../@lezer_common@1.0.2/@lezer_common@1.0.2.f1b3fc52.js";import"../@lezer_lr@1.3.4/@lezer_lr@1.3.4.69ac56de.js";import"../@lezer_highlight@1.1.4/@lezer_highlight@1.1.4.ab75f228.js";import"../style-mod@4.0.3/style-mod@4.0.3.2c0c074d.js";import"../w3c-keyname@2.2.6/w3c-keyname@2.2.6.89c2fad7.js";const w=[u("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),u("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),u("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),u("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),u("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),u("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),u("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),u("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),u("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),u('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),u('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],x=new b,S=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function v(e){return(t,n)=>{let r=t.node.getChild("VariableDefinition");return r&&n(r,e),!0}}const $=["FunctionDeclaration"],k={FunctionDeclaration:v("function"),ClassDeclaration:v("class"),ClassExpression:()=>!0,EnumDeclaration:v("constant"),TypeAliasDeclaration:v("type"),NamespaceDeclaration:v("namespace"),VariableDefinition(e,t){e.matchContext($)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function _(e,t){let n=x.get(t);if(n)return n;let r=[],o=!0;function a(t,n){let o=e.sliceString(t.from,t.to);r.push({label:o,type:n})}return t.cursor(h.IncludeAnonymous).iterate((t=>{if(o)o=!1;else if(t.name){let e=k[t.name];if(e&&e(t,a)||S.has(t.name))return!1}else if(t.to-t.from>8192){for(let n of _(e,t.node))r.push(n);return!1}})),x.set(t,r),r}const j=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,T=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function C(e){let n=t(e.state).resolveInner(e.pos,-1);if(T.indexOf(n.name)>-1)return null;let r="VariableName"==n.name||n.to-n.from<20&&j.test(e.state.sliceDoc(n.from,n.to));if(!r&&!e.explicit)return null;let o=[];for(let t=n;t;t=t.parent)S.has(t.name)&&(o=o.concat(_(e.state.doc,t)));return{options:o,from:r?n.from:e.pos,validFor:j}}function E(e,t,n){var r;let o=[];for(;;){let a,i=t.firstChild;if("VariableName"==(null==i?void 0:i.name))return o.push(e(i)),{path:o.reverse(),name:n};if("MemberExpression"!=(null==i?void 0:i.name)||"PropertyName"!=(null===(r=a=i.lastChild)||void 0===r?void 0:r.name))return null;o.push(e(a)),t=i}}function J(e){let n=t=>e.state.doc.sliceString(t.from,t.to),r=t(e.state).resolveInner(e.pos,-1);return"PropertyName"==r.name?E(n,r.parent,n(r)):T.indexOf(r.name)>-1?null:"VariableName"==r.name||r.to-r.from<20&&j.test(n(r))?{path:[],name:n(r)}:"."!=r.name&&"?."!=r.name||"MemberExpression"!=r.parent.name?"MemberExpression"==r.name?E(n,r,""):e.explicit?{path:[],name:""}:null:E(n,r.parent,"")}function X(e){let t=new Map;return n=>{let r=J(n);if(!r)return null;let o=e;for(let e of r.path)if(o=o[e],!o)return null;let a=t.get(o);return a||t.set(o,a=function(e,t){let n=[],r=new Set;for(let a=0;;a++){for(let l of(Object.getOwnPropertyNames||Object.keys)(e)){if(r.has(l))continue;let i;r.add(l);try{i=e[l]}catch(o){continue}n.push({label:l,type:"function"==typeof i?/^[A-Z]/.test(l)?"class":t?"function":"method":t?"variable":"property",boost:-a})}let i=Object.getPrototypeOf(e);if(!i)return n;e=i}}(o,!r.path.length)),{from:n.pos-r.name.length,options:a,validFor:j}}}const D=n.define({name:"javascript",parser:e.configure({props:[r.add({IfStatement:o({except:/^\s*({|else\b)/}),TryStatement:o({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:a,SwitchBody:e=>{let t=e.textAfter,n=/^\s*\}/.test(t),r=/^\s*(case|default)\b/.test(t);return e.baseIndent+(n?0:r?1:2)*e.unit},Block:i({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":o({except:/^{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),l.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":s,BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),I={test:e=>/^JSX/.test(e.name),facet:f({commentTokens:{block:{open:"{/*",close:"*/}"}}})},A=D.configure({dialect:"ts"},"typescript"),O=D.configure({dialect:"jsx",props:[c.add((e=>e.isTop?[I]:void 0))]}),B=D.configure({dialect:"jsx ts",props:[c.add((e=>e.isTop?[I]:void 0))]},"typescript"),F="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map((e=>({label:e,type:"keyword"})));function N(e={}){let t=e.jsx?e.typescript?B:O:e.typescript?A:D;return new m(t,[D.data.of({autocomplete:y(T,g(w.concat(F)))}),D.data.of({autocomplete:C}),e.jsx?z:[]])}function P(e,t,n=e.length){for(let r=null==t?void 0:t.firstChild;r;r=r.nextSibling)if("JSXIdentifier"==r.name||"JSXBuiltin"==r.name||"JSXNamespacedName"==r.name||"JSXMemberExpression"==r.name)return e.sliceString(r.from,Math.min(r.to,n));return""}const V="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),z=d.inputHandler.of(((e,n,r,o)=>{if((V?e.composing:e.compositionStarted)||e.state.readOnly||n!=r||">"!=o&&"/"!=o||!D.isActiveAt(e.state,n,-1))return!1;let{state:a}=e,i=a.changeByRange((e=>{var n;let r,{head:i}=e,l=t(a).resolveInner(i,-1);if("JSXStartTag"==l.name&&(l=l.parent),"JSXAttributeValue"==l.name&&l.to>i);else{if(">"==o&&"JSXFragmentTag"==l.name)return{range:p.cursor(i+1),changes:{from:i,insert:"></>"}};if("/"==o&&"JSXFragmentTag"==l.name){let e=l.parent,t=null==e?void 0:e.parent;if(e.from==i-1&&"JSXEndTag"!=(null===(n=t.lastChild)||void 0===n?void 0:n.name)&&(r=P(a.doc,null==t?void 0:t.firstChild,i))){let e=`/${r}>`;return{range:p.cursor(i+e.length),changes:{from:i,insert:e}}}}else if(">"==o){let e=function(e){for(;;){if("JSXOpenTag"==e.name||"JSXSelfClosingTag"==e.name||"JSXFragmentTag"==e.name)return e;if("JSXEscape"==e.name||!e.parent)return null;e=e.parent}}(l);if(e&&(!(s=e.lastChild)||"JSXEndTag"!=s.name&&"JSXSelfCloseEndTag"!=s.name)&&"</"!=a.sliceDoc(i,i+2)&&(r=P(a.doc,e,i)))return{range:p.cursor(i+1),changes:{from:i,insert:`></${r}>`}}}}var s;return{range:e}}));return!i.changes.empty&&(e.dispatch(i,{userEvent:"input.type",scrollIntoView:!0}),!0)}));function M(e,t){return t||(t={parserOptions:{ecmaVersion:2019,sourceType:"module"},env:{browser:!0,node:!0,es6:!0,es2015:!0,es2017:!0,es2020:!0},rules:{}},e.getRules().forEach(((e,n)=>{e.meta.docs.recommended&&(t.rules[n]=2)}))),n=>{let{state:r}=n,o=[];for(let{from:a,to:i}of D.findRegions(r)){let n=r.doc.lineAt(a),l={line:n.number-1,col:a-n.from,pos:a};for(let s of e.verify(r.sliceDoc(a,i),t))o.push(R(s,r.doc,l))}return o}}function L(e,t,n,r){return n.line(e+r.line).from+t+(1==e?r.col-1:-1)}function R(e,t,n){let r=L(e.line,e.column,t,n),o={from:r,to:null!=e.endLine&&1!=e.endColumn?L(e.endLine,e.endColumn,t,n):r,message:e.message,source:e.ruleId?"eslint:"+e.ruleId:"eslint",severity:1==e.severity?"warning":"error"};if(e.fix){let{range:t,text:a}=e.fix,i=t[0]+n.pos-r,l=t[1]+n.pos-r;o.actions=[{name:"fix",apply(e,t){e.dispatch({changes:{from:t+i,to:t+l,insert:a},scrollIntoView:!0})}}]}return o}export{z as autoCloseTags,J as completionPath,M as esLint,N as javascript,D as javascriptLanguage,O as jsxLanguage,C as localCompletionSource,X as scopeCompletionSource,w as snippets,B as tsxLanguage,A as typescriptLanguage};
