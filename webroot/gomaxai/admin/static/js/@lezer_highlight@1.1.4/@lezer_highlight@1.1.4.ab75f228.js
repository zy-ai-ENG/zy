
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{N as t}from"../@lezer_common@1.0.2/@lezer_common@1.0.2.f1b3fc52.js";let e=0;class a{constructor(t,a,r){this.set=t,this.base=a,this.modified=r,this.id=e++}static define(t){if(null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let e=new a([],null,[]);if(e.set.push(e),t)for(let a of t.set)e.set.push(a);return e}static defineModifier(){let t=new i;return e=>e.modified.indexOf(t)>-1?e:i.get(e.base||e,e.modified.concat(t).sort(((t,e)=>t.id-e.id)))}}let r=0;class i{constructor(){this.instances=[],this.id=r++}static get(t,e){if(!e.length)return t;let r=e[0].instances.find((a=>{return a.base==t&&(r=e,i=a.modified,r.length==i.length&&r.every(((t,e)=>t==i[e])));var r,i}));if(r)return r;let o=[],s=new a(o,t,e);for(let a of e)a.instances.push(s);let n=function(t){let e=[[]];for(let a=0;a<t.length;a++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[a]));return e.sort(((t,e)=>e.length-t.length))}(e);for(let a of t.set)if(!a.modified.length)for(let t of n)o.push(i.get(a,t));return s}}function o(t){let e=Object.create(null);for(let a in t){let r=t[a];Array.isArray(r)||(r=[r]);for(let t of a.split(" "))if(t){let a=[],i=2,o=t;for(let e=0;;){if("..."==o&&e>0&&e+3==t.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+t);if(a.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),e+=r[0].length,e==t.length)break;let s=t[e++];if(e==t.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+t);o=t.slice(e)}let s=a.length-1,l=a[s];if(!l)throw new RangeError("Invalid path: "+t);let c=new n(r,i,s>0?a.slice(0,s):null);e[l]=c.sort(e[l])}}return s.add(e)}const s=new t;class n{constructor(t,e,a,r){this.tags=t,this.mode=e,this.context=a,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function l(t,e){let a=Object.create(null);for(let o of t)if(Array.isArray(o.tag))for(let t of o.tag)a[t.id]=o.class;else a[o.tag.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:t=>{let e=i;for(let r of t)for(let t of r.set){let r=a[t.id];if(r){e=e?e+" "+r:r;break}}return e},scope:r}}function c(t,e,a,r=0,i=t.length){let o=new h(r,Array.isArray(e)?e:[e],a);o.highlightRange(t.cursor(),r,i,"",o.highlighters),o.flush(i)}n.empty=new n([],2,null);class h{constructor(t,e,a){this.at=t,this.highlighters=e,this.span=a,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(e,a,r,i,o){let{type:l,from:c,to:h}=e;if(c>=r||h<=a)return;l.isTop&&(o=this.highlighters.filter((t=>!t.scope||t.scope(l))));let g=i,f=function(t){let e=t.type.prop(s);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}(e)||n.empty,d=function(t,e){let a=null;for(let r of t){let t=r.style(e);t&&(a=a?a+" "+t:t)}return a}(o,f.tags);if(d&&(g&&(g+=" "),g+=d,1==f.mode&&(i+=(i?" ":"")+d)),this.startSpan(e.from,g),f.opaque)return;let m=e.tree&&e.tree.prop(t.mounted);if(m&&m.overlay){let t=e.node.enter(m.overlay[0].from+c,1),s=this.highlighters.filter((t=>!t.scope||t.scope(m.tree.type))),n=e.firstChild();for(let l=0,f=c;;l++){let d=l<m.overlay.length?m.overlay[l]:null,p=d?d.from+c:h,u=Math.max(a,f),k=Math.min(r,p);if(u<k&&n)for(;e.from<k&&(this.highlightRange(e,u,k,i,o),this.startSpan(Math.min(k,e.to),g),!(e.to>=p)&&e.nextSibling()););if(!d||p>r)break;f=d.to+c,f>a&&(this.highlightRange(t.cursor(),Math.max(a,d.from+c),Math.min(r,f),i,s),this.startSpan(f,g))}n&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=a)){if(e.from>=r)break;this.highlightRange(e,a,r,i,o),this.startSpan(Math.min(r,e.to),g)}}while(e.nextSibling());e.parent()}}}const g=a.define,f=g(),d=g(),m=g(d),p=g(d),u=g(),k=g(u),b=g(u),y=g(),N=g(y),w=g(),v=g(),x=g(),M=g(x),O=g(),S={comment:f,lineComment:g(f),blockComment:g(f),docComment:g(f),name:d,variableName:g(d),typeName:m,tagName:g(m),propertyName:p,attributeName:g(p),className:g(d),labelName:g(d),namespace:g(d),macroName:g(d),literal:u,string:k,docString:g(k),character:g(k),attributeValue:g(k),number:b,integer:g(b),float:g(b),bool:g(u),regexp:g(u),escape:g(u),color:g(u),url:g(u),keyword:w,self:g(w),null:g(w),atom:g(w),unit:g(w),modifier:g(w),operatorKeyword:g(w),controlKeyword:g(w),definitionKeyword:g(w),moduleKeyword:g(w),operator:v,derefOperator:g(v),arithmeticOperator:g(v),logicOperator:g(v),bitwiseOperator:g(v),compareOperator:g(v),updateOperator:g(v),definitionOperator:g(v),typeOperator:g(v),controlOperator:g(v),punctuation:x,separator:g(x),bracket:M,angleBracket:g(M),squareBracket:g(M),paren:g(M),brace:g(M),content:y,heading:N,heading1:g(N),heading2:g(N),heading3:g(N),heading4:g(N),heading5:g(N),heading6:g(N),contentSeparator:g(y),list:g(y),quote:g(y),emphasis:g(y),strong:g(y),link:g(y),monospace:g(y),strikethrough:g(y),inserted:g(),deleted:g(),changed:g(),invalid:g(),meta:O,documentMeta:g(O),annotation:g(O),processingInstruction:g(O),definition:a.defineModifier(),constant:a.defineModifier(),function:a.defineModifier(),standard:a.defineModifier(),local:a.defineModifier(),special:a.defineModifier()};l([{tag:S.link,class:"tok-link"},{tag:S.heading,class:"tok-heading"},{tag:S.emphasis,class:"tok-emphasis"},{tag:S.strong,class:"tok-strong"},{tag:S.keyword,class:"tok-keyword"},{tag:S.atom,class:"tok-atom"},{tag:S.bool,class:"tok-bool"},{tag:S.url,class:"tok-url"},{tag:S.labelName,class:"tok-labelName"},{tag:S.inserted,class:"tok-inserted"},{tag:S.deleted,class:"tok-deleted"},{tag:S.literal,class:"tok-literal"},{tag:S.string,class:"tok-string"},{tag:S.number,class:"tok-number"},{tag:[S.regexp,S.escape,S.special(S.string)],class:"tok-string2"},{tag:S.variableName,class:"tok-variableName"},{tag:S.local(S.variableName),class:"tok-variableName tok-local"},{tag:S.definition(S.variableName),class:"tok-variableName tok-definition"},{tag:S.special(S.variableName),class:"tok-variableName2"},{tag:S.definition(S.propertyName),class:"tok-propertyName tok-definition"},{tag:S.typeName,class:"tok-typeName"},{tag:S.namespace,class:"tok-namespace"},{tag:S.className,class:"tok-className"},{tag:S.macroName,class:"tok-macroName"},{tag:S.propertyName,class:"tok-propertyName"},{tag:S.operator,class:"tok-operator"},{tag:S.comment,class:"tok-comment"},{tag:S.meta,class:"tok-meta"},{tag:S.invalid,class:"tok-invalid"},{tag:S.punctuation,class:"tok-punctuation"}]);export{a as T,l as a,c as h,o as s,S as t};
