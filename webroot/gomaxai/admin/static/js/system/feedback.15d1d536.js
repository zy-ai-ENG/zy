
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e}from"../index/index.129bbe0b.js";import{a}from"./system.afdfe2e3.js";import{u as t}from"../utcformatTime/utcformatTime.f6db2c52.js";import{d as s,r as l,ay as i,Q as o,x as r,h as n,R as p,o as d,c as u,e as c,f as m,l as f,w as g,I as w,a as b,t as x,b as h,S as _,U as v,E as y,n as z,q as k}from"../main-dd192319.js";import{F as C}from"../index/index.5ad1a92e.js";const j=s({__name:"feedback",setup(s){const z=l(0),k=i(C),j=l(!1),A=l([]),F=l(0),S=o({page:1,size:20});l();const T=async()=>{try{j.value=!0;const e=await a.queryFeedback(S),{rows:t,count:s}=e.data;j.value=!1,F.value=s,A.value=t}catch(e){j.value=!1}};return r((()=>{T()})),(s,l)=>{const i=n("el-alert"),o=n("el-button"),r=e,C=n("el-table-column"),I=n("el-image"),P=n("el-tag"),U=n("el-popconfirm"),q=n("el-table"),E=n("el-pagination"),G=n("el-row"),J=p("loading");return d(),u("div",null,[c(r,{bottomPadding:"20px",class:"header"},{default:m((()=>[c(i,{"show-icon":"",title:"用户反馈说明",closable:!1,description:"此处收集前端用户提交上来的反馈信息！",type:"success"}),c(o,{style:{"margin-left":"10px"},onClick:T},{default:m((()=>[f("刷新")])),_:1})])),_:1}),c(r,{bottomPadding:"20px",bottomMargin:"0px"},{default:m((()=>[g((d(),w(q,{border:"",data:A.value,height:"64vh",width:"100%",size:"large"},{default:m((()=>[c(C,{prop:"feedType",label:"反馈类型"},{default:m((e=>[b("p",null,x(h(k)[e.row.feedType]),1)])),_:1}),c(C,{prop:"description",label:"详细描述"}),c(C,{prop:"images",label:"截图",width:"450px"},{default:m((e=>[(d(!0),u(_,null,v(e.row.images,((a,t)=>(d(),w(I,{style:{width:"140px",height:"auto","max-height":"240px",margin:"0 10px",border:"1px solid #ececec"},src:a,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-teleported":"","z-index":1e3,onClick:e=>((e,a)=>{z.value=a})(0,t),"initial-index":z.value,"preview-src-list":e.row.images,fit:"cover"},null,8,["src","onClick","initial-index","preview-src-list"])))),256))])),_:1}),c(C,{prop:"telephone",label:"联系电话"}),c(C,{prop:"wechat",label:"微信号"}),c(C,{prop:"status",label:"状态"},{default:m((e=>[c(P,{type:1===e.row.status?"info":"warning"},{default:m((()=>[f(x(1===e.row.status?"已读":"未读"),1)])),_:2},1032,["type"])])),_:1}),c(C,{prop:"createdAt",label:"创建时间"},{default:m((e=>[b("p",null,x(h(t)(e.row.createdAt)),1)])),_:1}),c(C,{prop:"updatedAt",label:"更新时间"},{default:m((e=>[b("p",null,x(h(t)(e.row.updatedAt)),1)])),_:1}),c(C,{fixed:"right",label:"操作",width:"280",align:"center"},{default:m((e=>[c(o,{link:"",type:"success",size:"small",disabled:1===e.row.status,onClick:t=>(async e=>{const{id:t}=e;await a.setFeedbackStatus({id:t,status:1===e.status?0:1}),y.success("删除反馈成功！"),await T()})(e.row)},{default:m((()=>[f(x(0===e.row.status?"标记已读":"已读"),1)])),_:2},1032,["disabled","onClick"]),c(U,{width:"300px",title:"删除后不可找回，确定删除?","confirm-button-text":"确认",onConfirm:t=>(async e=>{await a.removeFeedback({id:e.id}),y.success("删除反馈成功！"),await T()})(e.row)},{reference:m((()=>[c(o,{link:"",type:"danger",size:"small"},{default:m((()=>[f(" 删除 ")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[J,j.value]]),c(G,{class:"flex justify-end mt-5 pb-5"},{default:m((()=>[c(E,{"current-page":S.page,"onUpdate:currentPage":l[0]||(l[0]=e=>S.page=e),"page-size":S.size,"onUpdate:pageSize":l[1]||(l[1]=e=>S.size=e),class:"mr-5","page-sizes":[15,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:F.value,onSizeChange:T,onCurrentChange:T},null,8,["current-page","page-size","total"])])),_:1})])),_:1})])}}});"function"==typeof k&&k(j);const A=z(j,[["__scopeId","data-v-1922c9eb"]]);export{A as default};
