
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
var e=Object.defineProperty,l=(l,a,t)=>(((l,a,t)=>{a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t})(l,"symbol"!=typeof a?a+"":a,t),t);import{_ as a}from"../index/index.c9f6880f.js";import{u as t}from"../utcformatTime/utcformatTime.f6db2c52.js";import{Y as i,d,r as u,G as s,y as o,j as r,U as c,o as n,c as p,f as m,g as f,h as y,b as g,e as b,w as h,J as _,t as w,P as V,s as v}from"../main-646ffc07.js";class k{constructor(){l(this,"id"),l(this,"dictType"),l(this,"dictName"),l(this,"dictValue"),l(this,"deleteFlag"),l(this,"createdAt"),l(this,"updatedAt")}}const x=e=>i.get("/dict/page",{params:e}),T=e=>i.post("/dict/save",e),N=e=>i.post("/dict/delete",e),z={style:{float:"right"}},C={key:0},U={key:1},j={key:2},P=d({__name:"recommendDict",setup(e){const l=u(),i=u(0),d=u(!1),v=u(!1),P=s({}),Y=s({dictType:"",dictName:"",page:1,size:15}),A=u([]);async function D(){try{v.value=!0;const e=await x(Y),{rows:l,count:a}=e.data;i.value=a,v.value=!1,A.value=l}catch(e){v.value=!1}}const q=s({dictType:[{required:!0,message:"类型不能为空",trigger:"blur"}],dictName:[{required:!0,message:"名称不能为空",trigger:"blur"}],dictValue:[{required:!0,message:"内容不能为空",trigger:"blur"}]});function M(e){d.value=!0,P.id=e.id,P.dictType=e.dictType,P.dictName=e.dictName,P.dictValue=e.dictValue}async function F(){(await T(P)).data&&V({type:"success",message:"操作成功！"}),d.value=!1,D()}return o((()=>D())),(e,u)=>{const s=r("el-option"),o=r("el-select"),x=r("el-form-item"),T=r("el-input"),G=r("el-button"),J=r("Plus"),S=r("el-icon"),I=r("el-form"),O=a,R=r("el-table-column"),B=r("el-popconfirm"),E=r("el-table"),H=r("el-pagination"),K=r("el-row"),L=a,Q=r("el-dialog"),W=c("loading");return n(),p("div",null,[m(O,null,{default:f((()=>[m(I,{ref_key:"formRef",ref:l,inline:!0,model:Y},{default:f((()=>[m(x,{label:"类型",prop:"dictType"},{default:f((()=>[m(o,{modelValue:Y.dictType,"onUpdate:modelValue":u[0]||(u[0]=e=>Y.dictType=e),placeholder:"请选择类型",clearable:"",style:{width:"192px"}},{default:f((()=>[m(s,{key:"music-style",label:"音乐风格",value:"music-style"}),m(s,{key:"music-lyrics",label:"音乐歌词",value:"music-lyrics"})])),_:1},8,["modelValue"])])),_:1}),m(x,{label:"名称关键字",prop:"dictName"},{default:f((()=>[m(T,{modelValue:Y.dictName,"onUpdate:modelValue":u[1]||(u[1]=e=>Y.dictName=e),placeholder:"请输入字典关键字",clearable:"",style:{width:"192px"}},null,8,["modelValue"])])),_:1}),m(x,null,{default:f((()=>[m(G,{type:"primary",onClick:D},{default:f((()=>[y(" 查询 ")])),_:1}),m(G,{onClick:u[2]||(u[2]=e=>{return null==(a=l.value)||a.resetFields(),void D();var a})},{default:f((()=>[y(" 重置 ")])),_:1})])),_:1}),g("span",z,[m(G,{type:"success",onClick:u[3]||(u[3]=e=>M(new(b(k))))},{default:f((()=>[y(" 添加内容 "),m(S,{class:"ml-3"},{default:f((()=>[m(J)])),_:1})])),_:1})])])),_:1},8,["model"])])),_:1}),m(L,{bottomPadding:"20px",bottomMargin:"0px"},{default:f((()=>[h((n(),_(E,{border:"",height:"66vh",data:A.value,style:{width:"100%"},size:"large"},{default:f((()=>[m(R,{fixed:"",prop:"id",label:"ID",width:"80"}),m(R,{prop:"dictType",label:"类型",width:"150"},{default:f((e=>["music-style"===e.row.dictType?(n(),p("span",C,"音乐风格")):"music-lyrics"===e.row.dictType?(n(),p("span",U,"音乐歌词")):(n(),p("span",j,"--"))])),_:1}),m(R,{prop:"dictName",label:"名称",width:"150"}),m(R,{prop:"dictValue",label:"内容",align:"center"}),m(R,{prop:"createdAt",label:"创建时间",width:"200",align:"center"},{default:f((e=>[y(w(b(t)(e.row.createdAt,"YYYY-MM-DD hh:mm:ss")),1)])),_:1}),m(R,{fixed:"right",label:"操作",width:"250",align:"center"},{default:f((e=>[m(G,{link:"",type:"primary",size:"small",onClick:l=>M(e.row)},{default:f((()=>[y(" 编辑 ")])),_:2},1032,["onClick"]),m(B,{title:"确认删除?","confirm-button-text":"确认删除",onConfirm:l=>async function(e){(await N({ids:[e.id]})).data&&V({type:"success",message:"操作成功！"}),D()}(e.row)},{reference:f((()=>[m(G,{link:"",type:"danger"},{default:f((()=>[y(" 删除 ")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[W,v.value]]),m(K,{class:"flex justify-end mt-5"},{default:f((()=>[m(H,{class:"mr-5",total:i.value,onSizeChange:D,"page-sizes":[15,30,50,100],onCurrentChange:D,"page-size":Y.size,"onUpdate:pageSize":u[4]||(u[4]=e=>Y.size=e),"current-page":Y.page,"onUpdate:currentPage":u[5]||(u[5]=e=>Y.page=e),layout:"total, sizes, prev, pager, next, jumper"},null,8,["total","page-size","current-page"])])),_:1})])),_:1}),m(Q,{modelValue:d.value,"onUpdate:modelValue":u[9]||(u[9]=e=>d.value=e),title:P.id?"编辑":"新增",width:"500px"},{default:f((()=>[m(I,{model:P},{default:f((()=>[m(x,{label:"类型","label-width":"90px",rules:q.dictType},{default:f((()=>[m(o,{modelValue:P.dictType,"onUpdate:modelValue":u[6]||(u[6]=e=>P.dictType=e),placeholder:"请选择类型"},{default:f((()=>[m(s,{key:"music-style",label:"音乐风格",value:"music-style"}),m(s,{key:"music-lyrics",label:"音乐歌词",value:"music-lyrics"})])),_:1},8,["modelValue"])])),_:1},8,["rules"]),m(x,{label:"名称","label-width":"90px",rules:q.dictName},{default:f((()=>[m(T,{modelValue:P.dictName,"onUpdate:modelValue":u[7]||(u[7]=e=>P.dictName=e),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1},8,["rules"]),m(x,{label:"内容","label-width":"90px",rules:q.dictValue},{default:f((()=>[m(T,{modelValue:P.dictValue,"onUpdate:modelValue":u[8]||(u[8]=e=>P.dictValue=e),placeholder:"请输入内容"},null,8,["modelValue"])])),_:1},8,["rules"]),m(x,null,{default:f((()=>[m(G,{style:{width:"100%"},type:"primary",onClick:F},{default:f((()=>[y(" 确定 ")])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])}}});"function"==typeof v&&v(P);export{P as default};
