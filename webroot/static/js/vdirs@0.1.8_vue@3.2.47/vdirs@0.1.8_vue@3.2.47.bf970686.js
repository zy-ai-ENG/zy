import{o as e,a as n}from"../evtd@0.2.4/evtd@0.2.4.2789e4a1.js";const t="@@mmoContext",d={mounted(n,{value:d}){n[t]={handler:void 0},"function"==typeof d&&(n[t].handler=d,e("mousemoveoutside",n,d))},updated(d,{value:s}){const o=d[t];"function"==typeof s?o.handler?o.handler!==s&&(n("mousemoveoutside",d,o.handler),o.handler=s,e("mousemoveoutside",d,s)):(d[t].handler=s,e("mousemoveoutside",d,s)):o.handler&&(n("mousemoveoutside",d,o.handler),o.handler=void 0)},unmounted(e){const{handler:d}=e[t];d&&n("mousemoveoutside",e,d),e[t].handler=void 0}},s="@@coContext",o={mounted(n,{value:t,modifiers:d}){n[s]={handler:void 0},"function"==typeof t&&(n[s].handler=t,e("clickoutside",n,t,{capture:d.capture}))},updated(t,{value:d,modifiers:o}){const i=t[s];"function"==typeof d?i.handler?i.handler!==d&&(n("clickoutside",t,i.handler,{capture:o.capture}),i.handler=d,e("clickoutside",t,d,{capture:o.capture})):(t[s].handler=d,e("clickoutside",t,d,{capture:o.capture})):i.handler&&(n("clickoutside",t,i.handler,{capture:o.capture}),i.handler=void 0)},unmounted(e,{modifiers:t}){const{handler:d}=e[s];d&&n("clickoutside",e,d,{capture:t.capture}),e[s].handler=void 0}};const i=new class{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(e,n){const{elementZIndex:t}=this;if(void 0!==n)return e.style.zIndex=`${n}`,void t.delete(e);const{nextZIndex:d}=this;if(t.has(e)){if(t.get(e)+1===this.nextZIndex)return}e.style.zIndex=`${d}`,t.set(e,d),this.nextZIndex=d+1,this.squashState()}unregister(e,n){const{elementZIndex:t}=this;var d,s;t.has(e)?t.delete(e):void 0===n&&(d="z-index-manager/unregister-element",s="Element not found when unregistering.",console.error(`[vdirs/${d}]: ${s}`)),this.squashState()}squashState(){const{elementCount:e}=this;e||(this.nextZIndex=2e3),this.nextZIndex-e>2500&&this.rearrange()}rearrange(){const e=Array.from(this.elementZIndex.entries());e.sort(((e,n)=>e[1]-n[1])),this.nextZIndex=2e3,e.forEach((e=>{const n=e[0],t=this.nextZIndex++;`${t}`!==n.style.zIndex&&(n.style.zIndex=`${t}`)}))}},r="@@ziContext",a={mounted(e,n){const{value:t={}}=n,{zIndex:d,enabled:s}=t;e[r]={enabled:!!s,initialized:!1},s&&(i.ensureZIndex(e,d),e[r].initialized=!0)},updated(e,n){const{value:t={}}=n,{zIndex:d,enabled:s}=t,o=e[r].enabled;s&&!o&&(i.ensureZIndex(e,d),e[r].initialized=!0),e[r].enabled=!!s},unmounted(e,n){if(!e[r].initialized)return;const{value:t={}}=n,{zIndex:d}=t;i.unregister(e,d)}};export{o as c,d as m,a as z};
