import{_ as a,d as e,a as t,b as s,p as l,c as i,N as o,e as d,f as r}from"../popup/popup.37ac3f7f.js";import{d as n,aI as u,y as v,b as p,g as c,c as f,u as m,aG as g,G as x,aF as b,an as k,a5 as y,i as w,l as C,h as L,n as h,k as I,j,F as A,r as F,m as D,M as E,aJ as T,aK as J,o as S,aB as N,aL as B,C as M,D as _,ag as z,E as G}from"../main-e1cb34e4.js";import{S as O}from"../index/index.e39b3da2.js";import{U as P}from"../userDetails/userDetails.2db81feb.js";import"../index/index.a4f65e28.js";import"../draw-fail/draw-fail.50b43169.js";import"../index/index.603ff8c1.js";import"../punycode@2.3.0/punycode@2.3.0.8a62a219.js";const R=a=>(M("data-v-6dad361b"),a=a(),_(),a),V={key:1},q={key:2},H={key:3,class:"text-image-container flex flex-row",style:{width:"100%"}},K={style:{width:"100%"}},U={class:"h-full flex justify-start items-between",style:{height:"100vh",width:"100%"}},W={class:"contentBox dark:bg-[#272740] bg-[#F4F4F5]"},Q={style:{"overflow-y":"auto","padding-bottom":"70px"}},X=T('<div class="MJBox dark:bg-[#1A1A2F] bg-[#E8E8E8]" data-v-6dad361b><img class="logoImg" src="'+d+'" alt="" data-v-6dad361b><div class="titleBox" data-v-6dad361b><p class="title1 dark:text-[#CAC5C5] text-[#808080]" data-v-6dad361b>Mid Journey</p><p class="title2" data-v-6dad361b>AI</p></div><div class="intro dark:text-[#CAC5C5] text-[#808080]" data-v-6dad361b> 一款强大的人工智能绘画工具，为用户提供了各种创意的绘画功能，一次性生成4张高质量的艺术创作。 </div></div>',1),Y={class:"modeBox"},Z=R((()=>j("div",{class:"modeTitle"},[j("p",{class:"title text-[#808080] dark:text-[#fff]"},"模型广场")],-1))),$={class:"modeContent"},aa=["onClick"],ea=R((()=>j("p",{style:{"font-size":"19px"}},"#",-1))),ta={class:"contentNmae"},sa={class:"contentIntro"},la={class:"userInfo dark:bg-[#1A1A2F] bg-[#E8E8E8]"},ia={key:0},oa=["src"],da={class:"userName"},ra={class:"name text-[#808080] dark:text-[#fff]"},na={key:0,class:"isVip dark:text-[#CCCCCC] text-[#A0A0A0]"},ua={key:1,class:"isVip dark:text-[#CCCCCC] text-[#A0A0A0]"},va={class:"contentCenter"},pa=R((()=>j("div",{class:"contentCenterTop dark:bg-[#1F1F38] border-b-[2px] bg-[#fff] dark:border-[#2C2C4F] border-[#D1D1D1]"},[j("span",null,"#  创作中心"),j("span",{style:{color:"#EDB830"}},"    请遵守中华人民共和国网络安全法，严禁生成涉及政治人物、色情、恐怖等不良内容，如有违规封号处理")],-1))),ca={key:0,class:"w-full",style:{padding:"0 40px"}},fa={style:{"margin-top":"10px"}},ma={style:{position:"relative",padding:"0 40px"},class:"bg-[#fff] dark:bg-[#1F1F38]"},ga={style:{position:"relative"}},xa=R((()=>j("div",{class:"upLoadTop dark:bg-[#32324D] bg-[#fff] border-b-[2px] border-[#E8E8E8] dark:border-[transparent]"},[j("img",{class:"topImg",src:r,alt:""}),j("p",{class:"topText1"},"请添加图片"),j("p",{class:"topText2"},"[严禁上传涉及党政主题，证件照，黄图等不良内容，违者100%封号]")],-1))),ba={class:"upLoadContent dark:bg-[#1A1A2F] bg-[#fff]"},ka={class:""},ya=G(n({__name:"image2text",setup(d){const r=u(),n=v(0);setTimeout((()=>{n.value=1}),0),p();const T=p(),{isMobile:M}=c(),_=p(),G=f((()=>_.isLogin)),R=f((()=>_.userInfo.avatar)),ya=f((()=>_.userInfo.username)),wa=f((()=>_.userBalance)),Ca=f((()=>_.mjDrawForm)),La=m(),ha=v(),Ia=v([]),ja=v();g({page:1,size:20}).then((a=>{localStorage.setItem("drawLogList",JSON.stringify(a.data.rows))})),localStorage.getItem("drawLogList")?Ia.value=JSON.parse(localStorage.getItem("drawLogList")):g({page:1,size:20}).then((a=>{Ia.value=a.data.rows,localStorage.setItem("drawLogList",JSON.stringify(a.data.rows))}));const Aa=x({files:[],previewImages:[]}),Fa=["jpg","jpeg","png"],Da=a=>{"pending"===a.file.status&&Aa.files.push(a.file.file),"removed"===a.file.status&&(Aa.files=Aa.files.filter((e=>e!==a.file.file))),k.emit("imageForm",Aa)},Ea=a=>{const e=a.file.type.split("/")[1];return a.fileList.length>=1?(La.warning("最多只能上传1张图片"),!1):Fa.includes(e)&&a.fileList.length<=1},Ta=a=>{const e=a.file.name;Ca.value.extendParam=Ca.value.extendParam.filter((a=>!a.filename.includes(e))),Ja()},Ja=async()=>{_.updateMjDrawForm(Ca.value)},Sa=a=>{ja.value=a},Na=async a=>{a&&(Oa.value=await z({jobId:a}).then((a=>a.data)),Pa.value&&Oa.value.status>=4&&clearTimeout(Pa.value))},Ba=v(null),Ma=()=>{Ba.value.scrollTo({top:0,behavior:"smooth"})},_a=v(),za=a=>{_a.value=a,Ma(),Na(a),Ra()},Ga=a=>{ha.value=a,Ma(),Na(a),Ra()},Oa=v({status:0}),Pa=v(),Ra=()=>{Pa.value&&clearTimeout(Pa.value),Pa.value=setTimeout((()=>{var a;if((null==(a=Oa.value)?void 0:a.status)>=J.DRAWED)return Pa.value&&clearTimeout(Pa.value),ja.value=0,Ia.value.unshift(Oa.value),k.emit("status",ja.value),k.emit("newDrawLogList",Ia.value),_a.value="",ha.value="",void g({page:1,size:20}).then((a=>{localStorage.setItem("drawLogList",JSON.stringify(a.data.rows))}));ha.value?(Ra(),Na(ha.value)):_a.value&&(Ra(),Na(_a.value))}),3e3)};b((()=>{Pa.value&&clearTimeout(Pa.value),Pa.value=null,T.updateDrawId({id:""})}));const Va=[{name:"MJ6.0（最新）",intro:"全新6.0 ALPHA真实风格图像",id:0,value:"--v 6.0"},{name:"MJ5.2（真实细节）",intro:"增加真实风格图像细节",id:1,value:"--v 5.2"},{name:"MJ5.1（艺术）",intro:"专注真实艺术风格图像",id:2,value:"--v 5.1"},{name:"NJ5.0（动漫增强）",intro:"官方最新动漫模型同步",id:5,value:"--niji 5"},{name:"NJ4.0（动漫）",intro:"官方最新动漫模型同步",id:6,value:"--niji 4"}],qa=v(0);k.on("upLoadIsShow",(a=>{n.value=a})),k.on("upLoadShow",(a=>{n.value=a}));const Ha=v(!1);k.on("error",(a=>{Ha.value=a}));const Ka=()=>{Ha.value=!1},Ua=()=>{Ha.value=!1,_.checkAuth()&&r.updateVipDialog(!0)},Wa=v(!1);return k.emit("drawRoute",y.options.history.location),(d,r)=>{var u,v;return S(),w(A,null,[Wa.value?(S(),w("div",{key:0,class:"mask",onClick:r[0]||(r[0]=a=>Wa.value=!1)})):C("",!0),L(M)?(S(),w("div",V,[h(s)])):C("",!0),Ha.value?(S(),w("div",q,[h(l,{onClosePop:Ka,onBuyVip:Ua})])):C("",!0),L(M)?C("",!0):(S(),w("div",H,[L(M)?C("",!0):(S(),I(O,{key:0})),j("div",K,[j("div",U,[j("div",W,[j("div",Q,[X,j("div",Y,[Z,j("div",$,[(S(),w(A,null,F(Va,((a,e)=>j("div",{class:E(e==qa.value?"active text-[#fff] dark:text-[#fff]":"contentItem  text-[#808080] dark:text-[#fff]"),key:a.id,onClick:t=>{return s={item:a,index:e},qa.value=s.index,void k.emit("--v",s.item.value);var s}},[ea,j("div",null,[j("p",ta,D(a.name),1),j("p",sa,D(a.intro),1)])],10,aa))),64))])])]),j("div",la,[Wa.value?(S(),w("div",ia,[h(P)])):C("",!0),j("img",{class:"avatar",src:R.value?R.value:"./img/avatar.png",alt:"",onClick:r[1]||(r[1]=a=>Wa.value=!0)},null,8,oa),j("div",da,[j("p",ra,D(ya.value),1),(null==(u=wa.value)?void 0:u.expirationTime)?(S(),w("p",na," 到期时间："+D(L(N)(null==(v=wa.value)?void 0:v.expirationTime)),1)):(S(),w("p",ua,"未开通，点击了解特权"))])])]),j("div",va,[pa,0!=Ia.value.length&&G.value?(S(),w("div",{key:1,class:"drawList",ref_key:"toTop",ref:Ba},[ha.value?(S(),I(a,{key:0,task:Oa.value,onRefresh:Ga},null,8,["task"])):C("",!0),_a.value?(S(),I(e,{key:1,task:Oa.value,onNewJob:za},null,8,["task"])):C("",!0),j("div",fa,[h(t,{drawLogList:Ia.value,onNewJobId:za},null,8,["drawLogList"])])],512)):(S(),w("div",ca,[h(i)])),j("div",ma,[j("div",ga,[j("div",{class:E(1==n.value?"upLoadImg border-[1px] border-[#E8E8E8] dark:border-[transparent]":"upLoadImg1 shadow-md")},[xa,j("div",ba,[j("div",ka,[h(L(B),{accept:".jpg,.jpeg,.png",action:"","default-file-list":Aa.files,"default-upload":!1,"on-change":Da,"on-before-upload":Ea,"on-remove":Ta,"list-type":"image-card","directory-dnd":""},null,8,["default-file-list"])])])],2),h(o,{onGetjobId:Ga,onResquestStatus:Sa})])])])])])]))],64)}}}),[["__scopeId","data-v-6dad361b"]]);export{ya as default};
