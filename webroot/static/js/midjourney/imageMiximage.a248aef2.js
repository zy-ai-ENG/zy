import{_ as e,a}from"../1.1Light/1.1Light.a9718ff8.js";import{_ as t}from"../Line 1/Line 1.30390b32.js";import{d as l,_ as i,a as s,b as r,p as o,N as d,c as n,e as u}from"../popup/popup.637baf78.js";import{_ as v,a as c}from"../police/police.b4a86fcd.js";import{d as p,e as g,c as m,aK as f,b as x,g as y,u as b,y as k,a3 as h,aG as F,aF as w,a6 as A,i as I,l as L,h as S,n as C,k as j,j as B,F as E,r as D,K as _,Y as z,m as T,af as N,aL as P,o as R,aM as M,aN as J,C as U,D as V,E as O}from"../main-f1d8f62a.js";import{S as q}from"../index/index.8e9f04fd.js";import{a as G}from"../music/music.7ed9f0b7.js";import"../draw-fail/draw-fail.50b43169.js";import"../index/index.d6b69e6f.js";import"../createInspiration.vue_vue_type_script_setup_true_lang/createInspiration.vue_vue_type_script_setup_true_lang.7c59156f.js";const H=e=>(U("data-v-27569ae5"),e=e(),V(),e),K={key:1},Q={key:2},W={key:3,class:"text-image-container flex flex-row dark:bg-[#010102] bg-[#F4F4F4]",style:{width:"100%"}},Y={style:{width:"100%"}},X={class:"h-full flex justify-start items-between",style:{height:"100vh",width:"100%"}},Z={class:"contentBox dark:bg-[#15171A] bg-[#FFFFFF]"},$={style:{position:"absolute","z-index":"99",width:"278px","padding-bottom":"10px",top:"0"},class:"bg-[#fff] dark:bg-[#15171A]"},ee={style:{display:"flex","margin-top":"12px"}},ae=["onClick"],te=H((()=>B("div",{class:"MJBox dark:bg-[#202B3A] bg-[#fff]"},[B("div",{class:"intro dark:text-[#CAC5C5] text-[#808080]"}," 一款强大的人工智能绘画工具，为用户提供了各种创意的绘画功能，一次性生成4张高质量的艺术创作。 ")],-1))),le={class:"padMapBox"},ie=H((()=>B("div",{style:{display:"flex","justify-content":"space-between"}},[B("div",{style:{display:"flex"}},[B("div",{style:{"font-size":"15px","font-weight":"500"}},"上传图片（2-5张）")])],-1))),se={class:"modePutExpand"},re={class:"upLoadContent"},oe={class:"ImgSize",style:{"margin-top":"10px"}},de=H((()=>B("div",{style:{display:"flex","justify-content":"space-between"}},[B("div",{style:{display:"flex"}},[B("div",{style:{"font-size":"15px","font-weight":"500"}},"图片尺寸")])],-1))),ne={class:"modePutExpand"},ue={class:"sizeBox"},ve={class:"imgBox"},ce={key:0,src:e,alt:""},pe={key:1,src:a,alt:""},ge=H((()=>B("div",{class:"title1 text-[#919393] dark:text-[#707277]"},"1:1",-1))),me=H((()=>B("div",{class:"title2 text-[#919393] dark:text-[#707277]"},"头像框",-1))),fe={class:"imgBox"},xe={key:0,src:e,alt:""},ye={key:1,src:a,alt:""},be=H((()=>B("div",{class:"title1 text-[#919393] dark:text-[#707277]"},"3:2",-1))),ke=H((()=>B("div",{class:"title2 text-[#919393] dark:text-[#707277]"},"横板名片",-1))),he={class:"imgBox"},Fe={key:0,src:e,alt:""},we={key:1,src:a,alt:""},Ae=H((()=>B("div",{class:"title1 text-[#919393] dark:text-[#707277]"},"2:3",-1))),Ie=H((()=>B("div",{class:"title2 text-[#919393] dark:text-[#707277]"},"小红书图",-1))),Le=H((()=>B("div",{class:"promptBox dark:bg-[#202B3A] bg-[#F5F8FE] text-[#3378ED] dark:text-[#2960BE]"}," 温馨提示：同官方的/blend命令图混图，最多可以上传5张图片进行混图，图片越靠前，权重越高。 ",-1))),Se={class:"radioBox dark:bg-[#15171A] bg-[#FFFFFF]"},Ce={style:{display:"flex"}},je=[H((()=>B("img",{src:t,alt:""},null,-1)))],Be=H((()=>B("p",{style:{"margin-left":"4px","font-size":"10px"}},"快图模式",-1))),Ee=[H((()=>B("img",{src:t,alt:""},null,-1)))],De=H((()=>B("p",{style:{"margin-left":"4px","font-size":"10px"}},"常规模式",-1))),_e=H((()=>B("div",{style:{display:"flex","align-items":"center"}},[B("img",{style:{width:"12px",height:"12px","margin-right":"4px"},src:u,alt:""}),B("p",{style:{"font-size":"10px"},class:"text-[#A3A5A6] dark:text-[#76777A]"},"免责声明")],-1))),ze={class:"contentCenter bg-[#fff] dark:bg-[#15171A]"},Te=H((()=>B("div",{class:"contentCenterTop border-b-[2px] dark:border-[#000000] border-[#D1D1D1]"},[B("span",null,"#  创作中心"),B("span",{style:{color:"#EDB830"}},"    请遵守中华人民共和国网络安全法，严禁生成涉及政治人物、色情、恐怖等不良内容，如有违规封号处理")],-1))),Ne={key:0,class:"w-full",style:{padding:"0 40px","margin-top":"10px"}},Pe={style:{"margin-top":"10px"}},Re=H((()=>B("div",{style:{position:"relative",padding:"0 40px","margin-right":"12px"},class:"bg-[#fff] dark:bg-[#1F1F38]"},[B("div",{style:{position:"relative"}})],-1))),Me={style:{color:"#eeeeee"},class:"end"},Je={style:{display:"flex"}},Ue={key:0,style:{display:"flex"}},Ve=H((()=>B("img",{style:{"margin-right":"5px",width:"16px",height:"16px"},src:v,alt:""},null,-1))),Oe=["href"],qe={key:1,style:{display:"flex"}},Ge=H((()=>B("img",{style:{"margin-right":"5px",width:"16px",height:"16px"},src:c,alt:""},null,-1))),He=["href"],Ke=O(p({__name:"imageMiximage",setup(e){const a=g(),t=m((()=>"dark"===a.theme)),u=f(),v=x(),{isMobile:c}=y(),p=b(),U=x(),V=m((()=>U.isLogin));m((()=>U.userInfo.avatar)),m((()=>U.userInfo.username)),m((()=>U.userBalance));const O=m((()=>U.mjDrawForm)),H=k(),Ke=k([]),Qe=k("");Qe.value=h.currentRoute.value.fullPath;const We=k();localStorage.getItem("drawLogList")?(Ke.value=JSON.parse(localStorage.getItem("drawLogList")),setTimeout((()=>{Xe()}),800)):F({page:1,size:20}).then((e=>{let a=e.data.rows;Ke.value=a.reverse(),setTimeout((()=>{Xe()}),800),localStorage.setItem("drawLogList",JSON.stringify(Ke.value))}));const Ye=k(null),Xe=()=>{let e=Ye.value;e.scrollTo({top:e.scrollHeight+e.clientHeight,behavior:"smooth"})},Ze=k(),$e=e=>{Ze.value=e,Xe(),ea(e),ia()},ea=async e=>{e&&(ta.value=await N({jobId:e}).then((e=>e.data)),la.value&&ta.value.status>=4&&clearTimeout(la.value))},aa=e=>{We.value=e,Xe(),ea(e),ia()},ta=k({status:0}),la=k(),ia=()=>{la.value&&clearTimeout(la.value),la.value=setTimeout((()=>{var e;if((null==(e=ta.value)?void 0:e.status)>=P.DRAWED){la.value&&clearTimeout(la.value),H.value=0,Ke.value.push(ta.value),A.emit("status",H.value);return 0==Ke.value.filter((e=>e.id==ta.value.id)).length?Ke.value.push(ta.value):console.log("重复了"),A.emit("newDrawLogList",Ke.value),Ze.value="",We.value="",void F({page:1,size:20}).then((e=>{localStorage.setItem("drawLogList",JSON.stringify(e.data.rows))}))}ia(),ea(We.value)}),3e3)};w((()=>{la.value&&clearTimeout(la.value),la.value=null,v.updateDrawId({id:""})})),k(0),k(!1),k(""),k(0),k([{name:"--q 质量化",sliderValue:0,id:0,max:100,type:"--q"},{name:"--s 风格化",sliderValue:0,id:1,max:1e3,type:"--s"},{name:"--c 多样化",sliderValue:0,id:2,max:100,type:"--c"}]),k(!1),k(0);const sa=k(0);setTimeout((()=>{sa.value=1}),0);const ra=k([]),oa=["jpg","jpeg","png"],da=e=>{"pending"===e.file.status&&pa(e.file.file).then((e=>{let a="data:image/png;base64,"+e;ra.value.push(a)})),"removed"===e.file.status&&pa(e.file.file).then((e=>{let a="data:image/png;base64,"+e;ra.value=ra.value.filter((e=>e!==a))})),A.emit("base64Array",ra.value)},na=e=>{const a=e.file.type.split("/")[1];return e.fileList.length>=5?(p.warning("最多只能上传5张图片"),!1):oa.includes(a)&&e.fileList.length<=5},ua=e=>{const a=e.file.name;O.value.extendParam=O.value.extendParam.filter((e=>!e.filename.includes(a))),va()},va=async()=>{U.updateMjDrawForm(O.value)},ca=e=>{H.value=e};function pa(e){return new Promise(((a,t)=>{const l=new FileReader;l.readAsDataURL(e),l.onload=function(){const e=l.result.split(",")[1];a(e)},l.onerror=function(){t(new Error("Failed to load file"))}}))}A.on("upLoadIsShow",(e=>{sa.value=e})),A.on("upLoadShow",(e=>{sa.value=e}));const ga=k(!1);A.on("error",(e=>{ga.value=e}));const ma=()=>{ga.value=!1},fa=()=>{ga.value=!1,U.checkAuth()&&u.updateVipDialog(!0)},xa=k(!1);A.emit("drawRoute",h.options.history.location);const ya=k(""),ba=k(""),ka=k(""),ha=k(""),Fa=k("");G({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{ya.value=e.data.copyrightTitle,ba.value=e.data.icpNumber,ka.value=e.data.policeFilingNumber,ha.value=e.data.icpUrl,Fa.value=e.data.policeFilingUrl})),k(!1),k(!1);const wa=k(0),Aa=k("SQUARE");function Ia(e){wa.value=e,0==e?Aa.value="SQUARE":1==e?Aa.value="PORTRAIT":2==e&&(Aa.value="LANDSCAPE"),A.emit("imageMixImageSize",Aa.value)}k("快图模式");const La=k(0),Sa=k(1);function Ca(e){0==e?Sa.value=1:1==e&&(Sa.value=2),A.emit("drawMode",Sa.value),La.value=e}return(e,a)=>(R(),I(E,null,[xa.value?(R(),I("div",{key:0,class:"mask",onClick:a[0]||(a[0]=e=>xa.value=!1)})):L("",!0),S(c)?(R(),I("div",K,[C(r)])):L("",!0),ga.value?(R(),I("div",Q,[C(o,{onClosePop:ma,onBuyVip:fa})])):L("",!0),S(c)?L("",!0):(R(),I("div",W,[S(c)?L("",!0):(R(),j(q,{key:0})),B("div",Y,[B("div",X,[B("div",Z,[B("div",$,[B("div",ee,[(R(!0),I(E,null,D(S(M),(e=>(R(),I("div",{class:_(Qe.value==e.menuPath?"activeSelectItem text-[#fff]":"selectItem text-[#808080] bg-[#F4F4F4;] dark:bg-[#010102] dark:text-[#fff]"),key:e.key,onClick:a=>function(e){h.replace({path:e.menuPath}),("图生图"==e.menuName||"图生文"==e.menuName)&&A.emit("upLoadShow",1)}(e)},T(e.menuName),11,ae)))),128))]),te]),B("div",le,[ie,B("div",se,[B("div",re,[B("div",null,[C(S(J),{accept:".jpg,.jpeg,.png",action:"","default-upload":!1,"on-change":da,"on-before-upload":na,"on-remove":ua,"list-type":"image-card","directory-dnd":""})])])])]),B("div",oe,[de,B("div",ne,[B("div",ue,[B("div",{class:_([0==wa.value?"imgSizeItemSelect border-[2px] border-[#76A5F3] dark:border-[#2A63C5]":"imgSizeItem","dark:bg-[#202B3A] bg-[#F5F8FE]"]),onClick:a[1]||(a[1]=e=>Ia(0))},[B("div",ve,[t.value?(R(),I("img",ce)):(R(),I("img",pe))]),ge,me],2),B("div",{class:_([1==wa.value?"imgSizeItemSelect border-[2px] border-[#76A5F3] dark:border-[#2A63C5]":"imgSizeItem","dark:bg-[#202B3A] bg-[#F5F8FE]"]),onClick:a[2]||(a[2]=e=>Ia(1))},[B("div",fe,[t.value?(R(),I("img",xe)):(R(),I("img",ye))]),be,ke],2),B("div",{class:_([2==wa.value?"imgSizeItemSelect border-[2px] border-[#76A5F3] dark:border-[#2A63C5]":"imgSizeItem","dark:bg-[#202B3A] bg-[#F5F8FE]"]),onClick:a[3]||(a[3]=e=>Ia(2))},[B("div",he,[t.value?(R(),I("img",Fe)):(R(),I("img",we))]),Ae,Ie],2)])])]),Le,B("div",Se,[B("div",Ce,[B("div",{class:"radioItem",onClick:a[4]||(a[4]=e=>Ca(0))},[B("div",{class:_(["radioItemImgBox",0==La.value?"dark:bg-[#2960BE] bg-[#3378ED]":"dark:bg-[#484A4D] bg-[#CECFD0]"])},je,2),Be]),B("div",{class:"radioItem",style:{"margin-left":"12px"},onClick:a[5]||(a[5]=e=>Ca(1))},[B("div",{class:_(["radioItemImgBox",1==La.value?"dark:bg-[#2960BE] bg-[#3378ED]":"dark:bg-[#484A4D] bg-[#CECFD0]"])},Ee,2),De])]),_e]),C(d,{sendType:1,onGetjobId:aa,onResquestStatus:ca})]),B("div",ze,[Te,0!=Ke.value.length&&V.value?(R(),I("div",{key:1,class:"drawList",ref_key:"toTop",ref:Ye},[B("div",Pe,[C(l,{drawLogList:Ke.value,onNewJobId:$e},null,8,["drawLogList"])]),We.value?(R(),j(i,{key:0,task:ta.value,onRefresh:aa},null,8,["task"])):L("",!0),Ze.value?(R(),j(s,{key:1,task:ta.value,onNewJob:$e},null,8,["task"])):L("",!0)],512)):(R(),I("div",Ne,[C(n)])),Re,B("div",Me,[B("div",Je,[z("版权所有 © "+T(ya.value)+" ",1),ba.value?(R(),I("div",Ue,[Ve,B("a",{href:ha.value||"#"},T(ba.value),9,Oe)])):L("",!0),ka.value?(R(),I("div",qe,[Ge,B("a",{href:Fa.value||"#"},T(ka.value),9,He)])):L("",!0)])])])])])]))],64))}}),[["__scopeId","data-v-27569ae5"]]);export{Ke as default};
