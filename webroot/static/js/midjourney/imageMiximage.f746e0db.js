import{_ as e,a}from"../1.1Light/1.1Light.a9718ff8.js";import{_ as t}from"../Line 1/Line 1.30390b32.js";import{_ as l}from"../draw-fail/draw-fail.8f549170.js";import{_ as i,a as s}from"../police/police.b4a86fcd.js";import{d as o,_ as r,a as d,b as n,p as u,N as v,c}from"../popup/popup.cae61582.js";import{d as p,e as g,c as m,aJ as f,b as x,g as y,u as k,y as b,a4 as h,aF as F,aE as w,G as A,i as I,l as L,h as S,n as C,k as B,j,F as D,r as _,M as E,Z as T,m as z,af as N,aK as P,o as R,aL as M,aM as J,C as U,D as H,H as V}from"../main-83ca6c6a.js";import{S as O}from"../index/index.003f58b7.js";import{a as q}from"../music/music.dcec3151.js";import"../index/index.60a55c14.js";import"../createInspiration.vue_vue_type_script_setup_true_lang/createInspiration.vue_vue_type_script_setup_true_lang.23ef6a10.js";const G=e=>(U("data-v-f7f442f1"),e=e(),H(),e),K={key:1},Q={key:2},W={key:3,class:"text-image-container flex flex-row dark:bg-[#010102] bg-[#F4F4F4]",style:{width:"100%"}},Z={style:{width:"100%"}},X={class:"h-full flex justify-start items-between",style:{height:"100vh",width:"100%"}},Y={class:"contentBox dark:bg-[#15171A] bg-[#FFFFFF]"},$={style:{position:"absolute","z-index":"99",width:"278px","padding-bottom":"10px",top:"0"},class:"bg-[#fff] dark:bg-[#15171A]"},ee={style:{display:"flex","margin-top":"12px"}},ae=["onClick"],te=G((()=>j("div",{class:"MJBox dark:bg-[#202B3A] bg-[#fff]"},[j("div",{class:"intro dark:text-[#CAC5C5] text-[#808080]"}," 一款强大的人工智能绘画工具，为用户提供了各种创意的绘画功能，一次性生成4张高质量的艺术创作。 ")],-1))),le={class:"padMapBox"},ie=G((()=>j("div",{style:{display:"flex","justify-content":"space-between"}},[j("div",{style:{display:"flex"}},[j("div",{style:{"font-size":"15px","font-weight":"500"}},"上传图片（2-5张）")])],-1))),se={class:"modePutExpand"},oe={class:"upLoadContent"},re={class:"ImgSize",style:{"margin-top":"10px"}},de=G((()=>j("div",{style:{display:"flex","justify-content":"space-between"}},[j("div",{style:{display:"flex"}},[j("div",{style:{"font-size":"15px","font-weight":"500"}},"图片尺寸")])],-1))),ne={class:"modePutExpand"},ue={class:"sizeBox"},ve={class:"imgBox"},ce={key:0,src:e,alt:""},pe={key:1,src:a,alt:""},ge=G((()=>j("div",{class:"title1 text-[#919393] dark:text-[#707277]"},"1:1",-1))),me=G((()=>j("div",{class:"title2 text-[#919393] dark:text-[#707277]"},"头像框",-1))),fe={class:"imgBox"},xe={key:0,src:e,alt:""},ye={key:1,src:a,alt:""},ke=G((()=>j("div",{class:"title1 text-[#919393] dark:text-[#707277]"},"3:2",-1))),be=G((()=>j("div",{class:"title2 text-[#919393] dark:text-[#707277]"},"横板名片",-1))),he={class:"imgBox"},Fe={key:0,src:e,alt:""},we={key:1,src:a,alt:""},Ae=G((()=>j("div",{class:"title1 text-[#919393] dark:text-[#707277]"},"2:3",-1))),Ie=G((()=>j("div",{class:"title2 text-[#919393] dark:text-[#707277]"},"小红书图",-1))),Le=G((()=>j("div",{class:"promptBox dark:bg-[#202B3A] bg-[#F5F8FE] text-[#3378ED] dark:text-[#2960BE]"}," 温馨提示：同官方的/blend命令图混图，最多可以上传5张图片进行混图，图片越靠前，权重越高。 ",-1))),Se={class:"radioBox dark:bg-[#15171A] bg-[#FFFFFF]"},Ce={style:{display:"flex"}},Be=[G((()=>j("img",{src:t,alt:""},null,-1)))],je=G((()=>j("p",{style:{"margin-left":"4px","font-size":"10px"}},"快图模式",-1))),De=[G((()=>j("img",{src:t,alt:""},null,-1)))],_e=G((()=>j("p",{style:{"margin-left":"4px","font-size":"10px"}},"常规模式",-1))),Ee=[G((()=>j("img",{style:{width:"12px",height:"12px","margin-right":"4px"},src:l,alt:""},null,-1))),G((()=>j("p",{style:{"font-size":"10px"},class:"text-[#A3A5A6] dark:text-[#76777A]"},"免责声明",-1)))],Te={class:"contentCenter bg-[#fff] dark:bg-[#15171A]"},ze=G((()=>j("div",{class:"contentCenterTop border-b-[2px] dark:border-[#000000] border-[#D1D1D1]"},[j("span",null,"#  创作中心"),j("span",{style:{color:"#EDB830"}},"    请遵守中华人民共和国网络安全法，严禁生成涉及政治人物、色情、恐怖等不良内容，如有违规封号处理")],-1))),Ne={key:0,class:"w-full",style:{padding:"0 40px","margin-top":"10px"}},Pe={style:{"margin-top":"10px"}},Re=G((()=>j("div",{style:{position:"relative",padding:"0 40px","margin-right":"12px"},class:"bg-[#fff] dark:bg-[#1F1F38]"},[j("div",{style:{position:"relative"}})],-1))),Me={style:{color:"#eeeeee"},class:"end"},Je={style:{display:"flex"}},Ue={key:0,style:{display:"flex"}},He=G((()=>j("img",{style:{"margin-right":"5px",width:"16px",height:"16px"},src:i,alt:""},null,-1))),Ve=["href"],Oe={key:1,style:{display:"flex"}},qe=G((()=>j("img",{style:{"margin-right":"5px",width:"16px",height:"16px"},src:s,alt:""},null,-1))),Ge=["href"],Ke=V(p({__name:"imageMiximage",setup(e){const a=g(),t=m((()=>"dark"===a.theme)),l=f(),i=x(),{isMobile:s}=y(),p=k(),U=x(),H=m((()=>U.isLogin));m((()=>U.userInfo.avatar)),m((()=>U.userInfo.username)),m((()=>U.userBalance));const V=m((()=>U.mjDrawForm)),G=b(),Ke=b([]),Qe=b("");Qe.value=h.currentRoute.value.fullPath;const We=b();localStorage.getItem("drawLogList")?(Ke.value=JSON.parse(localStorage.getItem("drawLogList")),setTimeout((()=>{Ye()}),10)):F({page:1,size:20}).then((e=>{let a=e.data.rows;Ke.value=a.reverse(),setTimeout((()=>{Ye()}),10),localStorage.setItem("drawLogList",JSON.stringify(Ke.value))}));const Ze=b(null),Xe=()=>{let e=Ze.value;e.scrollTo({top:e.scrollHeight+e.clientHeight,behavior:"smooth"})},Ye=()=>{let e=Ze.value;e.scrollTop=e.scrollHeight},$e=b(),ea=e=>{$e.value=e,setTimeout((()=>Xe()),10),aa(e),sa()},aa=async e=>{e&&(la.value=await N({jobId:e}).then((e=>e.data)),ia.value&&la.value.status>=4&&clearTimeout(ia.value))},ta=e=>{We.value=e,setTimeout((()=>Xe()),10),aa(e),sa()},la=b({status:0}),ia=b(),sa=()=>{ia.value&&clearTimeout(ia.value),ia.value=setTimeout((()=>{var e;if((null==(e=la.value)?void 0:e.status)>=P.DRAWED){ia.value&&clearTimeout(ia.value),G.value=0,Ke.value.push(la.value),A.emit("status",G.value);return 0==Ke.value.filter((e=>e.id==la.value.id)).length?Ke.value.push(la.value):console.log("重复了"),A.emit("newDrawLogList",Ke.value),$e.value="",We.value="",void F({page:1,size:20}).then((e=>{let a=e.data.rows;Ke.value=a.reverse(),localStorage.setItem("drawLogList",JSON.stringify(e.data.rows)),setTimeout((()=>Xe()),10)}))}sa(),aa(We.value)}),3e3)};w((()=>{ia.value&&clearTimeout(ia.value),ia.value=null,i.updateDrawId({id:""})})),b(0),b(!1),b(""),b(0),b([{name:"--q 质量化",sliderValue:0,id:0,max:100,type:"--q"},{name:"--s 风格化",sliderValue:0,id:1,max:1e3,type:"--s"},{name:"--c 多样化",sliderValue:0,id:2,max:100,type:"--c"}]),b(!1),b(0);const oa=b(0);setTimeout((()=>{oa.value=1}),0);const ra=b([]),da=["jpg","jpeg","png"],na=e=>{"pending"===e.file.status&&ga(e.file.file).then((e=>{let a="data:image/png;base64,"+e;ra.value.push(a)})),"removed"===e.file.status&&ga(e.file.file).then((e=>{let a="data:image/png;base64,"+e;ra.value=ra.value.filter((e=>e!==a))})),A.emit("base64Array",ra.value)},ua=e=>{const a=e.file.type.split("/")[1];return e.fileList.length>=5?(p.warning("最多只能上传5张图片"),!1):da.includes(a)&&e.fileList.length<=5},va=e=>{const a=e.file.name;V.value.extendParam=V.value.extendParam.filter((e=>!e.filename.includes(a))),ca()},ca=async()=>{U.updateMjDrawForm(V.value)},pa=e=>{G.value=e};function ga(e){return new Promise(((a,t)=>{const l=new FileReader;l.readAsDataURL(e),l.onload=function(){const e=l.result.split(",")[1];a(e)},l.onerror=function(){t(new Error("Failed to load file"))}}))}A.on("upLoadIsShow",(e=>{oa.value=e})),A.on("upLoadShow",(e=>{oa.value=e}));const ma=b(!1);A.on("error",(e=>{ma.value=e}));const fa=()=>{ma.value=!1},xa=()=>{ma.value=!1,U.checkAuth()&&l.updateVipDialog(!0)},ya=b(!1);A.emit("drawRoute",h.options.history.location);const ka=b(""),ba=b(""),ha=b(""),Fa=b(""),wa=b("");q({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{ka.value=e.data.copyrightTitle,ba.value=e.data.icpNumber,ha.value=e.data.policeFilingNumber,Fa.value=e.data.icpUrl,wa.value=e.data.policeFilingUrl})),b(!1),b(!1);const Aa=b(0),Ia=b("SQUARE");function La(e){Aa.value=e,0==e?Ia.value="SQUARE":1==e?Ia.value="PORTRAIT":2==e&&(Ia.value="LANDSCAPE"),A.emit("imageMixImageSize",Ia.value)}b("快图模式");const Sa=b(0),Ca=b(1);function Ba(e){0==e?Ca.value=1:1==e&&(Ca.value=2),A.emit("drawMode",Ca.value),Sa.value=e}function ja(){h.push("/serviceAgreement")}return b(1),b(1),(e,a)=>(R(),I(D,null,[ya.value?(R(),I("div",{key:0,class:"mask",onClick:a[0]||(a[0]=e=>ya.value=!1)})):L("",!0),S(s)?(R(),I("div",K,[C(n)])):L("",!0),ma.value?(R(),I("div",Q,[C(u,{onClosePop:fa,onBuyVip:xa})])):L("",!0),S(s)?L("",!0):(R(),I("div",W,[S(s)?L("",!0):(R(),B(O,{key:0})),j("div",Z,[j("div",X,[j("div",Y,[j("div",$,[j("div",ee,[(R(!0),I(D,null,_(S(M),(e=>(R(),I("div",{class:E(Qe.value==e.menuPath?"activeSelectItem text-[#fff]":"selectItem text-[#808080] bg-[#F4F4F4;] dark:bg-[#010102] dark:text-[#fff]"),key:e.key,onClick:a=>function(e){h.replace({path:e.menuPath}),("图生图"==e.menuName||"图生文"==e.menuName)&&A.emit("upLoadShow",1)}(e)},z(e.menuName),11,ae)))),128))]),te]),j("div",le,[ie,j("div",se,[j("div",oe,[j("div",null,[C(S(J),{accept:".jpg,.jpeg,.png",action:"","default-upload":!1,"on-change":na,"on-before-upload":ua,"on-remove":va,"list-type":"image-card","directory-dnd":""})])])])]),j("div",re,[de,j("div",ne,[j("div",ue,[j("div",{class:E([0==Aa.value?"imgSizeItemSelect border-[2px] border-[#76A5F3] dark:border-[#2A63C5]":"imgSizeItem","dark:bg-[#202B3A] bg-[#F5F8FE]"]),onClick:a[1]||(a[1]=e=>La(0))},[j("div",ve,[t.value?(R(),I("img",ce)):(R(),I("img",pe))]),ge,me],2),j("div",{class:E([1==Aa.value?"imgSizeItemSelect border-[2px] border-[#76A5F3] dark:border-[#2A63C5]":"imgSizeItem","dark:bg-[#202B3A] bg-[#F5F8FE]"]),onClick:a[2]||(a[2]=e=>La(1))},[j("div",fe,[t.value?(R(),I("img",xe)):(R(),I("img",ye))]),ke,be],2),j("div",{class:E([2==Aa.value?"imgSizeItemSelect border-[2px] border-[#76A5F3] dark:border-[#2A63C5]":"imgSizeItem","dark:bg-[#202B3A] bg-[#F5F8FE]"]),onClick:a[3]||(a[3]=e=>La(2))},[j("div",he,[t.value?(R(),I("img",Fe)):(R(),I("img",we))]),Ae,Ie],2)])])]),Le,j("div",Se,[j("div",Ce,[j("div",{class:"radioItem",onClick:a[4]||(a[4]=e=>Ba(0))},[j("div",{class:E(["radioItemImgBox",0==Sa.value?"dark:bg-[#2960BE] bg-[#3378ED]":"dark:bg-[#484A4D] bg-[#CECFD0]"])},Be,2),je]),j("div",{class:"radioItem",style:{"margin-left":"12px"},onClick:a[5]||(a[5]=e=>Ba(1))},[j("div",{class:E(["radioItemImgBox",1==Sa.value?"dark:bg-[#2960BE] bg-[#3378ED]":"dark:bg-[#484A4D] bg-[#CECFD0]"])},De,2),_e])]),j("div",{style:{display:"flex","align-items":"center",cursor:"pointer"},onClick:ja},Ee)]),C(v,{sendType:1,onGetjobId:ta,onResquestStatus:pa})]),j("div",Te,[ze,0!=Ke.value.length&&H.value?(R(),I("div",{key:1,class:"drawList",ref_key:"toTop",ref:Ze},[j("div",Pe,[C(o,{drawLogList:Ke.value,onNewJobId:ea},null,8,["drawLogList"])]),We.value?(R(),B(r,{key:0,task:la.value,onRefresh:ta},null,8,["task"])):L("",!0),$e.value?(R(),B(d,{key:1,task:la.value,onNewJob:ea},null,8,["task"])):L("",!0)],512)):(R(),I("div",Ne,[C(c)])),Re,j("div",Me,[j("div",Je,[T("版权所有 © "+z(ka.value)+" ",1),ba.value?(R(),I("div",Ue,[He,j("a",{href:Fa.value||"#"},z(ba.value),9,Ve)])):L("",!0),ha.value?(R(),I("div",Oe,[qe,j("a",{href:wa.value||"#"},z(ha.value),9,Ge)])):L("",!0)])])])])])]))],64))}}),[["__scopeId","data-v-f7f442f1"]]);export{Ke as default};
