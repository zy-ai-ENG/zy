import{_ as e,d as a,a as t,b as s,p as i,c as l,N as o,e as n,f as r}from"../popup/popup.add7dde6.js";import{d,aI as u,b as v,g as c,u as p,c as m,y as g,aG as f,aF as x,an as y,a5 as k,i as b,l as w,h,n as C,k as L,j as A,F as I,r as j,m as F,M as E,aJ as D,ag as T,aK as S,o as B,aB as J,aL as N,C as M,D as z,E as R}from"../main-b75778ed.js";import{S as P}from"../index/index.87df1315.js";import{U as V}from"../userDetails/userDetails.412bd539.js";import"../draw-fail/draw-fail.50b43169.js";import"../index/index.3c337507.js";import"../music/music.512e1309.js";import"../punycode@2.3.0/punycode@2.3.0.8a62a219.js";const _=e=>(M("data-v-9f69d525"),e=e(),z(),e),O={key:1},q={key:2},G={key:3,class:"text-image-container flex flex-row",style:{width:"100%"}},U={style:{width:"100%"}},H={class:"h-full flex justify-start items-between",style:{height:"100vh",width:"100%"}},K={class:"contentBox dark:bg-[#272740] bg-[#F4F4F5]"},Q={style:{"overflow-y":"auto","padding-bottom":"70px"}},W=D('<div class="MJBox dark:bg-[#1A1A2F] bg-[#E8E8E8]" data-v-9f69d525><img class="logoImg" src="'+n+'" alt="" data-v-9f69d525><div class="titleBox" data-v-9f69d525><p class="title1 dark:text-[#CAC5C5] text-[#808080]" data-v-9f69d525>Mid Journey</p><p class="title2" data-v-9f69d525>AI</p></div><div class="intro dark:text-[#CAC5C5] text-[#808080]" data-v-9f69d525> 一款强大的人工智能绘画工具，为用户提供了各种创意的绘画功能，一次性生成4张高质量的艺术创作。 </div></div>',1),X={class:"modeBox"},Y=_((()=>A("div",{class:"modeTitle"},[A("p",{class:"title text-[#808080] dark:text-[#fff]"},"模型广场")],-1))),Z={class:"modeContent"},$=["onClick"],ee=_((()=>A("p",{style:{"font-size":"19px"}},"#",-1))),ae={class:"contentNmae"},te={class:"contentIntro"},se={class:"userInfo dark:bg-[#1A1A2F] bg-[#E8E8E8]"},ie={key:0},le=["src"],oe={class:"userName"},ne={class:"name text-[#808080] dark:text-[#fff]"},re={key:0,class:"isVip dark:text-[#CCCCCC] text-[#A0A0A0]"},de={key:1,class:"isVip dark:text-[#CCCCCC] text-[#A0A0A0]"},ue={class:"contentCenter"},ve=_((()=>A("div",{class:"contentCenterTop dark:bg-[#1F1F38] border-b-[2px] bg-[#fff] dark:border-[#2C2C4F] border-[#D1D1D1]"},[A("span",null,"#  创作中心"),A("span",{style:{color:"#EDB830"}},"    请遵守中华人民共和国网络安全法，严禁生成涉及政治人物、色情、恐怖等不良内容，如有违规封号处理")],-1))),ce={key:0,class:"w-full",style:{padding:"0 40px"}},pe={style:{"margin-top":"10px"}},me={style:{position:"relative",padding:"0 40px","margin-right":"12px"},class:"bg-[#fff] dark:bg-[#1F1F38]"},ge={style:{position:"relative"}},fe=_((()=>A("div",{class:"upLoadTop dark:bg-[#32324D] bg-[#fff] border-b-[2px] border-[#E8E8E8] dark:border-[transparent]"},[A("img",{class:"topImg",src:r,alt:""}),A("p",{class:"topText1"},"请添加图片"),A("p",{class:"topText2"},"[严禁上传涉及党政主题，证件照，黄图等不良内容，违者100%封号]")],-1))),xe={class:"upLoadContent dark:bg-[#1A1A2F] bg-[#fff]"},ye={class:""},ke={class:"contentBox2"},be=_((()=>A("div",{class:"content2"},[A("div",{style:{width:"6px",height:"25px","background-color":"#4BA3FF","border-radius":"3px","margin-right":"10px"}}),A("p",{class:"settingText"},"生成尺寸"),A("span",{style:{color:"#BBBBC1","font-size":"16px","margin-left":"20px"}},"选择生成图像的宽度X高度比例")],-1))),we={class:"sizeBox"},he=["onClick"],Ce={style:{height:"54px",display:"flex","justify-content":"center","align-items":"center","padding-top":"9px"}},Le=["src"],Ae={style:{"margin-top":"5px"}},Ie=R(d({__name:"imageMiximage",setup(n){const r=u(),d=v(),{isMobile:D}=c(),M=p(),z=v(),R=m((()=>z.isLogin)),_=m((()=>z.userInfo.avatar)),Ie=m((()=>z.userInfo.username)),je=m((()=>z.userBalance)),Fe=m((()=>z.mjDrawForm)),Ee=g(),De=g([]),Te=g();f({page:1,size:20}).then((e=>{localStorage.setItem("drawLogList",JSON.stringify(e.data.rows))})),localStorage.getItem("drawLogList")?De.value=JSON.parse(localStorage.getItem("drawLogList")):f({page:1,size:20}).then((e=>{De.value=e.data.rows,localStorage.setItem("drawLogList",JSON.stringify(e.data.rows))}));const Se=g(null),Be=()=>{Se.value.scrollTo({top:0,behavior:"smooth"})},Je=g(),Ne=e=>{Je.value=e,Be(),Me(e),Ve()},Me=async e=>{e&&(Re.value=await T({jobId:e}).then((e=>e.data)),Pe.value&&Re.value.status>=4&&clearTimeout(Pe.value))},ze=e=>{Te.value=e,Be(),Me(e),Ve()},Re=g({status:0}),Pe=g(),Ve=()=>{Pe.value&&clearTimeout(Pe.value),Pe.value=setTimeout((()=>{var e;if((null==(e=Re.value)?void 0:e.status)>=S.DRAWED)return Pe.value&&clearTimeout(Pe.value),Ee.value=0,De.value.unshift(Re.value),y.emit("status",Ee.value),y.emit("newDrawLogList",De.value),Je.value="",Te.value="",void f({page:1,size:20}).then((e=>{localStorage.setItem("drawLogList",JSON.stringify(e.data.rows))}));Ve(),Me(Te.value)}),3e3)};x((()=>{Pe.value&&clearTimeout(Pe.value),Pe.value=null,d.updateDrawId({id:""})}));const _e=[{name:"MJ6.0（最新）",intro:"全新6.0 ALPHA真实风格图像",id:0,value:"--v 6.0"},{name:"MJ5.2（真实细节）",intro:"增加真实风格图像细节",id:1,value:"--v 5.2"},{name:"MJ5.1（艺术）",intro:"专注真实艺术风格图像",id:2,value:"--v 5.1"},{name:"NJ5.0（动漫增强）",intro:"官方最新动漫模型同步",id:5,value:"--niji 5"},{name:"NJ4.0（动漫）",intro:"官方最新动漫模型同步",id:6,value:"--niji 4"}],Oe=g(0);g(!1),g("");const qe=[{name:"头像框",src:"/src/views/midjourney/img/1.png",id:0,intro:"1:1",value:"SQUARE"},{name:"小红书图",src:"/src/views/midjourney/img/2.png",id:1,intro:"2:3",value:"PORTRAIT"},{name:"横板名片",src:"/src/views/midjourney/img/3.png",id:2,intro:"3:2",value:"LANDSCAPE"}],Ge=g(0);g([{name:"--q 质量化",sliderValue:0,id:0,max:100,type:"--q"},{name:"--s 风格化",sliderValue:0,id:1,max:1e3,type:"--s"},{name:"--c 多样化",sliderValue:0,id:2,max:100,type:"--c"}]),g(!1),g(0);const Ue=g(0);setTimeout((()=>{Ue.value=1}),0);const He=g([]),Ke=["jpg","jpeg","png"],Qe=e=>{"pending"===e.file.status&&$e(e.file.file).then((e=>{let a="data:image/png;base64,"+e;He.value.push(a)})),"removed"===e.file.status&&$e(e.file.file).then((e=>{let a="data:image/png;base64,"+e;He.value=He.value.filter((e=>e!==a))})),y.emit("base64Array",He.value)},We=e=>{const a=e.file.type.split("/")[1];return e.fileList.length>=5?(M.warning("最多只能上传5张图片"),!1):Ke.includes(a)&&e.fileList.length<=5},Xe=e=>{const a=e.file.name;Fe.value.extendParam=Fe.value.extendParam.filter((e=>!e.filename.includes(a))),Ye()},Ye=async()=>{z.updateMjDrawForm(Fe.value)},Ze=e=>{Ee.value=e};function $e(e){return new Promise(((a,t)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=function(){const e=s.result.split(",")[1];a(e)},s.onerror=function(){t(new Error("Failed to load file"))}}))}y.on("upLoadIsShow",(e=>{Ue.value=e})),y.on("upLoadShow",(e=>{Ue.value=e}));const ea=g(!1);y.on("error",(e=>{ea.value=e}));const aa=()=>{ea.value=!1},ta=()=>{ea.value=!1,z.checkAuth()&&r.updateVipDialog(!0)},sa=g(!1);return y.emit("drawRoute",k.options.history.location),(n,r)=>{var d,u;return B(),b(I,null,[sa.value?(B(),b("div",{key:0,class:"mask",onClick:r[0]||(r[0]=e=>sa.value=!1)})):w("",!0),h(D)?(B(),b("div",O,[C(s)])):w("",!0),ea.value?(B(),b("div",q,[C(i,{onClosePop:aa,onBuyVip:ta})])):w("",!0),h(D)?w("",!0):(B(),b("div",G,[h(D)?w("",!0):(B(),L(P,{key:0})),A("div",U,[A("div",H,[A("div",K,[A("div",Q,[W,A("div",X,[Y,A("div",Z,[(B(),b(I,null,j(_e,((e,a)=>A("div",{class:E(a==Oe.value?"active text-[#fff] dark:text-[#fff]":"contentItem  text-[#808080] dark:text-[#fff]"),key:e.id,onClick:t=>{return s={item:e,index:a},Oe.value=s.index,void y.emit("--v",s.item.value);var s}},[ee,A("div",null,[A("p",ae,F(e.name),1),A("p",te,F(e.intro),1)])],10,$))),64))])])]),A("div",se,[sa.value?(B(),b("div",ie,[C(V)])):w("",!0),A("img",{class:"avatar",src:_.value?_.value:"./img/avatar.png",alt:"",onClick:r[1]||(r[1]=e=>sa.value=!0)},null,8,le),A("div",oe,[A("p",ne,F(Ie.value),1),(null==(d=je.value)?void 0:d.expirationTime)?(B(),b("p",re," 到期时间："+F(h(J)(null==(u=je.value)?void 0:u.expirationTime)),1)):(B(),b("p",de,"未开通，点击了解特权"))])])]),A("div",ue,[ve,0!=De.value.length&&R.value?(B(),b("div",{key:1,class:"drawList",ref_key:"toTop",ref:Se},[Te.value?(B(),L(e,{key:0,task:Re.value,onRefresh:ze},null,8,["task"])):w("",!0),Je.value?(B(),L(a,{key:1,task:Re.value,onNewJob:Ne},null,8,["task"])):w("",!0),A("div",pe,[C(t,{drawLogList:De.value,onNewJobId:Ne},null,8,["drawLogList"])])],512)):(B(),b("div",ce,[C(l)])),A("div",me,[A("div",ge,[A("div",{class:E(1==Ue.value?"upLoadImg border-[1px] border-[#E8E8E8] dark:border-[transparent]":"upLoadImg1 shadow-md")},[fe,A("div",xe,[A("div",ye,[C(h(N),{accept:".jpg,.jpeg,.png",action:"","default-upload":!1,"on-change":Qe,"on-before-upload":We,"on-remove":Xe,"list-type":"image-card","directory-dnd":""})]),A("div",ke,[be,A("div",we,[(B(),b(I,null,j(qe,((e,a)=>A("div",{class:E(Ge.value==a?"sizeSelect":"sizeItem"),key:e.id,onClick:e=>function(e){Ge.value=e,y.emit("imageMixImageSize",qe[e].value)}(a)},[A("div",Ce,[A("img",{src:e.src,alt:""},null,8,Le)]),A("p",Ae,F(e.intro),1),A("p",null,F(e.name),1)],10,he))),64))])])])],2),C(o,{onGetjobId:ze,onResquestStatus:Ze})])])])])])]))],64)}}}),[["__scopeId","data-v-9f69d525"]]);export{Ie as default};
