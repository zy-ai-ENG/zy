import{_ as e}from"../Line 1/Line 1.30390b32.js";import{d as a,_ as t,a as l,b as s,p as i,N as o,c as r,e as u}from"../popup/popup.e25bc61f.js";import{_ as n,a as d}from"../police/police.b4a86fcd.js";import{a as p}from"../music/music.a874635d.js";import{d as v,e as c,aK as g,y as m,b as f,g as y,c as x,u as h,aG as b,G as k,aF as w,a6 as F,a3 as L,i as I,l as j,h as _,n as D,k as C,j as A,F as T,r as B,K as N,Y as S,m as E,aL as z,o as J,aM as P,aN as M,C as R,D as G,af as O,E as U}from"../main-bc4b8ea2.js";import{S as H}from"../index/index.43b3e0d6.js";import"../draw-fail/draw-fail.50b43169.js";import"../index/index.bdddbcfc.js";import"../createInspiration.vue_vue_type_script_setup_true_lang/createInspiration.vue_vue_type_script_setup_true_lang.1db718d4.js";const K=e=>(R("data-v-d4ce9d59"),e=e(),G(),e),V={key:1},q={key:2},W={key:3,class:"text-image-container flex flex-row dark:bg-[#010102] bg-[#F4F4F4]",style:{width:"100%"}},Y={style:{width:"100%"}},Q={class:"h-full flex justify-start items-between",style:{height:"100vh",width:"100%"}},X={class:"contentBox dark:bg-[#15171A] bg-[#FFFFFF]"},Z={style:{position:"absolute","z-index":"99",width:"278px","padding-bottom":"10px",top:"0"},class:"bg-[#fff] dark:bg-[#15171A]"},$={style:{display:"flex","margin-top":"12px"}},ee=["onClick"],ae=K((()=>A("div",{class:"MJBox dark:bg-[#202B3A] bg-[#fff]"},[A("div",{class:"intro dark:text-[#CAC5C5] text-[#808080]"}," 一款强大的人工智能绘画工具，为用户提供了各种创意的绘画功能，一次性生成4张高质量的艺术创作。 ")],-1))),te={class:"padMapBox"},le=K((()=>A("div",{style:{display:"flex","justify-content":"space-between"}},[A("div",{style:{display:"flex"}},[A("div",{style:{"font-size":"15px","font-weight":"500"}},"上传图片")])],-1))),se={class:"modePutExpand"},ie={class:"upLoadContent"},oe=K((()=>A("div",{class:"promptBox dark:bg-[#202B3A] bg-[#F5F8FE] text-[#3378ED] dark:text-[#2960BE]"}," 温馨提示：同官方的/blend命令图混图，最多可以上传5张图片进行混图，图片越靠前，权重越高。 ",-1))),re={class:"radioBox dark:bg-[#15171A] bg-[#FFFFFF]"},ue={style:{display:"flex"}},ne=[K((()=>A("img",{src:e,alt:""},null,-1)))],de=K((()=>A("p",{style:{"margin-left":"4px","font-size":"10px"}},"快图模式",-1))),pe=[K((()=>A("img",{src:e,alt:""},null,-1)))],ve=K((()=>A("p",{style:{"margin-left":"4px","font-size":"10px"}},"常规模式",-1))),ce=K((()=>A("div",{style:{display:"flex","align-items":"center"}},[A("img",{style:{width:"12px",height:"12px","margin-right":"4px"},src:u,alt:""}),A("p",{style:{"font-size":"10px"},class:"text-[#A3A5A6] dark:text-[#76777A]"},"免责声明")],-1))),ge={class:"contentCenter bg-[#fff] dark:bg-[#15171A]"},me=K((()=>A("div",{class:"contentCenterTop border-b-[2px] bg-[#fff] dark:bg-[#15171A] border-b-[2px] dark:border-[#000000] border-[#D1D1D1]"},[A("span",null,"#  创作中心"),A("span",{style:{color:"#EDB830"}},"    请遵守中华人民共和国网络安全法，严禁生成涉及政治人物、色情、恐怖等不良内容，如有违规封号处理")],-1))),fe={key:0,class:"w-full",style:{padding:"0 40px","margin-top":"10px"}},ye={style:{"margin-top":"10px"}},xe={style:{color:"#eeeeee"},class:"end"},he={style:{display:"flex"}},be={key:0,style:{display:"flex"}},ke=K((()=>A("img",{style:{"margin-right":"5px",width:"16px",height:"16px"},src:n,alt:""},null,-1))),we=["href"],Fe={key:1,style:{display:"flex"}},Le=K((()=>A("img",{style:{"margin-right":"5px",width:"16px",height:"16px"},src:d,alt:""},null,-1))),Ie=["href"],je=U(v({__name:"image2text",setup(e){c();const u=g(),n=m(0);setTimeout((()=>{n.value=1}),0),f();const d=f(),{isMobile:v}=y(),R=f(),G=x((()=>R.isLogin));x((()=>R.userInfo.avatar)),x((()=>R.userInfo.username)),x((()=>R.userBalance));const U=x((()=>R.mjDrawForm)),K=h(),je=m(),_e=m([]),De=m();b({page:1,size:20}).then((e=>{localStorage.setItem("drawLogList",JSON.stringify(e.data.rows))})),localStorage.getItem("drawLogList")?(_e.value=JSON.parse(localStorage.getItem("drawLogList")),setTimeout((()=>{Pe()}),800)):b({page:1,size:20}).then((e=>{_e.value=e.data.rows,localStorage.setItem("drawLogList",JSON.stringify(e.data.rows)),setTimeout((()=>{Pe()}),800)}));const Ce=k({files:[],previewImages:[]}),Ae=["jpg","jpeg","png"],Te=e=>{"pending"===e.file.status&&Ce.files.push(e.file.file),"removed"===e.file.status&&(Ce.files=Ce.files.filter((a=>a!==e.file.file))),F.emit("imageForm",Ce)},Be=e=>{const a=e.file.type.split("/")[1];return e.fileList.length>=1?(K.warning("最多只能上传1张图片"),!1):Ae.includes(a)&&e.fileList.length<=1},Ne=e=>{const a=e.file.name;U.value.extendParam=U.value.extendParam.filter((e=>!e.filename.includes(a))),Se()},Se=async()=>{R.updateMjDrawForm(U.value)},Ee=e=>{De.value=e},ze=async e=>{e&&(Oe.value=await O({jobId:e}).then((e=>e.data)),Ue.value&&Oe.value.status>=4&&clearTimeout(Ue.value))},Je=m(null),Pe=()=>{let e=Je.value;e.scrollTo({top:e.scrollHeight+e.clientHeight,behavior:"smooth"})},Me=m(),Re=e=>{Me.value=e,Pe(),ze(e),He()},Ge=e=>{je.value=e,Pe(),ze(e),He()},Oe=m({status:0}),Ue=m(),He=()=>{Ue.value&&clearTimeout(Ue.value),Ue.value=setTimeout((()=>{var e;if((null==(e=Oe.value)?void 0:e.status)>=z.DRAWED){Ue.value&&clearTimeout(Ue.value),De.value=0,_e.value.push(Oe.value),F.emit("status",De.value);return 0==_e.value.filter((e=>e.id==Oe.value.id)).length?_e.value.push(Oe.value):console.log("重复了"),F.emit("newDrawLogList",_e.value),Me.value="",je.value="",void b({page:1,size:20}).then((e=>{localStorage.setItem("drawLogList",JSON.stringify(e.data.rows))}))}je.value?(He(),ze(je.value)):Me.value&&(He(),ze(Me.value))}),3e3)};w((()=>{Ue.value&&clearTimeout(Ue.value),Ue.value=null,d.updateDrawId({id:""})})),m(0),F.on("upLoadIsShow",(e=>{n.value=e})),F.on("upLoadShow",(e=>{n.value=e}));const Ke=m(!1);F.on("error",(e=>{Ke.value=e}));const Ve=()=>{Ke.value=!1},qe=()=>{Ke.value=!1,R.checkAuth()&&u.updateVipDialog(!0)},We=m(!1);F.emit("drawRoute",L.options.history.location);const Ye=m("");Ye.value=L.currentRoute.value.fullPath;const Qe=m(""),Xe=m(""),Ze=m(""),$e=m(""),ea=m("");p({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{Qe.value=e.data.copyrightTitle,Xe.value=e.data.icpNumber,Ze.value=e.data.policeFilingNumber,$e.value=e.data.icpUrl,ea.value=e.data.policeFilingUrl})),m(!1),m(!1);const aa=m(0),ta=m(1);function la(e){aa.value=e,0==e?ta.value=1:1==e&&(ta.value=2),F.emit("imgToTextMode",ta.value)}return(e,u)=>(J(),I(T,null,[We.value?(J(),I("div",{key:0,class:"mask",onClick:u[0]||(u[0]=e=>We.value=!1)})):j("",!0),_(v)?(J(),I("div",V,[D(s)])):j("",!0),Ke.value?(J(),I("div",q,[D(i,{onClosePop:Ve,onBuyVip:qe})])):j("",!0),_(v)?j("",!0):(J(),I("div",W,[_(v)?j("",!0):(J(),C(H,{key:0})),A("div",Y,[A("div",Q,[A("div",X,[A("div",Z,[A("div",$,[(J(!0),I(T,null,B(_(P),(e=>(J(),I("div",{class:N(Ye.value==e.menuPath?"activeSelectItem text-[#fff]":"selectItem text-[#808080] bg-[#F4F4F4;] dark:bg-[#010102] dark:text-[#fff]"),key:e.key,onClick:a=>function(e){L.replace({path:e.menuPath}),("图生图"==e.menuName||"图生文"==e.menuName)&&F.emit("upLoadShow",1)}(e)},E(e.menuName),11,ee)))),128))]),ae]),A("div",te,[le,A("div",se,[A("div",ie,[A("div",null,[D(_(M),{accept:".jpg,.jpeg,.png",action:"","default-upload":!1,"on-change":Te,"on-before-upload":Be,"on-remove":Ne,"list-type":"image-card","directory-dnd":""})])])])]),oe,A("div",re,[A("div",ue,[A("div",{class:"radioItem",onClick:u[1]||(u[1]=e=>la(0))},[A("div",{class:N(["radioItemImgBox",0==aa.value?"dark:bg-[#2960BE] bg-[#3378ED]":"dark:bg-[#484A4D] bg-[#CECFD0]"])},ne,2),de]),A("div",{class:"radioItem",style:{"margin-left":"12px"},onClick:u[2]||(u[2]=e=>la(1))},[A("div",{class:N(["radioItemImgBox",1==aa.value?"dark:bg-[#2960BE] bg-[#3378ED]":"dark:bg-[#484A4D] bg-[#CECFD0]"])},pe,2),ve])]),ce]),D(o,{sendType:1,onGetjobId:Ge,onResquestStatus:Ee})]),A("div",ge,[me,0!=_e.value.length&&G.value?(J(),I("div",{key:1,class:"drawList",ref_key:"toTop",ref:Je},[A("div",ye,[D(a,{drawLogList:_e.value,onNewJobId:Re},null,8,["drawLogList"])]),je.value?(J(),C(t,{key:0,task:Oe.value,onRefresh:Ge},null,8,["task"])):j("",!0),Me.value?(J(),C(l,{key:1,task:Oe.value,onNewJob:Re},null,8,["task"])):j("",!0)],512)):(J(),I("div",fe,[D(r)])),A("div",xe,[A("div",he,[S("版权所有 © "+E(Qe.value)+" ",1),Xe.value?(J(),I("div",be,[ke,A("a",{href:$e.value||"#"},E(Xe.value),9,we)])):j("",!0),Ze.value?(J(),I("div",Fe,[Le,A("a",{href:ea.value||"#"},E(Ze.value),9,Ie)])):j("",!0)])])])])])]))],64))}}),[["__scopeId","data-v-d4ce9d59"]]);export{je as default};
