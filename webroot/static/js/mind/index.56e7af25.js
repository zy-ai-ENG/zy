import{b as e}from"../markmap-lib@0.14.4_markmap-common@0.14.2/markmap-lib@0.14.4_markmap-common@0.14.2.f0050ba0.js";import{M as s}from"../markmap-view@0.14.4_markmap-common@0.14.2/markmap-view@0.14.4_markmap-common@0.14.2.99f35111.js";import{F as r}from"../file-saver@2.0.5/file-saver@2.0.5.f4dcea8a.js";import{t}from"../html-to-image@1.11.11/html-to-image@1.11.11.3b4ed8e0.js";import{d as a}from"../dom-to-image@2.6.0/dom-to-image@2.6.0.d200c444.js";import{a as o,c as i,ar as n,_ as l}from"../main-bb4220d0.js";import{e as m,r as u,p as d,a7 as v}from"../naive-ui@2.34.3_vue@3.2.47/naive-ui@2.34.3_vue@3.2.47.d79924d9.js";import{d as p,p as c,j as _,a as f,b as j,c as h,N as y,o as b,t as g}from"../@vue_runtime-core@3.2.47/@vue_runtime-core@3.2.47.e62b9a68.js";import{r as x,x as w}from"../@vue_reactivity@3.2.47/@vue_reactivity@3.2.47.859737a0.js";import"../@babel_runtime@7.21.5/@babel_runtime@7.21.5.35f69bd2.js";import"../katex@0.16.7/katex@0.16.7.43835b5c.js";import"../markmap-common@0.14.2/markmap-common@0.14.2.bb7f57a5.js";import"../d3-transition@2.0.0_d3-selection@2.0.0/d3-transition@2.0.0_d3-selection@2.0.0.1a6d61d6.js";import"../d3-dispatch@2.0.0/d3-dispatch@2.0.0.5b7f091b.js";import"../d3-timer@2.0.0/d3-timer@2.0.0.947b38ad.js";import"../d3-interpolate@2.0.1/d3-interpolate@2.0.1.d3eea538.js";import"../d3-color@2.0.0/d3-color@2.0.0.050db9d2.js";import"../d3-selection@2.0.0/d3-selection@2.0.0.eaad748b.js";import"../d3-ease@2.0.0/d3-ease@2.0.0.3a704e54.js";import"../d3-zoom@2.0.0/d3-zoom@2.0.0.36d7f337.js";import"../d3-drag@2.0.0/d3-drag@2.0.0.68a1fed3.js";import"../d3-scale@3.3.0/d3-scale@3.3.0.ebdf832d.js";import"../d3-array@2.12.1/d3-array@2.12.1.53235631.js";import"../d3-scale-chromatic@2.0.0/d3-scale-chromatic@2.0.0.97916aae.js";import"../d3-shape@2.1.0/d3-shape@2.1.0.34187db3.js";import"../d3-path@2.0.0/d3-path@2.0.0.da5f0c69.js";import"../@vue_runtime-dom@3.2.47/@vue_runtime-dom@3.2.47.298398d5.js";import"../@vue_shared@3.2.47/@vue_shared@3.2.47.9d8e617e.js";import"../v-viewer@3.0.11_vue@3.2.47/v-viewer@3.0.11_vue@3.2.47.a81e5850.js";import"../viewerjs@1.11.3/viewerjs@1.11.3.a76d4126.js";import"../vue-router@4.1.6_vue@3.2.47/vue-router@4.1.6_vue@3.2.47.018c715a.js";import"../clientjs@0.2.1/clientjs@0.2.1.7f53d864.js";import"../crypto-js@4.1.1/crypto-js@4.1.1.7142fa56.js";import"../@iconify_vue@4.1.1_vue@3.2.47/@iconify_vue@4.1.1_vue@3.2.47.612da1cd.js";import"../pinia@2.0.35_typescript@4.9.5_vue@3.2.47/pinia@2.0.35_typescript@4.9.5_vue@3.2.47.1425f1b3.js";import"../vue-demi@0.14.7_vue@3.2.47/vue-demi@0.14.7_vue@3.2.47.71ba0ef2.js";import"../axios@1.4.0/axios@1.4.0.5ae1da96.js";import"../vue-i18n@9.2.2_vue@3.2.47/vue-i18n@9.2.2_vue@3.2.47.f7da0a53.js";import"../@intlify_shared@9.2.2/@intlify_shared@9.2.2.76c1dc14.js";import"../@intlify_core-base@9.2.2/@intlify_core-base@9.2.2.72ca16dd.js";import"../@intlify_message-compiler@9.2.2/@intlify_message-compiler@9.2.2.9b2b247d.js";import"../@intlify_devtools-if@9.2.2/@intlify_devtools-if@9.2.2.1be0989c.js";import"../vooks@0.2.12_vue@3.2.47/vooks@0.2.12_vue@3.2.47.89d56bd5.js";import"../evtd@0.2.4/evtd@0.2.4.2789e4a1.js";import"../@vueuse_core@9.13.0_vue@3.2.47/@vueuse_core@9.13.0_vue@3.2.47.770e5818.js";import"../@vueuse_shared@9.13.0_vue@3.2.47/@vueuse_shared@9.13.0_vue@3.2.47.58cbe97f.js";import"../mitt@3.0.1/mitt@3.0.1.f0e54764.js";import"../@vicons_ionicons5@0.12.0/@vicons_ionicons5@0.12.0.5fe57882.js";import"../marked@4.3.0/marked@4.3.0.cb1ff4ec.js";import"../date-fns@2.30.0/date-fns@2.30.0.bcce45e8.js";import"../vue-clipboard3@2.0.0/vue-clipboard3@2.0.0.ebf9d56c.js";import"../clipboard@2.0.11/clipboard@2.0.11.6a7b8915.js";import"../@vueuse_integrations@10.2.0_axios@1.4.0_qrcode@1.5.3_vue@3.2.47/@vueuse_integrations@10.2.0_axios@1.4.0_qrcode@1.5.3_vue@3.2.47.a70167c7.js";import"../@vueuse_shared@10.2.0_vue@3.2.47/@vueuse_shared@10.2.0_vue@3.2.47.3d57d69b.js";import"../qrcode@1.5.3/qrcode@1.5.3.ae99ec0a.js";import"../encode-utf8@1.0.3/encode-utf8@1.0.3.2ec93547.js";import"../dijkstrajs@1.0.3/dijkstrajs@1.0.3.38d0b2a1.js";import"../seemly@0.3.6/seemly@0.3.6.21da59ee.js";import"../vueuc@0.4.51_vue@3.2.47/vueuc@0.4.51_vue@3.2.47.ce1cbfa6.js";import"../@css-render_vue3-ssr@0.15.12_vue@3.2.47/@css-render_vue3-ssr@0.15.12_vue@3.2.47.e49104bd.js";import"../vdirs@0.1.8_vue@3.2.47/vdirs@0.1.8_vue@3.2.47.bf970686.js";import"../@juggle_resize-observer@3.4.0/@juggle_resize-observer@3.4.0.80d14552.js";import"../css-render@0.15.12/css-render@0.15.12.af3f05a4.js";import"../@emotion_hash@0.8.0/@emotion_hash@0.8.0.b17c1a96.js";import"../lodash-es@4.17.21/lodash-es@4.17.21.6a776102.js";import"../treemate@0.3.11/treemate@0.3.11.05d63ee5.js";import"../async-validator@4.2.5/async-validator@4.2.5.8d480e59.js";import"../@css-render_plugin-bem@0.15.12_css-render@0.15.12/@css-render_plugin-bem@0.15.12_css-render@0.15.12.0c2c3e5c.js";const k={class:"flex grow flex-col sm:flex-row h-full"},z={class:"sm:pt-4 box-border bg-[#F7F7F7] h-[90%] dark:bg-[#131323] overflow-y-auto w-full sm:w-[20rem] shrink-0 border-r-2 border-[#ffffff17] flex flex-col"},A={class:"flex-1 px-4 pb-2"},D=j("h4",{class:"mb-2"}," 您的需求？ ",-1),C={class:"flex my-4"},q={class:"flex justify-between mb-2"},I=j("h4",{class:"font-bold"}," 内容需求 ",-1),R={class:"py-3 bottom-0 border-t-2 border-[#00000014] w-full flex flex-col justify-center items-center"},T=j("div",{class:"items-start mb-2"}," 每次使用消耗基础积分： 1 ",-1),G={class:"h-full flex-1 overflow-y-auto overflow-hidden min-h-[80vh] flex flex-col"},M=j("header",{class:"flex items-center p-5"},[j("h2",{class:"font-bold text-2xl"},"思维导图")],-1),S={class:"flex-1 w-full p-4"},B=p({__name:"index",setup(p){var B;const F=o(),L=i(),P=m(),E=null==(B=F.globalConfig)?void 0:B.mindDefaultData,N=x(null),O=new e.Transformer,H=x(!1),K=x(""),U=x(),V=x("");let X;function $(){const e=(new XMLSerializer).serializeToString(U.value),s=new Blob([e],{type:"image/svg+xml;charset=utf-8"});r.saveAs(s,"gomaxai-mind.svg")}async function J(){const e=await a.toSvg(U.value),s=new Blob([`\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="utf-8">\n  <title>Markmap Export</title>\n</head>\n<body>\n  ${e}\n</body>\n</html>`],{type:"text/html;charset=utf-8"});r.saveAs(s,"gomaxai-mind.html")}async function Q(){H.value=!0,V.value="";try{const e="";let s="";const r=()=>(V.value=s,!!H.value||(V.value=s,!1)),t=setInterval((()=>{r()||clearInterval(t)}),1e3),a=async()=>{await n({prompt:K.value,onDownloadProgress:({event:r})=>{const t=r.target,{responseText:a}=t,o=a.lastIndexOf("\n",a.length-2);let i=a;-1!==o&&(i=a.substring(o));try{const r=JSON.parse(i);s=e+(r.text??"")}catch(n){}}}),H.value=!1};await a()}catch(e){H.value=!1;const{code:s=500,message:r="好像出错了，请稍后再试！"}=e;if(429===s&&r.includes("balance has been exhausted"))return P.error("当前系统Key余额耗尽、请联系管理员补充！");if(500===s){let s=(null==e?void 0:e.message)??"好像出错了，请稍后再试！";return"Request failed with status code 401"===s&&(s="非法操作、请先登录后再进行问答使用！"),void P.error(s)}if(402===e.code)return P.error(e.message,{duration:5e3}),void L.updateGoodsDialog(!0);P.error("出了点小错误、请稍后试试吧！")}finally{H.value=!1}}async function W(){const e=await t(U.value);r.saveAs(e,"markmap.png")}function Y(){V.value="\n# 会议流程\n\n## 开场白\n- 欢迎词\n- 自我介绍\n\n## 议程安排\n- 介绍会议议程\n- 确认议程是否被所有人接受\n\n## 上一次会议的总结\n- 回顾上次会议的议题及结果\n- 确认上次会议的行动项是否已经完成\n\n## 主题讨论\n- 提出本次会议的主题\n- 介绍主题相关背景信息\n- 提出问题并进行讨论\n- 形成共识或决策\n\n## 行动项\n- 确定行动项及责任人\n- 确定完成时间和目标\n\n## 公告和其他事项\n- 公告即将到来的活动或项目\n- 公告公司的其他事项\n\n## 结束语\n- 感谢所有人的参与\n- 总结会议内容\n- 确认下一次会议的时间和议题\n"}c((()=>{setTimeout((()=>{V.value=E||"# GoMaxAi\n## 基础功能\n- 支持AI聊天\n- 支持GPT4\n- 支持DLLAE2\n- 支持Midjourney\n- 更多功能等你探索......\n\n## 更多内容\n-  在上面输入您想要生成的内容\n- 点击生成即可\n\n"}),1e3)}));const Z=()=>{const{root:e}=O.transform(V.value);X.setData(e),X.fit()};return c((()=>{X=s.create(U.value),Z()})),_(Z),(e,s)=>(b(),f("div",k,[j("div",z,[j("div",A,[D,h(w(u),{ref_key:"inputRef",ref:N,value:K.value,"onUpdate:value":s[0]||(s[0]=e=>K.value=e),type:"textarea",disabled:H.value,autosize:{minRows:3},placeholder:"请输入您想要生成内容的简单描述、AI将为您输出一份完整的markdown内容及其思维导图!"},null,8,["value","disabled"]),j("div",C,[h(w(d),{type:"primary",size:"small",style:{width:"100%"},loading:H.value,onClick:Q},{default:y((()=>[g(" 智能生成生成思维导图 ")])),_:1},8,["loading"])]),j("div",q,[I,h(w(d),{text:"",onClick:Y},{default:y((()=>[g(" 试试示例 ")])),_:1})]),h(w(u),{value:V.value,"onUpdate:value":s[1]||(s[1]=e=>V.value=e),type:"textarea",disabled:H.value,autosize:{minRows:8,maxRows:24},placeholder:"请用markdown语法输入您想要生成思维导图的内容或在上方使用描述让AI帮您完善！"},null,8,["value","disabled"])]),j("div",R,[T,j("div",null,[h(w(v),{size:"small"},{default:y((()=>[h(w(d),{type:"primary",onClick:J},{default:y((()=>[h(w(l),{icon:"ri:error-warning-line",class:"text-base"}),g(" 导出HTML ")])),_:1}),h(w(d),{type:"primary",onClick:W},{default:y((()=>[h(w(l),{icon:"ri:error-warning-line",class:"text-base"}),g(" 导出PNG ")])),_:1}),h(w(d),{type:"warning",onClick:$},{default:y((()=>[h(w(l),{icon:"ri:error-warning-line",class:"text-base"}),g(" 导出SVG ")])),_:1})])),_:1})])])]),j("div",G,[M,j("div",S,[(b(),f("svg",{ref_key:"svgRef",ref:U,class:"box-border w-full h-[80vh] border dark:border-gray-600 rounded-md"},null,512))])])]))}});export{B as default};
