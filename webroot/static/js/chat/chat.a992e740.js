import{R as e}from"../index/index.35ae69d8.js";import{b as t,d as a}from"../@vue_runtime-dom@3.2.47/@vue_runtime-dom@3.2.47.298398d5.js";import{u as s,t as l,a as i,b as n,c as o,d as r,_ as d,e as c,f as u,g as p,h as v,i as m,j as g,k as f,l as x,m as h,n as y,o as b,r as k,p as w,q as _}from"../main-bb4220d0.js";import{e as C,p as j,q as A,o as I,x as T,E as D,A as B,d as E,n as z,a2 as F}from"../naive-ui@2.34.3_vue@3.2.47/naive-ui@2.34.3_vue@3.2.47.d79924d9.js";import{n as $,d as M,o as R,a as q,b as L,M as N,R as S,c as U,N as G,F as O,Q as P,q as Z,p as H,S as V,U as J,j as K,m as Q,J as W,y as X,t as Y,G as ee}from"../@vue_runtime-core@3.2.47/@vue_runtime-core@3.2.47.e62b9a68.js";import{x as te,r as ae,j as se}from"../@vue_reactivity@3.2.47/@vue_reactivity@3.2.47.859737a0.js";import{J as le,n as ie,o as ne}from"../@vue_shared@3.2.47/@vue_shared@3.2.47.9d8e617e.js";import{u as oe,a as re}from"../vue-router@4.1.6_vue@3.2.47/vue-router@4.1.6_vue@3.2.47.018c715a.js";import{V as de,p as ce,w as ue,e as pe,a as ve,v as me,f as ge,_ as fe,C as xe}from"../file/file.c060ea84.js";import{h as he}from"../html2canvas@1.4.1/html2canvas@1.4.1.e8bfce09.js";import{M as ye}from"../markdown-it@13.0.1/markdown-it@13.0.1.9061a946.js";import{m as be}from"../@traptitech_markdown-it-katex@3.6.0/@traptitech_markdown-it-katex@3.6.0.ade9370b.js";import{m as ke}from"../markdown-it-link-attributes@4.0.1/markdown-it-link-attributes@4.0.1.f815b672.js";import{H as we}from"../highlight.js@11.8.0/highlight.js@11.8.0.7981ccab.js";import{C as _e,R as Ce,a as je,D as Ae}from"../@icon-park_vue-next@1.4.2_vue@3.2.47/@icon-park_vue-next@1.4.2_vue@3.2.47.a7171089.js";import{c as Ie}from"../index/index.a4f65e28.js";import"../@iconify_vue@4.1.1_vue@3.2.47/@iconify_vue@4.1.1_vue@3.2.47.612da1cd.js";import"../v-viewer@3.0.11_vue@3.2.47/v-viewer@3.0.11_vue@3.2.47.a81e5850.js";import"../viewerjs@1.11.3/viewerjs@1.11.3.a76d4126.js";import"../clientjs@0.2.1/clientjs@0.2.1.7f53d864.js";import"../@babel_runtime@7.21.5/@babel_runtime@7.21.5.35f69bd2.js";import"../crypto-js@4.1.1/crypto-js@4.1.1.7142fa56.js";import"../pinia@2.0.35_typescript@4.9.5_vue@3.2.47/pinia@2.0.35_typescript@4.9.5_vue@3.2.47.1425f1b3.js";import"../vue-demi@0.14.7_vue@3.2.47/vue-demi@0.14.7_vue@3.2.47.71ba0ef2.js";import"../axios@1.4.0/axios@1.4.0.5ae1da96.js";import"../vue-i18n@9.2.2_vue@3.2.47/vue-i18n@9.2.2_vue@3.2.47.f7da0a53.js";import"../@intlify_shared@9.2.2/@intlify_shared@9.2.2.76c1dc14.js";import"../@intlify_core-base@9.2.2/@intlify_core-base@9.2.2.72ca16dd.js";import"../@intlify_message-compiler@9.2.2/@intlify_message-compiler@9.2.2.9b2b247d.js";import"../@intlify_devtools-if@9.2.2/@intlify_devtools-if@9.2.2.1be0989c.js";import"../vooks@0.2.12_vue@3.2.47/vooks@0.2.12_vue@3.2.47.89d56bd5.js";import"../evtd@0.2.4/evtd@0.2.4.2789e4a1.js";import"../katex@0.16.7/katex@0.16.7.43835b5c.js";import"../@vueuse_core@9.13.0_vue@3.2.47/@vueuse_core@9.13.0_vue@3.2.47.770e5818.js";import"../@vueuse_shared@9.13.0_vue@3.2.47/@vueuse_shared@9.13.0_vue@3.2.47.58cbe97f.js";import"../mitt@3.0.1/mitt@3.0.1.f0e54764.js";import"../@vicons_ionicons5@0.12.0/@vicons_ionicons5@0.12.0.5fe57882.js";import"../marked@4.3.0/marked@4.3.0.cb1ff4ec.js";import"../date-fns@2.30.0/date-fns@2.30.0.bcce45e8.js";import"../vue-clipboard3@2.0.0/vue-clipboard3@2.0.0.ebf9d56c.js";import"../clipboard@2.0.11/clipboard@2.0.11.6a7b8915.js";import"../@vueuse_integrations@10.2.0_axios@1.4.0_qrcode@1.5.3_vue@3.2.47/@vueuse_integrations@10.2.0_axios@1.4.0_qrcode@1.5.3_vue@3.2.47.a70167c7.js";import"../@vueuse_shared@10.2.0_vue@3.2.47/@vueuse_shared@10.2.0_vue@3.2.47.3d57d69b.js";import"../qrcode@1.5.3/qrcode@1.5.3.ae99ec0a.js";import"../encode-utf8@1.0.3/encode-utf8@1.0.3.2ec93547.js";import"../dijkstrajs@1.0.3/dijkstrajs@1.0.3.38d0b2a1.js";import"../seemly@0.3.6/seemly@0.3.6.21da59ee.js";import"../vueuc@0.4.51_vue@3.2.47/vueuc@0.4.51_vue@3.2.47.ce1cbfa6.js";import"../@css-render_vue3-ssr@0.15.12_vue@3.2.47/@css-render_vue3-ssr@0.15.12_vue@3.2.47.e49104bd.js";import"../vdirs@0.1.8_vue@3.2.47/vdirs@0.1.8_vue@3.2.47.bf970686.js";import"../@juggle_resize-observer@3.4.0/@juggle_resize-observer@3.4.0.80d14552.js";import"../css-render@0.15.12/css-render@0.15.12.af3f05a4.js";import"../@emotion_hash@0.8.0/@emotion_hash@0.8.0.b17c1a96.js";import"../lodash-es@4.17.21/lodash-es@4.17.21.6a776102.js";import"../treemate@0.3.11/treemate@0.3.11.05d63ee5.js";import"../async-validator@4.2.5/async-validator@4.2.5.8d480e59.js";import"../@css-render_plugin-bem@0.15.12_css-render@0.15.12/@css-render_plugin-bem@0.15.12_css-render@0.15.12.0c2c3e5c.js";import"../entities@3.0.1/entities@3.0.1.c39fe2fc.js";import"../uc.micro@1.0.6/uc.micro@1.0.6.0fea38b8.js";import"../mdurl@1.0.1/mdurl@1.0.1.da5ed258.js";import"../linkify-it@4.0.1/linkify-it@4.0.1.fecc599e.js";import"../punycode@2.3.0/punycode@2.3.0.7cad0e83.js";function Te(){const e=C(),t=s(),a=$((()=>t.usingContext));return{usingContext:a,toggleUsingContext:function(){t.setUsingContext(!a.value),a.value?e.success(l("chat.turnOnContext")):e.warning(l("chat.turnOffContext"))}}}const De={key:0,class:"sticky top-0 left-0 right-0 z-30 border-b dark:border-neutral-800 bg-white/80 dark:bg-black/20 backdrop-blur"},Be={class:"relative flex items-center justify-center min-w-0 overflow-hidden h-14"},Ee={class:"max-w-screen-2xl flex w-full items-center px-4"},ze={key:0,class:"flex items-center"},Fe=L("div",{class:"flex-1 py-4 ele-drag"},null,-1),$e={key:1,class:"flex-1"},Me=L("span",{class:"mr-0"},"新对话",-1),Re={class:"flex h-8 w-8 items-center justify-center rounded border transition hover:bg-[#eef0f3] dark:border-neutral-700 dark:hover:bg-[#33373c]"},qe={class:"text-base text-slate-500 dark:text-slate-400"},Le={class:"flex items-center gap-4"},Ne=M({__name:"index",props:{usingContext:{type:Boolean}},emits:["export","toggleUsingContext","clear","scrollBtn"],setup(e,{emit:t}){const a=i();Te(),C();const l=[{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}];$((()=>{if(!u.activeConfig)return;const{modelTypeInfo:e,modelInfo:t}=u.activeConfig;return e&&t?`${null==e?void 0:e.label} / ${t.modelName}`:void 0}));const c=n(),u=s();o();const p=$((()=>c.siderCollapsed)),v=$((()=>u.getChatByGroupInfo())),{isMobile:m}=r(),g=$((()=>c.theme));function f(){c.setSiderCollapsed(!p.value)}async function x(){try{await u.updateChatTab("history"),await u.addNewChatGroup(),await u.queryMyGroup(),m.value&&c.setSiderCollapsed(!0)}catch(e){}}function h(){const e=document.querySelector("#scrollRef");e&&Z((()=>e.scrollTop=0))}return $((()=>a.isLogin)),(e,t)=>{var a;return te(m)?(R(),q("header",De,[L("div",Be,[L("div",Ee,[te(m)?(R(),q("div",ze,[L("button",{class:"flex items-center justify-center w-11 h-11",onClick:f},[te(p)?(R(),N(te(d),{key:0,class:"text-2xl",icon:"ri:align-justify"})):(R(),N(te(d),{key:1,class:"text-2xl",icon:"ri:align-right"}))])])):S("",!0),L("h1",{class:"flex-1 px-4 ele-drag font-bold pr-6 overflow-hidden cursor-pointer select-none text-ellipsis whitespace-nowrap",onDblclick:h},le((null==(a=te(v))?void 0:a.title)??""),33),Fe,te(m)?(R(),q("div",$e,[L("button",{class:"rounded w-full flex justify-center items-center",onClick:x},[U(te(d),{icon:"mingcute:add-line",class:"text-sm mr-0.5"}),Me])])):S("",!0),te(m)?(R(),N(te(A),{key:2,trigger:"click"},{trigger:G((()=>[L("button",Re,[L("span",qe,[U(te(d),{icon:"fluent:dark-theme-24-regular"})])])])),default:G((()=>[L("div",null,[L("div",Le,[(R(),q(O,null,P(l,(e=>U(te(j),{key:e.key,size:"small",type:e.key===te(g)?"info":void 0,onClick:t=>te(c).setTheme(e.key)},{icon:G((()=>[U(te(d),{icon:e.icon},null,8,["icon"])])),_:2},1032,["type","onClick"]))),64))])])])),_:1})):S("",!0)])])])):S("",!0)}}}),Se=["onClick"],Ue={style:{"margin-right":"20px"}},Ge=["src"],Oe={style:{"margin-bottom":"10px","font-weight":"bold"}},Pe={style:{height:"40px","font-size":"12px",color:"#9F9F9F",overflow:"hidden","text-overflow":"ellipsis"}},Ze=(e=>(V("data-v-1f86fa47"),e=e(),J(),e))((()=>L("div",{class:"recommend"},"推荐",-1))),He=v(M({__name:"index",setup(e){const a=c();r(),C();const s=oe(),l=i(),n=u(),o=ae([]);return H((()=>{!async function(){const e=await p({page:1,size:12,modelName:"",modelId:"",groupId:""});o.value=e.data.rows,console.log(e)}()})),$((()=>a.mineApps)),(e,a)=>(R(!0),q(O,null,P(o.value,(i=>(R(),q("div",{class:"list_item dark:bg-[#2E2E4C] bg-[#fff]",key:i.id,onRunApp:a[0]||(a[0]=(...t)=>e.handleChat&&e.handleChat(...t)),onClick:t((e=>async function(e){await n.addNewChat(e.id),n.updateGptsStore(!1),s.push("/gpts"),l.setSelectSiderIndex(l.appListIndex),l.selectSiderIndex=1}(i)),["stop"])},[L("div",Ue,[L("img",{src:i.logo},null,8,Ge)]),L("div",null,[L("div",Oe,le(i.modelName),1),L("div",Pe,le(i.desc),1)]),Ze],40,Se)))),128))}}),[["__scopeId","data-v-1f86fa47"]]),Ve={class:"w-full"},Je={class:"grid grid-cols-3 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-3 gap-4"},Ke=["onClick"],Qe={class:"mb-4"},We=["onClick"],Xe={class:"line-clamp-2"},Ye=M({__name:"mobile",emits:["run"],setup(e,{emit:t}){s(),i(),C(),ae(!1);const{isMobile:a}=r(),l=se({page:1,size:a.value?3:8});const n=ae([]),o=e=>{t("run",e)};return H((()=>{!async function(){var e;const t=await m(l);n.value=null==(e=null==t?void 0:t.data)?void 0:e.rows.map((e=>{var t;return e.loading=!1,e.demoData=null==(t=e.demoData)?void 0:t.split("\n").slice(0,3),e}))}()})),(e,t)=>(R(),q("div",Ve,[L("ul",Je,[(R(!0),q(O,null,P(n.value,(e=>(R(),q("li",null,[L("div",{class:"cursor-pointer",onClick:t=>o(e)},[U(te(I),{round:"",size:42,src:e.coverImg},null,8,["src"]),L("p",Qe,le(e.name),1)],8,Ke),(R(!0),q(O,null,P(e.demoData,(t=>(R(),q("p",{class:"px-1 py-2 dark:bg-[#42425F] bg-[#f5f5f5] my-3 rounded cursor-pointer",onClick:a=>o({id:e.id,demoData:t})},[L("span",Xe,le(t),1)],8,We)))),256))])))),256))])]))}}),et={style:{height:"100%"},class:"w-full"},tt={style:{display:"flex","flex-wrap":"wrap","justify-content":"space-between",height:"100%","overflow-y":"scroll","background-color":"transparent"},class:"w-full overflow-hidden"},at={key:0},st={class:"mt-4 grid grid-cols-1 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-1 xl:grid-cols-2 2xl:grid-cols-4 gap-6"},lt={class:"flex justify-start items-center"},it={class:"flex justify-between"},nt=M({__name:"index",emits:["run"],setup(e,{emit:t}){s(),i(),C(),ae(!1),g();const{isMobile:a}=r(),l=se({page:1,size:a.value?3:12});const n=ae([]),o=e=>{t("run",e)};return H((()=>{!async function(){var e;const t=await m(l);n.value=null==(e=null==t?void 0:t.data)?void 0:e.rows.map((e=>(e.loading=!1,e)))}()})),(e,t)=>(R(),q("div",et,[L("div",{style:{padding:"10px 0 0 0",height:"100%"},class:ie(["suggest-container w-full max-w-screen-2xl dark:bg-[#1A1D21] bg-[#fff]",[te(a)?"":"bg-[#F7F7F7] dark:bg-[#313155] pt-4 px-6 pb-6 rounded-xl"]])},[L("div",tt,[n.value.length?S("",!0):(R(),q("div",at,[L("div",st,[(R(),q(O,null,P(12,(e=>U(te(D),{vertical:"",class:"border border-gray-200 dark:border-gray-600 rounded hover:bg-neutral-100 dark:bg-[#3A3A5E] dark:hover:bg-[#24272e] px-4 py-2 pb-4"},{default:G((()=>[L("div",lt,[U(te(T),{round:"",height:"50px",width:"20%",class:"mt-1",sharp:!1}),U(te(T),{height:"20px",width:"20%",class:"mt-1 ml-4",sharp:!1})]),U(te(T),{height:"40px",width:"100%",class:"mt-1",sharp:!1}),L("div",it,[U(te(T),{height:"20px",width:"30%",class:"mt-1",sharp:!1}),U(te(T),{height:"20px",width:"10%",class:"mt-1",sharp:!1})])])),_:1}))),64))])])),te(a)?(R(),N(Ye,{key:2,onRunApp:o,list:n.value},null,8,["list"])):(R(),N(He,{key:1,onRunApp:o,list:n.value},null,8,["list"]))])],2)]))}}),ot={style:{height:"100%"},class:"w-full md:min-w-[450px]"},rt=M({__name:"index",emits:["run-app"],setup(e,{emit:t}){function a(e){t("run-app",e)}i();const{isMobile:s}=r();return(e,t)=>(R(),q("div",{style:{padding:"0",margin:"0",height:"100%"},class:ie([[te(s)?"mt-2":""],"w-full px-4 py-4"])},[L("div",ot,[U(nt,{onRun:a})])],2))}}),dt={key:1,class:"text-[28px] dark:text-white"},ct={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32","aria-hidden":"true",width:"1em",height:"1em"},ut=[L("path",{d:"M29.71,13.09A8.09,8.09,0,0,0,20.34,2.68a8.08,8.08,0,0,0-13.7,2.9A8.08,8.08,0,0,0,2.3,18.9,8,8,0,0,0,3,25.45a8.08,8.08,0,0,0,8.69,3.87,8,8,0,0,0,6,2.68,8.09,8.09,0,0,0,7.7-5.61,8,8,0,0,0,5.33-3.86A8.09,8.09,0,0,0,29.71,13.09Zm-12,16.82a6,6,0,0,1-3.84-1.39l.19-.11,6.37-3.68a1,1,0,0,0,.53-.91v-9l2.69,1.56a.08.08,0,0,1,.05.07v7.44A6,6,0,0,1,17.68,29.91ZM4.8,24.41a6,6,0,0,1-.71-4l.19.11,6.37,3.68a1,1,0,0,0,1,0l7.79-4.49V22.8a.09.09,0,0,1,0,.08L13,26.6A6,6,0,0,1,4.8,24.41ZM3.12,10.53A6,6,0,0,1,6.28,7.9v7.57a1,1,0,0,0,.51.9l7.75,4.47L11.85,22.4a.14.14,0,0,1-.09,0L5.32,18.68a6,6,0,0,1-2.2-8.18Zm22.13,5.14-7.78-4.52L20.16,9.6a.08.08,0,0,1,.09,0l6.44,3.72a6,6,0,0,1-.9,10.81V16.56A1.06,1.06,0,0,0,25.25,15.67Zm2.68-4-.19-.12-6.36-3.7a1,1,0,0,0-1.05,0l-7.78,4.49V9.2a.09.09,0,0,1,0-.09L19,5.4a6,6,0,0,1,8.91,6.21ZM11.08,17.15,8.38,15.6a.14.14,0,0,1-.05-.08V8.1a6,6,0,0,1,9.84-4.61L18,3.6,11.61,7.28a1,1,0,0,0-.53.91ZM12.54,14,16,12l3.47,2v4L16,20l-3.47-2Z",fill:"currentColor"},null,-1)],pt=M({__name:"Avatar",props:{image:{type:Boolean}},setup(e){const{isMobile:t}=r(),a=i(),s=$((()=>a.userInfo.avatar)),l=$((()=>a.globalConfig.robotAvatar));return(a,i)=>e.image?(R(),q(O,{key:0},[te(f)(te(s))&&te(s).length>0?(R(),N(te(I),{key:0,round:"",size:te(t)?32:42,src:te(s),"fallback-src":te(x)},null,8,["size","src","fallback-src"])):(R(),N(te(I),{key:1,round:"",size:te(t)?32:42,src:te(x)},null,8,["size","src"]))],64)):(R(),q("span",dt,[te(f)(te(l))&&te(l).length>0?(R(),N(te(I),{key:0,style:{"background-color":"transparent"},rounded:"",size:te(t)?32:42,src:te(l),"fallback-src":te(x)},null,8,["size","src","fallback-src"])):(R(),q("svg",ct,ut))]))}}),vt={key:0,class:"flex flex-col items-start",style:{width:"100%"}},mt={class:"w-full"},gt={class:"dark:bg-[#1C2635] bg-[#F5F8FE] p-2 rounded-md"},ft=["innerHTML"],xt=["textContent"],ht={style:{display:"flex","justify-content":"space-between","align-items":"center"}},yt={class:"mt-4 flex items-center"},bt={class:"text-xs text-[#888]"},kt={class:"flex"},wt={class:"bg-[#f4f4f4] dark:bg-[#15171A]",style:{"margin-top":"12px","border-radius":"5px",padding:"0 10px"}},_t=L("span",{class:"text-xs leading-none mt-0.5"},"重新回答",-1),Ct=L("span",{class:"ml-4"},null,-1),jt={class:"bg-[#f4f4f4] dark:bg-[#15171A]",style:{"margin-top":"12px","border-radius":"5px",padding:"0 10px"}},At=L("span",{class:"text-xs leading-none mt-0.5"},"复制",-1),It=L("span",{class:"ml-4"},null,-1),Tt={class:"bg-[#f4f4f4] dark:bg-[#15171A]",style:{"margin-top":"12px","border-radius":"5px",padding:"0 10px"}},Dt=L("span",{class:"text-xs leading-none mt-0.5"},"删除",-1),Bt={class:"dark:text-[#484A4D] text-[#A3A5A6]"},Et={key:1},zt=["innerHTML"],Ft=["textContent"],$t={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Mt={class:"flex"},Rt={class:"bg-[#f4f4f4] dark:bg-[#15171A]",style:{"margin-top":"12px","border-radius":"5px",padding:"0 10px"}},qt=L("span",{class:"text-xs leading-none mt-0.5"},"重新提问",-1),Lt=L("span",{class:"ml-4"},null,-1),Nt={class:"bg-[#f4f4f4] dark:bg-[#15171A]",style:{"margin-top":"12px","border-radius":"5px",padding:"0 10px"}},St=L("span",{class:"text-xs leading-none mt-0.5"},"复制",-1),Ut=L("span",{class:"ml-4"},null,-1),Gt={class:"bg-[#f4f4f4] dark:bg-[#15171A]",style:{"margin-top":"12px","border-radius":"5px",padding:"0 10px"}},Ot=L("span",{class:"text-xs leading-none mt-0.5"},"删除",-1),Pt={class:"dark:text-[#484A4D] text-[#A3A5A6]"},Zt=M({__name:"Text",props:{inversion:{type:Boolean},error:{type:Boolean},text:null,loading:{type:Boolean},asRawText:{type:Boolean},dateTime:null,chatTail:null},emits:["regenerate","delete","copy"],setup(e,{expose:t,emit:a}){const s=e,{isMobile:i}=r(),n=ae(),o=new ye({linkify:!0,html:!0,highlight(e,t){if(!(!t||!we.getLanguage(t))){const a=t??"";return u(we.highlight(e,{language:a}).value,a)}return u(we.highlightAuto(e).value,"")}}).enable("image");o.use(ke,{attrs:{target:"_blank",rel:"noopener"}}),o.use(be,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"});const d=$((()=>["text-wrap","rounded-md",i.value?"p-2":"px-3 py-2",s.inversion?"dark:text-[#fff]":"dark:text-[#000]",s.inversion?"message-request":"message-reply",{"text-red-500":s.error}])),c=$((()=>{const e=s.text??"";if(!s.asRawText){if(e.includes("uploaded")){const t=(e=>{const t=e.match(/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g);return t&&t.length>0?t[0]:""})(e);if(de.isImg(e)){const a=e.replace(` ${t}`,`[![${t}](${t})](${t})`);return o.render(a)}if(de.isPdf(e)){const a=e.replace(` ${t}`,`[![${t}](${ce})](${t})`);return o.render(a)}if(de.isWord(e)){const a=e.replace(` ${t}`,`[![${t}](${ue})](${t})`);return o.render(a)}if(de.isExcel(e)){const a=e.replace(` ${t}`,`[![${t}](${pe})](${t})`);return o.render(a)}if(de.isPPt(e)){const a=e.replace(` ${t}`,`[![${t}](${ve})](${t})`);return o.render(a)}if(de.isVoice(e)){const a=e.replace(` ${t}`,`<audio id="audio" controls  controlslist="noplaybackrate nodownload" poster="${me}" preload="none"> <source id="mp3" src="${t}"></audio>\n `);return o.render(a)}const a=e.replace(` ${t}`,`[![${t}](${ge})](${t})`);return o.render(a)}return o.render(e)}return e}));function u(e,t){return`<pre class="code-block-wrapper"><div class="code-block-header"><span class="code-block-header__lang">${t}</span><span class="code-block-header__copy">${l("chat.copyCode")}</span></div><code class="hljs code-block-body ${t}">${e}</code></pre>`}function p(){a("regenerate")}function v(){a("copy")}function m(){a("delete")}function g(e){var t=36e5,a=24*t;var s=(new Date).getTime()-Date.parse(e.replace(/-/gi,"-")),l=s/2592e6,i=s/(7*a),n=s/a,o=s/t,r=s/6e4;return l>=1?parseInt(l)+"个月前":i>=1?"发表于"+parseInt(i)+"周前":n>=1?parseInt(n)+"天前":o>=1?parseInt(o)+"个小时前":r>=1?parseInt(r)+"分钟前":"刚刚"}return t({textRef:n}),(t,a)=>(R(),q("div",{class:ie([te(d),"w-full"])},[L("div",{ref_key:"textRef",ref:n,class:"leading-relaxed break-words",style:{width:"100%"}},[e.inversion?(R(),q("div",Et,[L("div",null,[L("div",{class:ie([s.inversion?"bg-[#F1F5F1]  dark:bg-[#15171A]":"bg-[#FBFBFB] dark:bg-[#33334D]","p-2 rounded-md"])},[e.asRawText?(R(),q("div",{key:1,class:"w-full whitespace-pre-wrap",textContent:le(te(c))},null,8,Ft)):(R(),q("div",{key:0,class:ie(["w-full markdown-body",{"markdown-body-generate":e.loading}]),innerHTML:te(c)},null,10,zt))],2),L("div",$t,[L("div",Mt,[L("div",Rt,[U(te(j),{text:"",onClick:p},{icon:G((()=>[U(te(B),{size:10,component:te(Ce)},null,8,["component"])])),default:G((()=>[qt])),_:1})]),Lt,L("div",Nt,[U(te(j),{class:"ml-2",text:"",onClick:v},{icon:G((()=>[U(te(B),{size:10,component:te(je)},null,8,["component"])])),default:G((()=>[St])),_:1})]),Ut,L("div",Gt,[U(te(j),{text:"",onClick:m},{icon:G((()=>[U(te(B),{size:10,component:te(Ae)},null,8,["component"])])),default:G((()=>[Ot])),_:1})])]),L("div",Pt,le(g(e.dateTime)),1)])])])):(R(),q("div",vt,[L("div",mt,[L("div",gt,[e.asRawText?(R(),q("div",{key:1,class:"w-full whitespace-pre-wrap",textContent:le(te(c)),style:{color:"#2960BE"}},null,8,xt)):(R(),q("div",{key:0,style:{color:"#2960BE"},class:ie(["w-full markdown-body",{"markdown-body-generate":e.loading}]),innerHTML:te(c)},null,10,ft))]),L("div",ht,[L("div",null,[L("div",yt,[U(te(B),{size:12,component:te(_e),class:"mr-1.5 text-[#2F88FF]"},null,8,["component"]),L("p",bt,le(e.chatTail),1)]),L("div",kt,[L("div",wt,[U(te(j),{text:"",onClick:p},{icon:G((()=>[U(te(B),{size:10,component:te(Ce)},null,8,["component"])])),default:G((()=>[_t])),_:1})]),Ct,L("div",jt,[U(te(j),{class:"ml-2",text:"",onClick:v},{icon:G((()=>[U(te(B),{size:10,component:te(je)},null,8,["component"])])),default:G((()=>[At])),_:1})]),It,L("div",Tt,[U(te(j),{text:"",onClick:m},{icon:G((()=>[U(te(B),{size:10,component:te(Ae)},null,8,["component"])])),default:G((()=>[Dt])),_:1})])])]),L("div",Bt,le(g(e.dateTime)),1)])])]))],512)],2))}}),Ht={class:"flex items-center justify-center flex-shrink-0 mt-1 mr-2"},Vt=M({__name:"index",props:{dateTime:null,text:null,inversion:{type:Boolean},error:{type:Boolean},loading:{type:Boolean},chatTail:null},emits:["regenerate","delete"],setup(e,{emit:t}){var a;const s=e,l=C();r();const i=ae(),n=ae(s.inversion&&!(null==(a=s.text)?void 0:a.includes("https://"))&&!((o=null==s?void 0:s.text)&&/(.*)\.(jpg|bmp|gif|ico|pcx|jpeg|tif|png)$/.test(o)));var o;const d=ae();function c(){t("delete")}function u(){Ie({text:s.text??""}),s.text&&l.success("复制成功！")}function p(){var e;null==(e=d.value)||e.scrollIntoView(!1,{behavior:"smooth"}),t("regenerate")}return(t,a)=>(R(),q("div",{ref_key:"messageRef",ref:d,class:"flex max-w-full mb-6 overflow-hidden items-start"},[L("div",Ht,[U(pt,{image:e.inversion},null,8,["image"])]),L("div",{class:ie(["text-sm",[e.inversion?"items-end":"items-start"]]),style:{width:"100%"}},[L("div",{class:ie(["flex items-end gap-1 mt-2",[e.inversion?"flex-row-reverse":"flex-row"]])},[U(Zt,{ref_key:"textRef",ref:i,chatTail:e.chatTail,dateTime:e.dateTime,inversion:e.inversion,error:e.error,text:e.text,loading:e.loading,"as-raw-text":n.value,onRegenerate:p,onCopy:u,onDelete:c},null,8,["chatTail","dateTime","inversion","error","text","loading","as-raw-text"])],2)],2)],512))}});const Jt=e=>(V("data-v-f06c0532"),e=e(),J(),e),Kt={class:"flex-1 overflow-hidden"},Qt={key:0,class:"main_content"},Wt=Jt((()=>L("div",{class:"main_title"},[L("div",{style:{"font-size":"35px"},class:"text-[#000] dark:text-[#fff]"},[Y("欢迎使用 "),L("span",{style:{color:"#7ABBFF"}},"聊一聊")]),L("div",{style:{"font-size":"14px"},class:"text-[#818181] dark:text-[#A1A1A1]"},"由最先进AI支持的人类助手")],-1))),Xt={class:"type"},Yt=Jt((()=>L("div",{class:"dark:text-[#E6E6E6] text-[#7F7F7F]"},"选择开始的方式",-1))),ea={class:"type_item dark:bg-[#272740] bg-[#F4F4F4]"},ta=Jt((()=>L("div",null,"直接开始",-1))),aa=Jt((()=>L("div",null,"其他应用",-1))),sa={key:0,class:"session_type"},la=Jt((()=>L("div",{class:"session_type_title"},"高级对话",-1))),ia={class:"item_card"},na={class:"item"},oa=Jt((()=>L("div",{style:{"font-size":"17px","font-weight":"bold"},class:"text-[#03060C] dark:text-[#fff]"}," PDF 问答/数据分析（基础版）",-1))),ra=Jt((()=>L("div",{style:{"font-size":"14px",color:"#9F9F9F"}},"支持常见文件类型，最大25M",-1))),da={class:"img_card"},ca={key:0},ua=[Jt((()=>L("div",{style:{"font-size":"17px","font-weight":"bold"},class:"text-[#03060C] dark:text-[#fff]"}," Dall-E绘画",-1))),Jt((()=>L("div",{class:"item_btn dark:bg-[#2E2E4C] bg-[#fff] border-[2px] border-[#3378ED] dark:border-[transparent] text-[#3378ED] dark:text-[#85858B]"}," 开始画图",-1))),Jt((()=>L("div",{style:{"font-size":"14px",color:"#9F9F9F"}},"支持常见文件类型，最大25M",-1))),Jt((()=>L("div",{class:"img_card"},[L("div",null,"dall-e-3模型")],-1)))],pa={class:"item"},va=Jt((()=>L("div",{style:{"font-size":"17px","font-weight":"bold"},class:"text-[#03060C] dark:text-[#fff]"}," 图片对话",-1))),ma=Jt((()=>L("div",{style:{"font-size":"14px",color:"#9F9F9F"}},"支持常见文件类型，最大25M",-1))),ga={class:"img_card"},fa={key:0},xa={key:1,class:"apply_card"},ha=Jt((()=>L("div",{class:"tips_tag"},[L("div",{class:"tag_item"},"多模型场景"),L("div",{class:"tag_item"},"场景方案"),L("div",{class:"tag_item"},"工作流")],-1))),ya={class:"title_card"},ba=Jt((()=>L("div",null,"从收藏和创建的AI应用中选择",-1))),ka={class:"right_tag"},wa=Jt((()=>L("div",null,"应用中心",-1))),_a=Jt((()=>L("div",null,"创建应用",-1))),Ca={class:"apply_list"},ja={class:"sticky bottom-0 left-0 flex justify-center"},Aa={key:0,class:"footer-dialog bg-[#fff] dark:bg-[#1A1D21] ml-6 mr-3",style:{"border-radius":"0 0 10px 10px"}},Ia={class:"flex justify-between"},Ta={class:"flex justify-center items-center"},Da={key:0},Ba={class:"flex justify-center items-center"},Ea={key:0},za={class:"flex justify-center items-center"},Fa={class:"text-white mr-0.5"},$a={class:"mb-2"},Ma={class:"flex justify-center items-center"},Ra=Jt((()=>L("span",null,"清空",-1))),qa={class:"flex items-stretch space-x-2"},La={style:{"border-radius":"8px",position:"relative","padding-bottom":"10px"},class:"relative flex-1 bg-[#f4f4f4] dark:bg-[#15171A]"},Na={class:"absolute bottom-6 right-2"},Sa={class:"flex items-center justify-between"},Ua={class:"flex justify-between items-center"},Ga=Jt((()=>L("div",{style:{"margin-right":"10px"}},"发送",-1))),Oa=v(M({__name:"chatBase",setup(e){const t=o(),c=g(),u=i(),p=re();let v=new AbortController;const m=g(),f=E(),x=C(),A=n(),I=ae(),T=s(),D=ae(!1),B=ae(!0),F=ae(0),{addGroupChat:M,updateGroupChat:V,updateGroupChatSome:J}=function(){const e=s();return{addGroupChat:t=>{e.addGroupChat(t)},updateGroupChat:(t,a)=>{e.updateGroupChat(t,a)},updateGroupChatSome:(t,a)=>{e.updateGroupChatSome(t,a)}}}(),se=$((()=>p.query.appId)),oe=$((()=>p.query.trade_status)),de=$((()=>p.query.token)),ce=$((()=>c.runApp));!function(){function e(){document.querySelectorAll(".code-block-wrapper").forEach((e=>{const t=e.querySelector(".code-block-header__copy"),a=e.querySelector(".code-block-body");t&&a&&t.addEventListener("click",(()=>{var e;(null==(e=navigator.clipboard)?void 0:e.writeText)?navigator.clipboard.writeText(a.textContent??""):Ie({text:a.textContent??"",origin:!0})}))}))}H((()=>e())),K((()=>e()))}();const{isMobile:ue}=r(),{scrollRef:pe,scrollToBottom:ve,scrollToBottomIfAtBottom:me}=function(){const e=ae(null);return{scrollRef:e,scrollToBottom:async()=>{await Z(),e.value&&(e.value.scrollTop=e.value.scrollHeight)},scrollToTop:async()=>{await Z(),e.value&&(e.value.scrollTop=0)},scrollToBottomIfAtBottom:async()=>{if(await Z(),e.value){const t=150;e.value.scrollHeight-e.value.scrollTop-e.value.clientHeight<=t&&(e.value.scrollTop=e.value.scrollHeight)}}}}(),{usingContext:ge,toggleUsingContext:ye}=Te(),{usingNetwork:be}=function(){const e=C(),t=s(),a=$((()=>t.usingNetwork));return{usingNetwork:a,toggleUsingNetwork:function(){t.setUsingNetwork(!a.value),a.value?e.success("已开启联网模式、上下文状态失效！"):e.warning("已关闭联网模式！")}}}(),ke=$((()=>T.chatList)),we=$((()=>T.canUpload)),_e=$((()=>T.canAudio)),{selectFile:Ce,upload:je}=h(),Ae=$((()=>ke.value.filter((e=>!e.inversion&&!e.error)))),De=ae(""),Be=ae(!1),Ee=ae(null),ze=ae(!0),Fe=ae(""),$e=$((()=>T.active)),Me=$((()=>T.groupList.find((e=>e.uuid===$e.value)))),Re=$((()=>Number(null==T?void 0:T.activeModelKeyType))),qe=$((()=>Be.value||!De.value||""===De.value.trim()||!B.value));async function Le(){t.updateRecordDialog(!0)}async function Se(e=1){let a;if(1===e){if(a=await Ce(),!a)return void x.error("选择文件错误")}else a=e;t.updateUploadDialog(!0);const s=await je({purpose:"assistants",file:a},(e=>{const{progress:a,loaded:s,total:l}=e;a&&100*Number(a.toFixed(2))<=99&&t.updateUploadProgress(100*Number(a.toFixed(2)))}));s.data&&(t.updateUploadProgress(100),t.updateUploadDialog(!1),De.value=1===e?"请分析一下上传的这个文件 "+s.data:"请将语音转换成文本 "+s.data),1!==e&&t.updateRecordDialog(!1)}async function Ue(e){if(0===T.groupList.length||Be.value||!B.value)return;let a="";if(e&&"number"==typeof e){const{requestOptions:t}=ke.value[e];a=(null==t?void 0:t.prompt)??""}!async function(e){var a;let s=e||De.value;if(Be.value)return;if(!s||""===s.trim())return;v=new AbortController,M({dateTime:(new Date).toLocaleString(),text:s,inversion:!0,error:!1,conversationOptions:null,requestOptions:{prompt:s,options:null}}),ve(),Be.value=!0,De.value="";let i={groupId:+$e.value,usingNetwork:be.value};const n=null==(a=Ae.value[Ae.value.length-1])?void 0:a.conversationOptions;n&&ge.value&&!be.value&&(i={...n,...i});M({dateTime:(new Date).toLocaleString(),text:"AI思考中",loading:!0,inversion:!1,error:!1,conversationOptions:null,requestOptions:{prompt:s,options:{...i}}}),ve();let o=null,r="",d="",c=0,p=null;D.value=!0;let m={};t.updateIsChatIn(!0);try{const e=async()=>{o=setInterval((async()=>{var e,a;if(r[c]&&d.length<r.length&&(d+=r[c]),r[c]&&(B.value=!1,V(ke.value.length-1,{dateTime:(new Date).toLocaleString(),text:d,inversion:!1,usage:null==(e=null==p?void 0:p.detail)?void 0:e.usage,error:!1,loading:!0,conversationOptions:{conversationId:null==p?void 0:p.conversationId,parentMessageId:null==p?void 0:p.id},requestOptions:{prompt:s,options:{...i}}}),me(),c++),!D.value&&d.length>=r.length){if(c=0,d="",o&&clearInterval(o),o=null,B.value=!0,J(ke.value.length-1,{loading:!1}),t.updateIsChatIn(!1),m&&u.updateUserBanance(m),2===ke.value.length&&!(null==(a=null==Me?void 0:Me.value)?void 0:a.appId)){const e=ke.value[1].text.length>15?ke.value[1].text.slice(0,15):ke.value[1].text;await T.updateGroupInfo({groupId:+$e.value,title:e}),await T.queryMyGroup()}me()}}),16),await b({prompt:s,appId:Me.value?Me.value.appId:0,options:i,signal:v.signal,onDownloadProgress:({event:e})=>{var t;const a=e.target,{responseText:s}=a;if([1].includes(Re.value)){const e=s.lastIndexOf("\n",s.length-2);let t=s;-1!==e&&(t=s.substring(e));try{p=JSON.parse(t)}catch(l){console.log("parse data erro from openai: ",l,t),t.includes("OpenAI timed out waiting for response")&&(console.log("绘画超时了~"),x.warning("会话超时了、告知管理员吧~~~"))}}if([2,3].includes(Re.value)){const e=s.toString().split("\n").filter((e=>""!==e.trim()));let t="",a={};for(const s of e)try{const e=JSON.parse(s);t+=e.result,a=e}catch(l){console.log("Json parse 2 3 type error: ",s)}a.result=t,p=a}if([4].includes(Re.value)){const e=s.lastIndexOf("\n",s.length);let t=s;-1!==e&&(t=s.substring(e));try{p=JSON.parse(t)}catch(l){console.log("parse data error from xunfeizhipu: ",l,t),t.includes("xunfeizhipu timed out waiting for response")&&(console.log("绘画超时了~"),x.warning("会话超时了、告知管理员吧~~~"))}}try{if([1].includes(Re.value)&&(r=p.text,D.value=!p.is_end,(null==(t=null==p?void 0:p.detail)?void 0:t.usage)&&(B.value=p.is_end,m=null==p?void 0:p.userBanance)),[2,3].includes(Re.value)){const{result:e,is_end:t}=p;r=e,D.value=!t,(null==p?void 0:p.userBanance)&&(m=null==p?void 0:p.userBanance)}if([4].includes(Re.value)){const{text:e,is_end:t}=p;r=e,D.value=!t,(null==p?void 0:p.userBanance)&&(m=null==p?void 0:p.userBanance)}}catch(l){console.log(l)}}})};await e()}catch(g){console.log("chat error catch",g),t.updateIsChatIn(!1),clearInterval(o),D.value=!1,(402===g.code||(null==g?void 0:g.message.includes("余额不足"))||(null==g?void 0:g.message.includes("免费额度已经使用完毕")))&&t.updateVipDialog(!0);let e=(null==g?void 0:g.message)??l("common.wrong");if("Request failed with status code 401"===e&&(e="非法操作、请先登录后再进行问答使用！"),null==g?void 0:g.message.includes("canceled"))return J(ke.value.length-1,{loading:!1}),me(),void setTimeout((()=>{u.getUserBalance()}),200);const a=ke.value[ke.value.length-1];if((null==a?void 0:a.text)&&""!==a.text)return void J(ke.value.length-1,{text:`${"AI思考中"===a.text?"":a.text}\n[${e}]`,error:!1,loading:!1});V(ke.value.length-1,{dateTime:(new Date).toLocaleString(),text:e,inversion:!1,error:!0,loading:!1,conversationOptions:null,requestOptions:{prompt:s,options:{...i}}}),me()}finally{console.log("finally",Be.value),Be.value=!1,D.value=!1}}(a)}async function Ge(e){const t=+e;await k.replace({name:"Chat",query:{}});const a=T.groupList.find((e=>e.appId===t));var s;a?await T.setActiveGroup(a.uuid):(await T.addNewChatGroup(t),await T.queryMyGroup()),De.value&&(s=De.value,De.value=s,Ue())}function Oe(){if(Be.value)return;const e=f.warning({title:l("chat.exportImage"),content:l("chat.exportImageConfirm"),positiveText:l("common.yes"),negativeText:l("common.no"),onPositiveClick:async()=>{try{e.loading=!0;const t=document.getElementById("image-wrapper"),a=(await he(t,{useCORS:!0})).toDataURL("image/png"),s=document.createElement("a");return s.style.display="none",s.href=a,s.setAttribute("download","chat-shot.png"),void 0===s.download&&s.setAttribute("target","_blank"),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(a),e.loading=!1,x.success(l("chat.exportSuccess")),Promise.resolve(!0)}catch(t){x.error(l("chat.exportFailed"))}finally{e.loading=!1}}})}function Pe(){Be.value||f.create({title:l("chat.clearChat"),content:l("chat.clearChatConfirm"),positiveText:l("common.yes"),negativeText:l("common.no"),onPositiveClick:async()=>{await T.clearChatByGroupId(),x.success("删除当前页面对话完成")}})}function Ze(e){ue.value?"Enter"===e.key&&e.ctrlKey&&(e.preventDefault(),Ue()):"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Ue())}function He(){Be.value&&(v.abort(),Be.value=!1,D.value=!1,B.value=!0)}Q($e,(e=>{var t;e&&(ze.value=!0),Ee.value&&!ue.value&&(null==(t=Ee.value)||t.focus())}),{immediate:!0}),Q(ke,(e=>{0!==e.length&&ze.value&&(ze.value=!1,ve())}),{immediate:!0});const Ve=async e=>{if(e.id&&e.demoData)return De.value=e.demoData,await Ge(e.id),void(await T.updateChatTab("app"));De.value=""};Q(ce,(e=>{Ve(e),console.log(e)}));const Je=()=>{if(t.isChatIn)return x.warning("请等待聊天结束后修改模型信息！");t.updateModelDialog(!0)},Ke=$((()=>{if(!T.activeConfig)return;const{modelInfo:e}=T.activeConfig;return e?`${e.modelName}`:void 0}));H((async()=>{se.value&&await Ge(Number(se.value)),de.value&&await async function(e){u.setToken(e),await k.replace({name:"Chat",query:{}}),x.success("账户登录成功、开始体验吧！"),await u.getUserInfo()}(de.value),oe.value&&(oe.value.toLowerCase().includes("success")?(x.success("感谢你的购买、祝您使用愉快~",{duration:5e3}),u.getUserInfo(),k.replace({name:"Chat",query:{}})):x.error("您还没有购买成功哦~")),await Z((async()=>{var e;await T.queryActiveChatLogList(),await ve(),Ee.value&&!ue.value&&(null==(e=Ee.value)||e.focus())})),w(["dialogueTail"]).then((e=>{Fe.value=e.data}))}));const Qe=$((()=>"dark"===A.theme)),We=$((()=>t.recordDialog));W((()=>{Be.value&&v.abort()}));const Xe=$((()=>{if(ue.value)return["h-full"]})),Ye=$((()=>{if(!ue.value)return{height:"calc(100% - 60px)",width:"88%"}})),et=$((()=>ue.value?"tiny":"small"));function tt(e){F.value=e}function at(){k.push("/draw")}async function st(e){var t;let a={modelInfo:e};if("专业AI模型（ERNIE-Bot）"==JSON.parse(null==(t=Me.value)?void 0:t.config).modelInfo.modelName)Se();else{console.log(a);const e={groupId:$e.value,config:JSON.stringify(a)},t=await _(e);200==t.code?(await T.queryMyGroup(),Se()):x.error(t.data)}}ae();const lt=ae();return X((()=>{y().then((e=>{lt.value=e.data.modelMaps[1].filter((e=>1==e.canUpload))[0]}))})),(e,t)=>(R(),q("div",{class:ie(["flex w-full flex-col bg-[#f4f4f4] dark:bg-[#15171A]",te(Xe)]),style:ne(te(Ye))},[U(fe,{visible:te(We),onSubmit:Se},null,8,["visible"]),U(Ne,{"using-context":te(ge),"dark-mode":te(Qe),onExport:Oe,onToggleUsingContext:te(ye),onClear:Pe},null,8,["using-context","dark-mode","onToggleUsingContext"]),L("main",Kt,[L("div",{id:"scrollRef",class:ie([te(ke).length?"":"noData","relative h-full overflow-hidden overflow-y-auto scroll-smooth bg-[#fff] dark:bg-[#1A1D21] ml-6 mr-3"]),ref_key:"scrollRef",ref:pe,style:{"border-radius":"10px 10px 0 0"}},[L("div",{id:"image-wrapper",class:ie(["w-full max-w-screen-2xl m-auto h-full",[te(ue)?"":"p-4"]])},[te(ke).length?(R(),q("div",{key:1,class:ie(["max-w-full",[te(ue)?"px-1":""]]),style:{width:"100%"}},[(R(!0),q(O,null,P(te(ke),((e,t)=>(R(),N(te(Vt),{chatTail:Fe.value,key:e.chatId,"date-time":e.dateTime,text:e.text,inversion:e.inversion,error:e.error,loading:e.loading,onRegenerate:e=>Ue(t),onDelete:t=>function({chatId:e}){Be.value?x.warning("对话中，不可进行删除操作"):f.warning({title:l("chat.deleteMessage"),content:l("chat.deleteMessageConfirm"),positiveText:l("common.yes"),negativeText:l("common.no"),onPositiveClick:()=>{T.deleteChatById(e)}})}(e)},null,8,["chatTail","date-time","text","inversion","error","loading","onRegenerate","onDelete"])))),128)),L("div",ja,[Be.value?(R(),N(te(j),{key:0,onClick:He},{icon:G((()=>[U(te(d),{icon:"ri:stop-circle-line"})])),default:G((()=>[Y(" 停止输出 ")])),_:1})):S("",!0)]),L("div",{ref_key:"bottomContainer",ref:I,class:"bottom"},null,512)],2)):(R(),q("div",Qt,[Wt,L("div",Xt,[Yt,L("div",ea,[L("div",{class:ie(0==F.value?"item dark:bg-[#3B3B5C] bg-[#3378ED] text-[#fff]":"def_item"),onClick:t[0]||(t[0]=e=>tt(0))},[L("div",null,[U(te(d),{class:"mr-[10px]",icon:"simple-line-icons:paper-plane"})]),ta],2),L("div",{class:ie(1==F.value?"item dark:bg-[#3B3B5C] bg-[#3378ED] text-[#fff]":"def_item"),onClick:t[1]||(t[1]=e=>tt(1))},[L("div",null,[U(te(d),{class:"mr-[10px]",icon:"icon-park-outline:all-application"})]),aa],2)])]),0==F.value?(R(),q("div",sa,[la,L("div",ia,[L("div",na,[oa,L("div",{class:"item_btn dark:bg-[#2E2E4C] bg-[#fff] border-[2px] border-[#3378ED] dark:border-[transparent] text-[#3378ED] dark:text-[#85858B]",onClick:t[2]||(t[2]=e=>st(lt.value))},"上传文件"),ra,L("div",da,[lt.value?(R(),q("div",ca,le(lt.value.modelName),1)):S("",!0)])]),L("div",{class:"item",onClick:at},ua),L("div",pa,[va,L("div",{class:"item_btn dark:bg-[#2E2E4C] bg-[#fff] border-[2px] border-[#3378ED] dark:border-[transparent] text-[#3378ED] dark:text-[#85858B]",onClick:t[3]||(t[3]=e=>st(lt.value))},"上传文件"),ma,L("div",ga,[lt.value?(R(),q("div",fa,le(lt.value.modelName),1)):S("",!0)])])])])):(R(),q("div",xa,[ha,L("div",ya,[ba,L("div",ka,[L("div",{class:"tag dark:bg-[#2E2E4C] bg-[#E7E7E7]",onClick:t[4]||(t[4]=e=>te(m).updateAppCenterDialog(!0))},[L("div",null,[U(te(d),{class:"text-[15px] mr-[4px]",icon:"icon-park-outline:application"})]),wa]),L("div",{class:"tag dark:bg-[#2E2E4C] bg-[#E7E7E7]",onClick:t[5]||(t[5]=e=>te(m).updateAppDialog(!0))},[L("div",null,[U(te(d),{class:"text-xl",icon:"material-symbols-light:add"})]),_a])])]),L("div",Ca,[U(rt,{onRunApp:Ve,onClick:t[6]||(t[6]=e=>tt(1))})])]))]))],2)],2)]),0==F.value?(R(),q("footer",Aa,[L("div",{style:{"padding-right":"6%","padding-left":"6%"},class:ie(["m-auto",te(ue)?"px-0 pt-1":"px-4 py-2"])},[L("div",Ia,[L("div",{class:ie(["flex mb-1 items-center",["max-w-screen-2xl",te(ue)?"px-1":""]])},[te(we)?(R(),N(te(j),{key:0,size:te(et),onClick:t[7]||(t[7]=e=>Se(1)),style:{diplay:"block","margin-right":"12px","border-radius":"8px"},class:"bg-[#f4f4f4] dark:bg-[#282848]"},{default:G((()=>[L("span",Ta,[U(te(d),{class:ie(["text-xl",[te(ue)?"":"mr-0.5"]]),style:{width:"0.8em",height:"0.8em"},icon:"line-md:cloud-up"},null,8,["class"]),te(ue)?S("",!0):(R(),q("span",Da,"上传"))])])),_:1},8,["size"])):S("",!0),te(_e)?(R(),N(te(j),{key:1,size:te(et),onClick:Le,round:"",style:{diplay:"block","margin-right":"0.4rem"},class:"bg-[#f4f4f4] dark:bg-[#282848]"},{default:G((()=>[L("span",Ba,[U(te(d),{class:ie(["text-lg",[te(ue)?"":"mr-0.5"]]),style:{width:"0.8em",height:"0.8em"},icon:"streamline:voice-mail"},null,8,["class"]),te(ue)?S("",!0):(R(),q("span",Ea,"语音助手"))])])),_:1},8,["size"])):S("",!0),U(te(z),{trigger:"hover",disabled:te(ue)},{trigger:G((()=>[L("button",{style:{"border-radius":"8px"},onClick:Je,class:ie([[te(ue)?"px-1 scale-75":"px-3"],"mr-2 py-1 bg-gradient-to-r from-[#3076ED] to-[#54A2F5] hover:bg-gradient-to-r"])},[L("span",za,[U(te(d),{class:"text-lg text-white",style:{width:"0.8em",height:"0.8em"},icon:"carbon:model"}),L("span",Fa,le(te(Ke)),1)])],2)])),default:G((()=>[Y(" 模型切换 ")])),_:1},8,["disabled"])],2),L("div",$a,[U(te(z),{trigger:"hover",disabled:te(ue)},{trigger:G((()=>[U(te(j),{size:"small",round:"",onClick:Pe,style:{"border-radius":"8px"},class:"dark:bg-[#282848] bg-[#f4f4f4]"},{default:G((()=>[L("span",Ma,[Ra,U(te(d),{class:"text-xl ml-0.5",style:{width:"0.8em",height:"0.8em"},icon:"akar-icons:trash-can"})])])),_:1})])),default:G((()=>[Y(" 清空聊天记录 ")])),_:1},8,["disabled"])])]),L("div",qa,[L("div",La,[ee(L("textarea",{ref_key:"inputRef",ref:Ee,"onUpdate:modelValue":t[8]||(t[8]=e=>De.value=e),placeholder:"你可以问我任何问题",style:{height:"100px",width:"100%",resize:"none","border-radius":"8px"},onKeypress:Ze,class:"bg-[#f4f4f4] dark:bg-[#15171A] pt-4 pb-10 pl-5 pr-5"},"\n\n\t\t\t\t\t\t\t",544),[[a,De.value]]),L("div",Na,[L("div",Sa,[L("div",Ua,[U(te(j),{class:"sendBtn",type:"primary",size:"small",disabled:te(qe),round:"",onClick:Ue},{default:G((()=>[Ga,U(te(d),{icon:"icon-park-outline:send"})])),_:1},8,["disabled"])])])])])])],2),te(ue)?S("",!0):(R(),N(xe,{key:0,class:"footer-copyright-bar"}))])):S("",!0)],6))}}),[["__scopeId","data-v-f06c0532"]]),Pa={class:"h-full dark:bg-[#131323] transition-all"},Za=v(M({__name:"chat",setup(t){const a=n(),l=s(),o=i(),{isMobile:d}=r(),c=$((()=>o.isLogin));$((()=>a.siderCollapsed)),Q(c,(async(e,t)=>{e&&!t&&await l.queryMyGroup()}));const u=$((()=>d.value?["rounded-none","shadow-none"]:["rounded-md","shadow-md","dark:border-neutral-800"]));return(t,a)=>(R(),q("div",Pa,[L("div",{class:ie(["h-full overflow-hidden",te(u)])},[U(te(F),{class:"z-40 transition w-full h-full","has-sider":!0,"sider-placement":"left"},{default:G((()=>[U(e,{class:"h-full"}),U(Oa)])),_:1})],2)]))}}),[["__scopeId","data-v-572a5934"]]);export{Za as default};
