import{l as e,a as t,_ as i,b as s,d as r,e as a,g as l,f as o}from"./music.7fff5f83.js";import{_ as n,a as c,b as u,c as p,d}from"../unthumbs1/unthumbs1.60163221.js";import{S as m}from"../index/index.bf6210d7.js";import{d as v,L as g,_ as f,h as _}from"../main-bb4220d0.js";import{u as h}from"../vue-router@4.1.6_vue@3.2.47/vue-router@4.1.6_vue@3.2.47.018c715a.js";import{a as x}from"../axios@1.4.0/axios@1.4.0.5ae1da96.js";import{d as y,a as j,R as k,b,c as C,M as I,F as w,Q as A,t as E,S as F,U as B,o as O}from"../@vue_runtime-core@3.2.47/@vue_runtime-core@3.2.47.e62b9a68.js";import{e as U}from"../naive-ui@2.34.3_vue@3.2.47/naive-ui@2.34.3_vue@3.2.47.d79924d9.js";import{r as L,x as N}from"../@vue_reactivity@3.2.47/@vue_reactivity@3.2.47.859737a0.js";import{J as q}from"../@vue_shared@3.2.47/@vue_shared@3.2.47.9d8e617e.js";import"../@vue_runtime-dom@3.2.47/@vue_runtime-dom@3.2.47.298398d5.js";import"../v-viewer@3.0.11_vue@3.2.47/v-viewer@3.0.11_vue@3.2.47.a81e5850.js";import"../viewerjs@1.11.3/viewerjs@1.11.3.a76d4126.js";import"../clientjs@0.2.1/clientjs@0.2.1.7f53d864.js";import"../@babel_runtime@7.21.5/@babel_runtime@7.21.5.35f69bd2.js";import"../crypto-js@4.1.1/crypto-js@4.1.1.7142fa56.js";import"../@iconify_vue@4.1.1_vue@3.2.47/@iconify_vue@4.1.1_vue@3.2.47.612da1cd.js";import"../pinia@2.0.35_typescript@4.9.5_vue@3.2.47/pinia@2.0.35_typescript@4.9.5_vue@3.2.47.1425f1b3.js";import"../vue-demi@0.14.7_vue@3.2.47/vue-demi@0.14.7_vue@3.2.47.71ba0ef2.js";import"../vue-i18n@9.2.2_vue@3.2.47/vue-i18n@9.2.2_vue@3.2.47.f7da0a53.js";import"../@intlify_shared@9.2.2/@intlify_shared@9.2.2.76c1dc14.js";import"../@intlify_core-base@9.2.2/@intlify_core-base@9.2.2.72ca16dd.js";import"../@intlify_message-compiler@9.2.2/@intlify_message-compiler@9.2.2.9b2b247d.js";import"../@intlify_devtools-if@9.2.2/@intlify_devtools-if@9.2.2.1be0989c.js";import"../vooks@0.2.12_vue@3.2.47/vooks@0.2.12_vue@3.2.47.89d56bd5.js";import"../evtd@0.2.4/evtd@0.2.4.2789e4a1.js";import"../katex@0.16.7/katex@0.16.7.43835b5c.js";import"../@vueuse_core@9.13.0_vue@3.2.47/@vueuse_core@9.13.0_vue@3.2.47.770e5818.js";import"../@vueuse_shared@9.13.0_vue@3.2.47/@vueuse_shared@9.13.0_vue@3.2.47.58cbe97f.js";import"../mitt@3.0.1/mitt@3.0.1.f0e54764.js";import"../@vicons_ionicons5@0.12.0/@vicons_ionicons5@0.12.0.5fe57882.js";import"../marked@4.3.0/marked@4.3.0.cb1ff4ec.js";import"../date-fns@2.30.0/date-fns@2.30.0.bcce45e8.js";import"../vue-clipboard3@2.0.0/vue-clipboard3@2.0.0.ebf9d56c.js";import"../clipboard@2.0.11/clipboard@2.0.11.6a7b8915.js";import"../@vueuse_integrations@10.2.0_axios@1.4.0_qrcode@1.5.3_vue@3.2.47/@vueuse_integrations@10.2.0_axios@1.4.0_qrcode@1.5.3_vue@3.2.47.a70167c7.js";import"../@vueuse_shared@10.2.0_vue@3.2.47/@vueuse_shared@10.2.0_vue@3.2.47.3d57d69b.js";import"../qrcode@1.5.3/qrcode@1.5.3.ae99ec0a.js";import"../encode-utf8@1.0.3/encode-utf8@1.0.3.2ec93547.js";import"../dijkstrajs@1.0.3/dijkstrajs@1.0.3.38d0b2a1.js";import"../seemly@0.3.6/seemly@0.3.6.21da59ee.js";import"../vueuc@0.4.51_vue@3.2.47/vueuc@0.4.51_vue@3.2.47.ce1cbfa6.js";import"../@css-render_vue3-ssr@0.15.12_vue@3.2.47/@css-render_vue3-ssr@0.15.12_vue@3.2.47.e49104bd.js";import"../vdirs@0.1.8_vue@3.2.47/vdirs@0.1.8_vue@3.2.47.bf970686.js";import"../@juggle_resize-observer@3.4.0/@juggle_resize-observer@3.4.0.80d14552.js";import"../css-render@0.15.12/css-render@0.15.12.af3f05a4.js";import"../@emotion_hash@0.8.0/@emotion_hash@0.8.0.b17c1a96.js";import"../lodash-es@4.17.21/lodash-es@4.17.21.6a776102.js";import"../treemate@0.3.11/treemate@0.3.11.05d63ee5.js";import"../async-validator@4.2.5/async-validator@4.2.5.8d480e59.js";import"../@css-render_plugin-bem@0.15.12_css-render@0.15.12/@css-render_plugin-bem@0.15.12_css-render@0.15.12.0c2c3e5c.js";const T=e=>(F("data-v-4ef1625d"),e=e(),B(),e),R={class:"bg-[#f4f4f4] dark:bg-[#020104] musicBody"},z={key:1,class:"videoBox"},M={style:{width:"504px",height:"756px","border-radius":"8px",position:"relative"},class:"bg-[#E5EDFE] dark:bg-[#0A182F]"},D=["src"],S={class:"control"},J={class:"myCreate bg-[#fff] dark:bg-[#15171A]"},Q={class:"myCreateTop"},V=T((()=>b("div",{style:{"margin-left":"4px"}},"我的创作",-1))),G=T((()=>b("div",{style:{width:"100%",height:"2px"},class:"bg-[#fff] dark:bg-[#010102]"},null,-1))),H={class:"myCreateMain"},K={class:"mainLeft"},P=["onClick","src"],W={key:1,style:{width:"108px",height:"108px","border-radius":"8px"},src:d,alt:""},X={class:"itemInfo"},Y={class:"info"},Z=T((()=>b("div",{style:{width:"30px",height:"18px","border-radius":"16px","text-align":"center",color:"#34C759"},class:"bg-[#EBF9EE] dark:bg-[#175A28]"},"V3",-1))),$={style:{margin:"6px 0"}},ee={class:"operation"},te=["onClick"],ie=["onClick"],se=["onClick"],re=["onClick"],ae={class:"iconBox",style:{position:"relative"}},le={key:0,class:"operationBox bg-[#fff] dark:bg-[#15171A]"},oe=["onClick"],ne=T((()=>b("div",null,"下载视频",-1))),ce=["onClick"],ue=T((()=>b("div",null,"下载音频",-1))),pe={class:"end text-[#A3A5A6] dark:text-[#76777A]"},de=["href"],me=["href"],ve=_(y({__name:"myCenter",setup(d){let _=null;const y=U();h();const{isMobile:F}=v(),B=L();e({page:1,size:999}).then((e=>{const{records:t}=e.data;let i=t.filter((e=>e.text));console.log(1,i);let s=i.filter((e=>-1!=e.text.indexOf("http")&&-1!=e.text.indexOf("Chorus")||-1!=e.text.indexOf("生成中")));console.log(s);for(let r=0;r<s.length;r++)if(-1!=s[r].text.indexOf("http")&&-1!=s[r].text.indexOf("Chorus")){let e=s[r].text.split("🎵")[1].split("\n")[0],t=s[r].text.split("🎵")[1].split("[Chorus]")[1].split("[")[0];-1!=t.indexOf("mv")&&(t=t.split("mv")[0]);let i=s[r].text.split("🎵").pop().split("!")[1];s[r].image=i.split("](")[1].split(")")[0],s[r].mp3=i.split("](")[2].split(")")[0],s[r].mp4=i.split("](")[3].split(")")[0],s[r].title=e,s[r].intro=t,s[r].operation=!1}else s[r].image=null,s[r].mp3=null,s[r].mp4=null;B.value=s,console.log(B.value)}));const T=L(""),ve=L(""),ge=L(""),fe=L(""),_e=L("");t({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{T.value=e.data.copyrightTitle,ve.value=e.data.icpNumber,ge.value=e.data.policeFilingNumber,fe.value=e.data.icpUrl,_e.value=e.data.policeFilingUrl}));const he=L(1);function xe(e,t){if(0==t){let t={chatLogId:e.chatId,action:"agree",type:"music"};if(0==he.value)return;he.value=0,l(t).then((t=>{"agree"==e.agree?B.value.forEach((t=>{t.chatId==e.chatId&&(t.agree=null,t.agreeNum--)})):(null==e.agree||"disAgree"==e.agree)&&B.value.forEach((t=>{t.chatId==e.chatId&&(t.agree="agree",t.agreeNum++)})),he.value=1}))}else if(1==t){let t={chatLogId:e.chatId,action:"disAgree",type:"music"};if(0==he.value)return;he.value=0,l(t).then((t=>{console.log(B.value),"agree"==e.agree?B.value.forEach((t=>{t.chatId==e.chatId&&(t.agree="disAgree",t.agreeNum--)})):null==e.agree?B.value.forEach((t=>{t.chatId==e.chatId&&(t.agree="disAgree")})):"disAgree"==e.agree&&B.value.forEach((t=>{t.chatId==e.chatId&&(t.agree="null")})),he.value=1}))}}const ye=L(!1);function je(){_&&(_.destroy(),_=null)}function ke(e,t){let i="/api";if(_||(_=y.loading("下载中，请稍等",{duration:0})),"mp4"==t){let t=e.mp4.split("/").pop();Ae(),x.get(i+"/proxy/down",{responseType:"blob",params:{url:e.mp4}}).then((e=>{const i=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=i,s.setAttribute("download",t),s.click(),je(),y.success("下载成功")}))}else if("mp3"==t){let t=e.mp3.split("/").pop();Ae(),x.get(i+"/proxy/down",{responseType:"blob",params:{url:e.mp3}}).then((e=>{const i=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=i,s.setAttribute("download",t),s.click(),je(),y.success("下载成功")}))}}const be=L(""),Ce=L(!0);function Ie(){const e=document.getElementById("video");Ce.value?(Ce.value=!1,e.pause()):(Ce.value=!0,e.play())}function we(e){let t=[];B.value.filter((e=>null!=e.mp4)).forEach((e=>{t=[...t,e.mp4]}));let i=t.indexOf(be.value);if(0==e){if(0==i)return;i--,be.value=t[i]}else if(1==e){if(i==t.length-1)return;i++,be.value=t[i]}console.log(i)}function Ae(){ye.value=!1,B.value.forEach((e=>{e.operation=!1}))}return(e,t)=>(O(),j("div",R,[ye.value?(O(),j("div",{key:0,class:"mask",onClick:Ae})):k("",!0),be.value?(O(),j("div",z,[b("div",M,[C(g)]),b("video",{class:"video",autoplay:"",id:"video",loop:"",src:be.value},null,8,D),C(N(f),{icon:"icon-park-solid:close-one",class:"text-xl text-[#fff] text-center icon",onClick:t[0]||(t[0]=e=>be.value="")}),b("div",S,[b("img",{class:"controlItem",style:{cursor:"pointer"},src:i,alt:"",onClick:t[1]||(t[1]=e=>we(0))}),Ce.value?(O(),j("img",{key:0,class:"controlItem",src:s,style:{margin:"0 50px",cursor:"pointer"},alt:"",onClick:Ie})):k("",!0),Ce.value?k("",!0):(O(),j("img",{key:1,class:"controlItem",src:r,style:{margin:"0 50px",cursor:"pointer"},alt:"",onClick:Ie})),b("img",{class:"controlItem",style:{cursor:"pointer"},src:a,alt:"",onClick:t[2]||(t[2]=e=>we(1))})])])):k("",!0),N(F)?k("",!0):(O(),I(m,{key:2,sideType:1})),b("div",J,[b("div",Q,[C(N(f),{icon:"icomoon-free:file-music",class:"text-xl text-center"}),V]),G,b("div",H,[b("div",K,[(O(!0),j(w,null,A(B.value,((e,t)=>(O(),j("div",{class:"mainItem dark:bg-[#0A182F] bg-[#F5F8FE]",key:t},[e.image?(O(),j("img",{key:0,style:{width:"108px",height:"108px","border-radius":"8px"},onClick:t=>function(e){be.value=e.mp4;let t={recoredId:e.chatId};e.playNum++,o(t).then((e=>{console.log(e)}))}(e),src:e.image,alt:""},null,8,P)):k("",!0),e.image?k("",!0):(O(),j("img",W)),b("div",X,[b("div",Y,[Z,b("div",$,q(e.title?e.title:"匿名"),1),b("div",null,q(e.intro),1)]),b("div",ee,["agree"!=e.agree?(O(),j("img",{key:0,class:"icon",onClick:t=>xe(e,0),src:n,alt:""},null,8,te)):k("",!0),"agree"==e.agree?(O(),j("img",{key:1,class:"icon",onClick:t=>xe(e,0),src:c,alt:""},null,8,ie)):k("",!0),"disAgree"!=e.agree?(O(),j("img",{key:2,class:"icon",onClick:t=>xe(e,1),src:u,alt:""},null,8,se)):k("",!0),"disAgree"==e.agree?(O(),j("img",{key:3,class:"icon",onClick:t=>xe(e,1),src:p,alt:""},null,8,re)):k("",!0),b("div",ae,[C(N(f),{icon:"ri:more-line",class:"text-xl text-center icon",onClick:t=>function(e){e.operation=!0,ye.value=!0}(e)},null,8,["onClick"]),e.operation?(O(),j("div",le,[b("div",{class:"operationItem",style:{display:"flex"},onClick:t=>ke(e,"mp4")},[C(N(f),{icon:"gravity-ui:video",style:{"margin-right":"5px"},class:"text-xl text-center"}),ne],8,oe),b("div",{class:"operationItem",style:{display:"flex"},onClick:t=>ke(e,"mp3")},[C(N(f),{icon:"fluent:headphones-sound-wave-24-filled",style:{"margin-right":"5px"},class:"text-xl text-center"}),ue],8,ce)])):k("",!0)])])])])))),128))])]),b("div",pe,[E("版权所有 © "+q(T.value)+" ",1),b("a",{href:fe.value||"#"},[b("a",{href:_e.value||"#"},q(ge.value),9,me),E(q(ve.value),1)],8,de)])])]))}}),[["__scopeId","data-v-4ef1625d"]]);export{ve as default};
