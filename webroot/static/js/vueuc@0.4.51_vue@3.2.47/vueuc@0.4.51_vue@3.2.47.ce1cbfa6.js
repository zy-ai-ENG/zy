import{t,F as e,C as o,d as r,D as n,g as l,i as s,x as i,G as a,n as u,h as d,T as c,p as f,m as h,q as p,K as v,z as m,A as g,E as b}from"../@vue_runtime-core@3.2.47/@vue_runtime-core@3.2.47.e62b9a68.js";import{a as y,o as w}from"../evtd@0.2.4/evtd@0.2.4.2789e4a1.js";import{j as x,d as S,p as $,e as T,g as M}from"../seemly@0.3.6/seemly@0.3.6.21da59ee.js";import{r as z,l as R}from"../@vue_reactivity@3.2.47/@vue_reactivity@3.2.47.859737a0.js";import{u as E}from"../@css-render_vue3-ssr@0.15.12_vue@3.2.47/@css-render_vue3-ssr@0.15.12_vue@3.2.47.e49104bd.js";import{d as B,u as F,o as L,i as A}from"../vooks@0.2.12_vue@3.2.47/vooks@0.2.12_vue@3.2.47.89d56bd5.js";import{z as I}from"../vdirs@0.1.8_vue@3.2.47/vdirs@0.1.8_vue@3.2.47.bf970686.js";import{R as k}from"../@juggle_resize-observer@3.4.0/@juggle_resize-observer@3.4.0.80d14552.js";import{C as W}from"../css-render@0.15.12/css-render@0.15.12.af3f05a4.js";function N(t,e,o="default"){const r=e[o];if(void 0===r)throw new Error(`[vueuc/${t}]: slot[${o}] is empty.`);return r()}function j(r,n=!0,l=[]){return r.forEach((r=>{if(null!==r)if("object"==typeof r)if(Array.isArray(r))j(r,n,l);else if(r.type===e){if(null===r.children)return;Array.isArray(r.children)&&j(r.children,n,l)}else r.type!==o&&l.push(r);else"string"!=typeof r&&"number"!=typeof r||l.push(t(String(r)))})),l}function X(t,e,o="default"){const r=e[o];if(void 0===r)throw new Error(`[vueuc/${t}]: slot[${o}] is empty.`);const n=j(r());if(1===n.length)return n[0];throw new Error(`[vueuc/${t}]: slot[${o}] should have exactly one child.`)}let Y=null;function H(){if(null===Y&&(Y=document.getElementById("v-binder-view-measurer"),null===Y)){Y=document.createElement("div"),Y.id="v-binder-view-measurer";const{style:t}=Y;t.position="fixed",t.left="0",t.right="0",t.top="0",t.bottom="0",t.pointerEvents="none",t.visibility="hidden",document.body.appendChild(Y)}return Y.getBoundingClientRect()}function C(t){const e=t.getBoundingClientRect(),o=H();return{left:e.left-o.left,top:e.top-o.top,bottom:o.height+o.top-e.bottom,right:o.width+o.left-e.right,width:e.width,height:e.height}}function O(t){if(null===t)return null;const e=function(t){return 9===t.nodeType?null:t.parentNode}(t);if(null===e)return null;if(9===e.nodeType)return document;if(1===e.nodeType){const{overflow:t,overflowX:o,overflowY:r}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+r+o))return e}return O(e)}const _=r({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(t){var e;n("VBinder",null===(e=l())||void 0===e?void 0:e.proxy);const o=s("VBinder",null),r=z(null);let a=[];const u=()=>{for(const t of a)y("scroll",t,c,!0);a=[]},d=new Set,c=()=>{x(f)},f=()=>{d.forEach((t=>t()))},h=new Set,p=()=>{h.forEach((t=>t()))};return i((()=>{y("resize",window,p),u()})),{targetRef:r,setTargetRef:e=>{r.value=e,o&&t.syncTargetWithParent&&o.setTargetRef(e)},addScrollListener:t=>{0===d.size&&(()=>{let t=r.value;for(;t=O(t),null!==t;)a.push(t);for(const e of a)w("scroll",e,c,!0)})(),d.has(t)||d.add(t)},removeScrollListener:t=>{d.has(t)&&d.delete(t),0===d.size&&u()},addResizeListener:t=>{0===h.size&&w("resize",window,p),h.has(t)||h.add(t)},removeResizeListener:t=>{h.has(t)&&h.delete(t),0===h.size&&y("resize",window,p)}}},render(){return N("binder",this.$slots)}}),P=r({name:"Target",setup(){const{setTargetRef:t,syncTarget:e}=s("VBinder");return{syncTarget:e,setTargetDirective:{mounted:t,updated:t}}},render(){const{syncTarget:t,setTargetDirective:e}=this;return t?a(X("follower",this.$slots),[[e]]):X("follower",this.$slots)}});function D(t,e){console.error(`[vueuc/${t}]: ${e}`)}const{c:V}=W(),q="vueuc-style";function U(t){return t&-t}class K{constructor(t,e){this.l=t,this.min=e;const o=new Array(t+1);for(let r=0;r<t+1;++r)o[r]=0;this.ft=o}add(t,e){if(0===e)return;const{l:o,ft:r}=this;for(t+=1;t<=o;)r[t]+=e,t+=U(t)}get(t){return this.sum(t+1)-this.sum(t)}sum(t){if(void 0===t&&(t=this.l),t<=0)return 0;const{ft:e,min:o,l:r}=this;if(t>r)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let n=t*o;for(;t>0;)n+=e[t],t-=U(t);return n}getBound(t){let e=0,o=this.l;for(;o>e;){const r=Math.floor((e+o)/2),n=this.sum(r);if(n>t)o=r;else{if(!(n<t))return r;if(e===r)return this.sum(e+1)<=t?e+1:r;e=r}}return e}}function G(t){return"string"==typeof t?document.querySelector(t):t()}const J=r({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup:t=>({showTeleport:B(R(t,"show")),mergedTo:u((()=>{const{to:e}=t;return null!=e?e:"body"}))}),render(){return this.showTeleport?this.disabled?N("lazy-teleport",this.$slots):d(c,{disabled:this.disabled,to:this.mergedTo},N("lazy-teleport",this.$slots)):null}}),Q={top:"bottom",bottom:"top",left:"right",right:"left"},Z={start:"end",center:"center",end:"start"},tt={top:"height",bottom:"height",left:"width",right:"width"},et={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},ot={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},rt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},nt={top:!0,bottom:!1,left:!0,right:!1},lt={top:"end",bottom:"start",left:"end",right:"start"};const st=V([V(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),V(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[V("> *",{pointerEvents:"all"})])]),it=r({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(t){const e=s("VBinder"),o=F((()=>void 0!==t.enabled?t.enabled:t.show)),r=z(null),n=z(null),l=()=>{const{syncTrigger:o}=t;o.includes("scroll")&&e.addScrollListener(d),o.includes("resize")&&e.addResizeListener(d)},a=()=>{e.removeScrollListener(d),e.removeResizeListener(d)};f((()=>{o.value&&(d(),l())}));const u=E();st.mount({id:"vueuc/binder",head:!0,anchorMetaName:q,ssr:u}),i((()=>{a()})),L((()=>{o.value&&d()}));const d=()=>{if(!o.value)return;const l=r.value;if(null===l)return;const s=e.targetRef,{x:i,y:a,overlap:u}=t,d=void 0!==i&&void 0!==a?function(t,e){const o=H();return{top:e,left:t,height:0,width:0,right:o.width-t,bottom:o.height-e}}(i,a):C(s);l.style.setProperty("--v-target-width",`${Math.round(d.width)}px`),l.style.setProperty("--v-target-height",`${Math.round(d.height)}px`);const{width:c,minWidth:f,placement:h,internalShift:p,flip:v}=t;l.setAttribute("v-placement",h),u?l.setAttribute("v-overlap",""):l.removeAttribute("v-overlap");const{style:m}=l;m.width="target"===c?`${d.width}px`:void 0!==c?c:"",m.minWidth="target"===f?`${d.width}px`:void 0!==f?f:"";const g=C(l),b=C(n.value),{left:y,top:w,placement:x}=function(t,e,o,r,n,l){if(!n||l)return{placement:t,top:0,left:0};const[s,i]=t.split("-");let a=null!=i?i:"center",u={top:0,left:0};const d=(t,n,l)=>{let s=0,i=0;const a=o[t]-e[n]-e[t];return a>0&&r&&(l?i=nt[n]?a:-a:s=nt[n]?a:-a),{left:s,top:i}},c="left"===s||"right"===s;if("center"!==a){const r=rt[t],n=Q[r],l=tt[r];if(o[l]>e[l]){if(e[r]+e[l]<o[l]){const t=(o[l]-e[l])/2;e[r]<t||e[n]<t?e[r]<e[n]?(a=Z[i],u=d(l,n,c)):u=d(l,r,c):a="center"}}else o[l]<e[l]&&e[n]<0&&e[r]>e[n]&&(a=Z[i])}else{const t="bottom"===s||"top"===s?"left":"top",r=Q[t],n=tt[t],l=(o[n]-e[n])/2;(e[t]<l||e[r]<l)&&(e[t]>e[r]?(a=lt[t],u=d(n,t,c)):(a=lt[r],u=d(n,r,c)))}let f=s;return e[s]<o[tt[s]]&&e[s]<e[Q[s]]&&(f=Q[s]),{placement:"center"!==a?`${f}-${a}`:f,left:u.left,top:u.top}}(h,d,g,p,v,u),S=function(t,e){return e?ot[t]:et[t]}(x,u),{left:$,top:T,transform:M}=function(t,e,o,r,n,l){if(l)switch(t){case"bottom-start":case"left-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":case"right-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":case"left-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left)}px`,transform:""};case"top-end":case"right-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%)"};case"top":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(o.top-e.top+o.height/2)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(o.top-e.top+o.height/2)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateY(-50%)"};default:return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(t){case"bottom-start":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:""};case"bottom-end":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:""};case"right-end":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+o.width/2+n)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(o.top-e.top+o.height/2+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(o.top-e.top+o.height/2+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateY(-50%) translateX(-100%)"};default:return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+o.width/2+n)}px`,transform:"translateX(-50%)"}}}(x,b,d,w,y,u);l.setAttribute("v-placement",x),l.style.setProperty("--v-offset-left",`${Math.round(y)}px`),l.style.setProperty("--v-offset-top",`${Math.round(w)}px`),l.style.transform=`translateX(${$}) translateY(${T}) ${M}`,l.style.setProperty("--v-transform-origin",S),l.style.transformOrigin=S};h(o,(t=>{t?(l(),c()):a()}));const c=()=>{p().then(d).catch((t=>console.error(t)))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach((e=>{h(R(t,e),d)})),["teleportDisabled"].forEach((e=>{h(R(t,e),c)})),h(R(t,"syncTrigger"),(t=>{t.includes("resize")?e.addResizeListener(d):e.removeResizeListener(d),t.includes("scroll")?e.addScrollListener(d):e.removeScrollListener(d)}));const v=A(),m=F((()=>{const{to:e}=t;if(void 0!==e)return e;v.value}));return{VBinder:e,mergedEnabled:o,offsetContainerRef:n,followerRef:r,mergedTo:m,syncPosition:d}},render(){return d(J,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var t,e;const o=d("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[d("div",{class:"v-binder-follower-content",ref:"followerRef"},null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t))]);return this.zindexable?a(o,[[I,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):o}})}});const at=new class{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new("undefined"!=typeof window&&window.ResizeObserver||k)(this.handleResize),this.elHandlersMap=new Map}handleResize(t){for(const e of t){const t=this.elHandlersMap.get(e.target);void 0!==t&&t(e)}}registerHandler(t,e){this.elHandlersMap.set(t,e),this.observer.observe(t)}unregisterHandler(t){this.elHandlersMap.has(t)&&(this.elHandlersMap.delete(t),this.observer.unobserve(t))}},ut=r({name:"ResizeObserver",props:{onResize:Function},setup(t){let e=!1;const o=l().proxy;function r(e){const{onResize:o}=t;void 0!==o&&o(e)}f((()=>{const t=o.$el;void 0!==t?t.nextElementSibling===t.nextSibling||3!==t.nodeType||""===t.nodeValue?null!==t.nextElementSibling&&(at.registerHandler(t.nextElementSibling,r),e=!0):D("resize-observer","$el can not be observed (it may be a text node)."):D("resize-observer","$el does not exist.")})),i((()=>{e&&at.unregisterHandler(o.$el.nextElementSibling)}))},render(){return v(this.$slots,"default")}});let dt,ct;function ft(){return void 0===ct&&(ct="chrome"in window?window.devicePixelRatio:1),ct}const ht=V(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[V("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[V("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),pt=r({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(t){const e=E();ht.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:q,ssr:e}),f((()=>{const{defaultScrollIndex:e,defaultScrollKey:o}=t;null!=e?b({index:e}):null!=o&&b({key:o})}));let o=!1,r=!1;m((()=>{o=!1,r?b({top:h.value,left:c}):r=!0})),g((()=>{o=!0,r||(r=!0)}));const n=u((()=>{const e=new Map,{keyField:o}=t;return t.items.forEach(((t,r)=>{e.set(t[o],r)})),e})),l=z(null),s=z(void 0),i=new Map,a=u((()=>{const{items:e,itemSize:o,keyField:r}=t,n=new K(e.length,o);return e.forEach(((t,e)=>{const o=t[r],l=i.get(o);void 0!==l&&n.add(e,l)})),n})),d=z(0);let c=0;const h=z(0),p=F((()=>Math.max(a.value.getBound(h.value-S(t.paddingTop))-1,0))),v=u((()=>{const{value:e}=s;if(void 0===e)return[];const{items:o,itemSize:r}=t,n=p.value,l=Math.min(n+Math.ceil(e/r+1),o.length-1),i=[];for(let t=n;t<=l;++t)i.push(o[t]);return i})),b=(t,e)=>{if("number"==typeof t)return void M(t,e,"auto");const{left:o,top:r,index:l,key:s,position:i,behavior:a,debounce:u=!0}=t;if(void 0!==o||void 0!==r)M(o,r,a);else if(void 0!==l)T(l,a,u);else if(void 0!==s){const t=n.value.get(s);void 0!==t&&T(t,a,u)}else"bottom"===i?M(0,Number.MAX_SAFE_INTEGER,a):"top"===i&&M(0,0,a)};let y,w=null;function T(e,o,r){const{value:n}=a,s=n.sum(e)+S(t.paddingTop);if(r){y=e,null!==w&&window.clearTimeout(w),w=window.setTimeout((()=>{y=void 0,w=null}),16);const{scrollTop:t,offsetHeight:r}=l.value;if(s>t){const i=n.get(e);s+i<=t+r||l.value.scrollTo({left:0,top:s+i-r,behavior:o})}else l.value.scrollTo({left:0,top:s,behavior:o})}else l.value.scrollTo({left:0,top:s,behavior:o})}function M(t,e,o){l.value.scrollTo({left:t,top:e,behavior:o})}const R=(void 0===dt&&(dt="matchMedia"in window&&window.matchMedia("(pointer:coarse)").matches),!dt);let B=!1;function L(){const{value:t}=l;null!=t&&(h.value=t.scrollTop,c=t.scrollLeft)}function A(t){let e=t;for(;null!==e;){if("none"===e.style.display)return!0;e=e.parentElement}return!1}return{listHeight:s,listStyle:{overflow:"auto"},keyToIndex:n,itemsStyle:u((()=>{const{itemResizable:e}=t,o=$(a.value.sum());return d.value,[t.itemsStyle,{boxSizing:"content-box",height:e?"":o,minHeight:e?o:"",paddingTop:$(t.paddingTop),paddingBottom:$(t.paddingBottom)}]})),visibleItemsStyle:u((()=>(d.value,{transform:`translateY(${$(a.value.sum(p.value))})`}))),viewportItems:v,listElRef:l,itemsElRef:z(null),scrollTo:b,handleListResize:function(e){if(o)return;if(A(e.target))return;if(e.contentRect.height===s.value)return;s.value=e.contentRect.height;const{onResize:r}=t;void 0!==r&&r(e)},handleListScroll:function(e){var o;null===(o=t.onScroll)||void 0===o||o.call(t,e),R&&B||L()},handleListWheel:function(e){var o;if(null===(o=t.onWheel)||void 0===o||o.call(t,e),R){const t=l.value;if(null!=t){if(0===e.deltaX){if(0===t.scrollTop&&e.deltaY<=0)return;if(t.scrollTop+t.offsetHeight>=t.scrollHeight&&e.deltaY>=0)return}e.preventDefault(),t.scrollTop+=e.deltaY/ft(),t.scrollLeft+=e.deltaX/ft(),L(),B=!0,x((()=>{B=!1}))}}},handleItemResize:function(e,r){var s,u,c;if(o)return;if(t.ignoreItemResize)return;if(A(r.target))return;const{value:f}=a,h=n.value.get(e),p=f.get(h),v=null!==(c=null===(u=null===(s=r.borderBoxSize)||void 0===s?void 0:s[0])||void 0===u?void 0:u.blockSize)&&void 0!==c?c:r.contentRect.height;if(v===p)return;0===v-t.itemSize?i.delete(e):i.set(e,v-t.itemSize);const m=v-p;if(0===m)return;f.add(h,m);const g=l.value;if(null!=g){if(void 0===y){const t=f.sum(h);g.scrollTop>t&&g.scrollBy(0,m)}else if(h<y)g.scrollBy(0,m);else if(h===y){v+f.sum(h)>g.scrollTop+g.offsetHeight&&g.scrollBy(0,m)}L()}d.value++}}},render(){const{itemResizable:t,keyField:e,keyToIndex:o,visibleItemsTag:r}=this;return d(ut,{onResize:this.handleListResize},{default:()=>{var n,l;return d("div",b(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[0!==this.items.length?d("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[d(r,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map((r=>{const n=r[e],l=o.get(n),s=this.$slots.default({item:r,index:l})[0];return t?d(ut,{key:n,onResize:t=>this.handleItemResize(n,t)},{default:()=>s}):(s.key=n,s)}))})]):null===(l=(n=this.$slots).empty)||void 0===l?void 0:l.call(n)])}})}}),vt=V(".v-x-scroll",{overflow:"auto",scrollbarWidth:"none"},[V("&::-webkit-scrollbar",{width:0,height:0})]),mt=r({name:"XScroll",props:{disabled:Boolean,onScroll:Function},setup(){const t=z(null);const e=E();vt.mount({id:"vueuc/x-scroll",head:!0,anchorMetaName:q,ssr:e});const o={scrollTo(...e){var o;null===(o=t.value)||void 0===o||o.scrollTo(...e)}};return Object.assign({selfRef:t,handleWheel:function(t){t.currentTarget.offsetWidth<t.currentTarget.scrollWidth&&0!==t.deltaY&&(t.currentTarget.scrollLeft+=t.deltaY+t.deltaX,t.preventDefault())}},o)},render(){return d("div",{ref:"selfRef",onScroll:this.onScroll,onWheel:this.disabled?void 0:this.handleWheel,class:"v-x-scroll"},this.$slots)}}),gt="v-hidden",bt=V("[v-hidden]",{display:"none!important"}),yt=r({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(t,{slots:e}){const o=z(null),r=z(null);function n(){const{value:n}=o,{getCounter:l,getTail:s}=t;let i;if(i=void 0!==l?l():r.value,!n||!i)return;i.hasAttribute(gt)&&i.removeAttribute(gt);const{children:a}=n,u=n.offsetWidth,d=[],c=e.tail?null==s?void 0:s():null;let f=c?c.offsetWidth:0,h=!1;const p=n.children.length-(e.tail?1:0);for(let e=0;e<p-1;++e){if(e<0)continue;const o=a[e];if(h){o.hasAttribute(gt)||o.setAttribute(gt,"");continue}o.hasAttribute(gt)&&o.removeAttribute(gt);const r=o.offsetWidth;if(f+=r,d[e]=r,f>u){const{updateCounter:o}=t;for(let t=e;t>=0;--t){const r=p-1-t;void 0!==o?o(r):i.textContent=`${r}`;const n=i.offsetWidth;if(f-=d[t],f+n<=u||0===t){h=!0,e=t-1,c&&(-1===e?(c.style.maxWidth=u-n+"px",c.style.boxSizing="border-box"):c.style.maxWidth="");break}}}}const{onUpdateOverflow:v}=t;h?void 0!==v&&v(!0):(void 0!==v&&v(!1),i.setAttribute(gt,""))}const l=E();return bt.mount({id:"vueuc/overflow",head:!0,anchorMetaName:q,ssr:l}),f(n),{selfRef:o,counterRef:r,sync:n}},render(){const{$slots:t}=this;return p(this.sync),d("div",{class:"v-overflow",ref:"selfRef"},[v(t,"default"),t.counter?t.counter():d("span",{style:{display:"inline-block"},ref:"counterRef"}),t.tail?t.tail():null])}});function wt(t){return t instanceof HTMLElement}function xt(t){for(let e=0;e<t.childNodes.length;e++){const o=t.childNodes[e];if(wt(o)&&($t(o)||xt(o)))return!0}return!1}function St(t){for(let e=t.childNodes.length-1;e>=0;e--){const o=t.childNodes[e];if(wt(o)&&($t(o)||St(o)))return!0}return!1}function $t(t){if(!function(t){if(t.tabIndex>0||0===t.tabIndex&&null!==t.getAttribute("tabIndex"))return!0;if(t.getAttribute("disabled"))return!1;switch(t.nodeName){case"A":return!!t.href&&"ignore"!==t.rel;case"INPUT":return"hidden"!==t.type&&"file"!==t.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}(t))return!1;try{t.focus({preventScroll:!0})}catch(e){}return document.activeElement===t}let Tt=[];const Mt=r({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(t){const e=T(),o=z(null),r=z(null);let n=!1,l=!1;const s="undefined"==typeof document?null:document.activeElement;function a(){return Tt[Tt.length-1]===e}function u(e){var o;"Escape"===e.code&&a()&&(null===(o=t.onEsc)||void 0===o||o.call(t,e))}function d(t){if(!l&&a()){const e=c();if(null===e)return;if(e.contains(M(t)))return;v("first")}}function c(){const t=o.value;if(null===t)return null;let e=t;for(;!(e=e.nextSibling,null===e||e instanceof Element&&"DIV"===e.tagName););return e}function p(){var o;if(t.disabled)return;if(document.removeEventListener("focus",d,!0),Tt=Tt.filter((t=>t!==e)),a())return;const{finalFocusTo:r}=t;void 0!==r?null===(o=G(r))||void 0===o||o.focus({preventScroll:!0}):t.returnFocusOnDeactivated&&s instanceof HTMLElement&&(l=!0,s.focus({preventScroll:!0}),l=!1)}function v(e){if(a()&&t.active){const t=o.value,n=r.value;if(null!==t&&null!==n){const o=c();if(null==o||o===n)return l=!0,t.focus({preventScroll:!0}),void(l=!1);l=!0;const r="first"===e?xt(o):St(o);l=!1,r||(l=!0,t.focus({preventScroll:!0}),l=!1)}}}return f((()=>{h((()=>t.active),(o=>{o?(!function(){var o;if(t.disabled)return;if(Tt.push(e),t.autoFocus){const{initialFocusTo:e}=t;void 0===e?v("first"):null===(o=G(e))||void 0===o||o.focus({preventScroll:!0})}n=!0,document.addEventListener("focus",d,!0)}(),w("keydown",document,u)):(y("keydown",document,u),n&&p())}),{immediate:!0})})),i((()=>{y("keydown",document,u),n&&p()})),{focusableStartRef:o,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:function(t){if(l)return;const e=c();null!==e&&(null!==t.relatedTarget&&e.contains(t.relatedTarget)?v("last"):v("first"))},handleEndFocus:function(t){l||(null!==t.relatedTarget&&t.relatedTarget===o.value?v("last"):v("first"))}}},render(){const{default:t}=this.$slots;if(void 0===t)return null;if(this.disabled)return t();const{active:o,focusableStyle:r}=this;return d(e,null,[d("div",{"aria-hidden":"true",tabindex:o?"0":"-1",ref:"focusableStartRef",style:r,onFocus:this.handleStartFocus}),t(),d("div",{"aria-hidden":"true",style:r,ref:"focusableEndRef",tabindex:o?"0":"-1",onFocus:this.handleEndFocus})])}});export{Mt as F,J as L,ut as V,pt as a,it as b,P as c,_ as d,yt as e,mt as f,at as r};
