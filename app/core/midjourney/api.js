'use strict';const _0x332ec3=_0x10ce;(function(_0x34453e,_0x493b57){const _0x45f7ec=_0x10ce,_0x561c7d=_0x34453e();while(!![]){try{const _0x5d81ff=parseInt(_0x45f7ec(0xb0))/0x1*(-parseInt(_0x45f7ec(0xe7))/0x2)+parseInt(_0x45f7ec(0xdc))/0x3+-parseInt(_0x45f7ec(0xd2))/0x4*(-parseInt(_0x45f7ec(0xcf))/0x5)+-parseInt(_0x45f7ec(0xaa))/0x6*(-parseInt(_0x45f7ec(0xac))/0x7)+-parseInt(_0x45f7ec(0xaf))/0x8+-parseInt(_0x45f7ec(0xb4))/0x9*(-parseInt(_0x45f7ec(0xa4))/0xa)+-parseInt(_0x45f7ec(0xd8))/0xb;if(_0x5d81ff===_0x493b57)break;else _0x561c7d['push'](_0x561c7d['shift']());}catch(_0x4d016b){_0x561c7d['push'](_0x561c7d['shift']());}}}(_0x22c3,0x4f9a0));Object['defineProperty'](exports,_0x332ec3(0xd3),{'value':!![]}),exports[_0x332ec3(0xb2)]=void 0x0;const fetch=require('isomorphic-fetch'),command_1=require(_0x332ec3(0xa7)),utils_1=require(_0x332ec3(0xab));function _0x22c3(){const _0x2cf636=['upload\x20image\x20fail,\x20because\x20of\x20upload\x20fail','application/json','describe','data','interactions','type','/attachments','action','split','status','REQUEST_SUCCESS','options','upload_url','getPayload','guild_id','fast','map','waitMessage','token','length','105275rHBOYZ','createRandomId','then','76drGYoQ','__esModule','log','attachments','please\x20invoke\x20`init`\x20method\x20before\x20every\x20operate','assign','7428883QfzvEY','settings','session_id','fetch','1786695CIbbIK','imagine','inpaint','replace','POST','REQUEST_FAILED','info','post','upload_filename','all','/api/v9/channels/','142858dXlCQl','varyRegion','apiBaseUrl','nextNonce','1409410UUYHUU','getCommand','opts','./command','regionNonce:\x20','upload\x20image\x20fail,\x20no\x20attachment','36AiBMCm','./utils','234346qKLTeS','json','put','973848zWdmwN','3vgMaQa','提交图片:\x20','MidjourneyApi','nonce','9pxgITp','stringify','filter','blend','relax','channel_id','catch'];_0x22c3=function(){return _0x2cf636;};return _0x22c3();}function _0x10ce(_0x2f6b1c,_0x550ac4){const _0x22c35f=_0x22c3();return _0x10ce=function(_0x10ce24,_0xbc047b){_0x10ce24=_0x10ce24-0xa4;let _0x251617=_0x22c35f[_0x10ce24];return _0x251617;},_0x10ce(_0x2f6b1c,_0x550ac4);}class MidjourneyApi extends command_1['MidjourneyCommand']{constructor(_0x4feed5){const _0x3745fb=_0x332ec3;super(_0x4feed5),this[_0x3745fb(0xa6)]=_0x4feed5;}['interactions'](_0x196e17,_0x8a9505){const _0x55339c=_0x332ec3,_0x5158c8={'Content-Type':_0x55339c(0xbc),'Authorization':this['opts'][_0x55339c(0xcd)]};return fetch(this[_0x55339c(0xa6)][_0x55339c(0xe9)]+'/api/v9/interactions',{'method':_0x55339c(0xe0),'body':JSON[_0x55339c(0xb5)](_0x196e17),'headers':_0x5158c8})[_0x55339c(0xd1)](_0x4763f9=>_0x4763f9['ok']?_0x8a9505?.(_0x55339c(0xc5),_0x4763f9):_0x8a9505?.(_0x55339c(0xe1),_0x4763f9))['catch'](_0x250d00=>_0x8a9505?.('REQUEST_FAILED',_0x250d00));}[_0x332ec3(0xc8)](_0x2d64e6,_0x58ed7e,_0x489a1d={},_0x10c527=(0x0,utils_1[_0x332ec3(0xea)])()){const _0x1b9e37=_0x332ec3;if(!this[_0x1b9e37(0xa6)][_0x1b9e37(0xda)])throw new Error(_0x1b9e37(0xd6));return Object[_0x1b9e37(0xd7)]({'type':_0x2d64e6,'application_id':'936929561302675456','guild_id':this[_0x1b9e37(0xa6)][_0x1b9e37(0xc9)],'channel_id':this['opts'][_0x1b9e37(0xb9)],'session_id':this[_0x1b9e37(0xa6)][_0x1b9e37(0xda)],'nonce':_0x10c527,'data':_0x58ed7e},_0x489a1d);}[_0x332ec3(0xde)](_0x38d29b,_0x3a6fb5,_0x191cc2,_0x41d3c7){const _0x5db1a9=_0x332ec3,_0x24c66e={'Content-Type':_0x5db1a9(0xbc)};return fetch(this[_0x5db1a9(0xa6)]['discordsaysUrl']+'/inpaint/api/submit-job',{'method':_0x5db1a9(0xe0),'body':JSON['stringify']({'customId':_0x38d29b,'prompt':_0x3a6fb5,'mask':_0x191cc2[_0x5db1a9(0xdf)](/^data:.+?;base64,/,''),'userId':'0','username':'0','full_prompt':null}),'headers':_0x24c66e})['then'](_0x136317=>_0x136317['ok']?_0x41d3c7?.('REQUEST_SUCCESS',_0x136317):_0x41d3c7?.('REQUEST_FAILED',_0x136317))[_0x5db1a9(0xba)](_0x19c9b3=>_0x41d3c7?.(_0x5db1a9(0xe1),_0x19c9b3));}async[_0x332ec3(0xdd)](_0x359260,_0x301ecb){const _0x52b9c0=_0x332ec3;return this[_0x52b9c0(0xa5)](_0x52b9c0(0xdd))[_0x52b9c0(0xd1)](_0x57fd35=>{const _0x61c826=_0x52b9c0,_0xe3ef9=this[_0x61c826(0xc8)](0x2,Object[_0x61c826(0xd7)](_0x57fd35,{'options':[{..._0x57fd35?.[_0x61c826(0xc6)][0x0],'value':_0x359260}]}));return Promise[_0x61c826(0xe5)]([this['interactions'](_0xe3ef9,_0x301ecb),this[_0x61c826(0xa6)]['ws']?.[_0x61c826(0xcc)]({'nonce':_0xe3ef9[_0x61c826(0xb3)],'cb':_0x301ecb})])[_0x61c826(0xd1)](([_0xc17288,_0x4ca86d])=>_0x4ca86d);});}async['setAttachment'](_0x443498){const _0x1e314f=_0x332ec3,_0x5a3877=this[_0x1e314f(0xa6)][_0x1e314f(0xe9)]+_0x1e314f(0xe6)+this[_0x1e314f(0xa6)][_0x1e314f(0xb9)]+_0x1e314f(0xc1),_0x528f89={'Content-Type':_0x1e314f(0xbc),'Authorization':this[_0x1e314f(0xa6)]['token']},{files:_0x12e6d0}=_0x443498;try{return await this[_0x1e314f(0xa6)]['fetch'](_0x5a3877,{'headers':_0x528f89,'body':JSON[_0x1e314f(0xb5)](_0x12e6d0),'method':_0x1e314f(0xe3)})[_0x1e314f(0xd1)](_0x655e9b=>_0x655e9b[_0x1e314f(0xad)]());}catch(_0x1369a8){console[_0x1e314f(0xd4)](_0x1e314f(0xb1),_0x1369a8);}}['createRandomId'](){return parseInt(Math['random']()*0x3e8+'')+'';}async['uploadImage'](_0x230865){const _0x46bf48=_0x332ec3,{buffer:_0x3274af,filename:_0x1c9e6f}=_0x230865,_0x54c97e=_0x3274af[_0x46bf48(0xce)],_0x564f7c=this[_0x46bf48(0xd0)](),_0x27da29=await this['setAttachment']({'files':[{'filename':_0x1c9e6f,'file_size':_0x54c97e,'id':_0x564f7c,'is_clip':![]}]});if(_0x27da29[_0x46bf48(0xc4)]!=0xc8)throw new Error(_0x46bf48(0xa9));const _0x55a7c6=_0x27da29[_0x46bf48(0xbe)];if(_0x55a7c6[_0x46bf48(0xd5)]?.[_0x46bf48(0xce)]!=0x1)throw new Error(_0x46bf48(0xa9));const _0x4c245d=await this[_0x46bf48(0xa6)][_0x46bf48(0xdb)](_0x55a7c6[_0x46bf48(0xd5)][0x0][_0x46bf48(0xc7)],{'method':_0x46bf48(0xae),'body':_0x3274af,'headers':{'Content-Type':'image/png'}});if(_0x4c245d[_0x46bf48(0xc4)]!=0xc8)throw new Error(_0x46bf48(0xbb));const _0x2227fa=_0x55a7c6['attachments'][0x0][_0x46bf48(0xe4)],_0xff9b6a=_0x2227fa[_0x46bf48(0xc3)]('/'),_0x138237=_0xff9b6a[_0x46bf48(0xce)]>0x1?_0xff9b6a[0x1]:_0xff9b6a[0x0];return{'attachments':[{'id':_0x564f7c,'filename':_0x138237,'uploaded_filename':_0x2227fa}]};}async[_0x332ec3(0xb7)](_0x5638f9,_0x1c0c19){const _0x5e61a6=_0x332ec3;return this[_0x5e61a6(0xa5)]('blend')[_0x5e61a6(0xd1)](_0x1a5594=>{const _0xbfbafc=_0x5e61a6,_0x12b478=_0x1a5594['options'][_0xbfbafc(0xb6)](_0xd75b5b=>_0xd75b5b[_0xbfbafc(0xc0)]===0xb),_0x2a56ac=_0x5638f9[_0xbfbafc(0xcb)]((_0x437e39,_0x3800e8)=>{return{..._0x12b478[_0x3800e8],'value':_0x437e39['id']};}),_0x473884=this['getPayload'](0x2,Object[_0xbfbafc(0xd7)](_0x1a5594,{'options':_0x2a56ac,'attachments':_0x5638f9}));return Promise[_0xbfbafc(0xe5)]([this[_0xbfbafc(0xbf)](_0x473884,_0x1c0c19),this[_0xbfbafc(0xa6)]['ws']?.[_0xbfbafc(0xcc)]({'nonce':_0x473884['nonce'],'cb':_0x1c0c19})])[_0xbfbafc(0xd1)](([_0x267e78,_0x3ebf6b])=>_0x3ebf6b);});}async['describe'](_0x309120,_0x383fd9){const _0x5aa500=_0x332ec3;return this[_0x5aa500(0xa5)](_0x5aa500(0xbd))[_0x5aa500(0xd1)](_0x763587=>{const _0x51dbd1=_0x5aa500,_0x1a6e76=this['getPayload'](0x2,Object[_0x51dbd1(0xd7)](_0x763587,{'options':[{..._0x763587?.['options'][0x0],'value':_0x309120[0x0]['id']}],'attachments':_0x309120}));return Promise[_0x51dbd1(0xe5)]([this[_0x51dbd1(0xbf)](_0x1a6e76,_0x383fd9),this[_0x51dbd1(0xa6)]['ws']?.[_0x51dbd1(0xcc)]({'nonce':_0x1a6e76['nonce'],'cb':_0x383fd9})])[_0x51dbd1(0xd1)](([_0x5e350a,_0x26afa9])=>_0x26afa9);});}async[_0x332ec3(0xc2)](_0x5451fd,_0x4402fc,_0x5098a9,_0x4cbc27){const _0x9e3a20=_0x332ec3,_0x598b96=this[_0x9e3a20(0xc8)](0x3,{'component_type':0x2,'custom_id':_0x4402fc},{'message_flags':_0x5098a9,'message_id':_0x5451fd});return Promise[_0x9e3a20(0xe5)]([this[_0x9e3a20(0xbf)](_0x598b96,_0x4cbc27),this['opts']['ws']?.['waitMessage']({'nonce':_0x598b96['nonce'],'cb':_0x4cbc27,'parentId':_0x5451fd})])[_0x9e3a20(0xd1)](([_0x3cf35f,_0x167758])=>_0x167758);}async['remixSubmit'](_0x3aaf3b,_0xd9f184,_0x3fd756,_0x27eafd){const _0x3898cf=_0x332ec3,_0x4b0530=this[_0x3898cf(0xc8)](0x5,{'id':_0x3aaf3b,'custom_id':_0xd9f184,'components':_0x3fd756});return Promise[_0x3898cf(0xe5)]([this[_0x3898cf(0xbf)](_0x4b0530,_0x27eafd),this[_0x3898cf(0xa6)]['ws']?.[_0x3898cf(0xcc)]({'nonce':_0x4b0530[_0x3898cf(0xb3)],'cb':_0x27eafd})])[_0x3898cf(0xd1)](([_0x1f3764,_0xc92cea])=>_0xc92cea);}async[_0x332ec3(0xe8)](_0x22af1d,_0x29ecc1,_0x3cd4ea,_0x98f265){const _0x4b3039=_0x332ec3,_0x2bdff7=(0x0,utils_1[_0x4b3039(0xea)])();return Promise[_0x4b3039(0xe5)]([this[_0x4b3039(0xde)](_0x22af1d,_0x4b3039(0xa8)+_0x2bdff7+',\x20'+_0x29ecc1,_0x3cd4ea,_0x98f265),this['opts']['ws']?.['waitMessage']({'nonce':_0x2bdff7,'cb':_0x98f265})])['then'](([_0x4a5315,_0x3864ee])=>_0x3864ee);}async[_0x332ec3(0xe2)](_0x2d4099){const _0x5c3131=_0x332ec3;return this[_0x5c3131(0xa5)]('info')[_0x5c3131(0xd1)](_0x3a9abd=>{const _0x110c4a=_0x5c3131,_0x11be0c=this['getPayload'](0x2,_0x3a9abd);return Promise[_0x110c4a(0xe5)]([this['interactions'](_0x11be0c,_0x2d4099),this[_0x110c4a(0xa6)]['ws']?.[_0x110c4a(0xcc)]({'nonce':_0x11be0c[_0x110c4a(0xb3)],'cb':_0x2d4099})])[_0x110c4a(0xd1)](([_0x5ad001,_0x3776cc])=>_0x3776cc);});}async[_0x332ec3(0xd9)](_0x11c840){const _0x25ff9f=_0x332ec3;return this[_0x25ff9f(0xa5)](_0x25ff9f(0xd9))[_0x25ff9f(0xd1)](_0x4c0245=>{const _0x225761=_0x25ff9f,_0x46c05e=this[_0x225761(0xc8)](0x2,_0x4c0245);return Promise['all']([this[_0x225761(0xbf)](_0x46c05e,_0x11c840),this['opts']['ws']?.[_0x225761(0xcc)]({'nonce':_0x46c05e[_0x225761(0xb3)],'cb':_0x11c840})])[_0x225761(0xd1)](([_0x3a76e6,_0x347ba0])=>_0x347ba0);});}async['fast'](_0x5288e3){const _0x5d0d30=_0x332ec3;return this[_0x5d0d30(0xa5)](_0x5d0d30(0xca))['then'](_0xe3a01=>{const _0x166b54=_0x5d0d30,_0x4da8b8=this[_0x166b54(0xc8)](0x2,_0xe3a01);return Promise[_0x166b54(0xe5)]([this[_0x166b54(0xbf)](_0x4da8b8,_0x5288e3),this[_0x166b54(0xa6)]['ws']?.[_0x166b54(0xcc)]({'nonce':_0x4da8b8[_0x166b54(0xb3)],'cb':_0x5288e3})])[_0x166b54(0xd1)](([_0x568a2b,_0x216c7f])=>_0x216c7f);});}async[_0x332ec3(0xb8)](_0x8fa235){const _0x29a0de=_0x332ec3;return this[_0x29a0de(0xa5)](_0x29a0de(0xb8))[_0x29a0de(0xd1)](_0x31c824=>{const _0xcdfe5a=_0x29a0de,_0x2b7a71=this[_0xcdfe5a(0xc8)](0x2,_0x31c824);return Promise[_0xcdfe5a(0xe5)]([this[_0xcdfe5a(0xbf)](_0x2b7a71,_0x8fa235),this[_0xcdfe5a(0xa6)]['ws']?.[_0xcdfe5a(0xcc)]({'nonce':_0x2b7a71['nonce'],'cb':_0x8fa235})])[_0xcdfe5a(0xd1)](([_0x20c2a2,_0x460799])=>_0x460799);});}}exports['MidjourneyApi']=MidjourneyApi;